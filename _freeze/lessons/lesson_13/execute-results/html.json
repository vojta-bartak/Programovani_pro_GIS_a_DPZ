{
  "hash": "b9b451199198296d06a70b577cc6101a",
  "result": {
    "engine": "jupyter",
    "markdown": "---\ntitle: \"Lekce 13: Geoprocessingové nástroje II\"\nsubtitle: \"Python pro GIS - Rastrové analýzy\"\nauthor: \"Vojtěch Barták, FŽP ČZU Praha\"\ndate: today\nformat:\n  html:\n    toc: true\n    toc-depth: 3\n    number-sections: true\n    number-depth: 3\n    code-fold: false\n    theme: cosmo\n  pdf:       \n    toc: true\n    toc-depth: 3\n    number-sections: true\n    number-depth: 3\neditor: \n  markdown: \n    wrap: 72\n---\n\n\\newpage\n\n# Data a nastavení\n\n**Data ke stažení:**\n\n- `dtm_Liberec/` - složka s rastrem digitálního modelu terénu\n- `obce/` - složka s polygony obcí v ČR\n- `dtm_katastry/` - složka s DTM pro jednotlivé katastry\n- `CLC_CR_2018/` - Složka s rastrem Corine Land Cover pro ČR\n- `data_vinice/` - složka s vrstevnicemi pro závěrečnou úlohu\n\n**Nastavení prostředí:**\n\n```python\nimport arcpy\n\n# Workspace\narcpy.env.workspace = r\"C:\\TEMP\\Python_GIS\\Lekce_13\"\narcpy.env.overwriteOutput = True\n\n# Aktivace Spatial Analyst\narcpy.CheckOutExtension(\"Spatial\")\n```\n\n::: {.callout-note}\n## Pracovní prostředí\n\n**Úlohy 1-11** řešte v **Python Window** v ArcGIS Pro.\n\n**Úlohy 12-14** (dávkové zpracování) řešte v **Python Notebooku**.\n:::\n\n------------------------------------------------------------------------\n\n# Analýza terénu\n\n## Úloha 1: Svažitost\n\n**Zadání:** Spočítejte svažitost (v procentech).\n\n```python\n# Výpočet svažitosti\nslope = arcpy.sa.Slope(\"dtm_Liberec.tif\", \"PERCENT_RISE\")\n\n# Výsledek existuje pouze v paměti!\n# Pro uložení na disk použijte metodu save()\nslope.save(\"svazitost\")\n```\n\n::: {.callout-important}\n## Rastrové nástroje a paměť\n\nRastrové nástroje vrací **Raster objekt**, který existuje pouze v **operační paměti**. Pro trvalé uložení na disk musíte použít metodu `.save()`:\n\n```python\n# Pouze v paměti:\nslope = arcpy.sa.Slope(\"dtm_Liberec.tif\", \"PERCENT_RISE\")\n\n# Uložení na disk:\nslope.save(\"svazitost\")\n```\n\nDo metody `.save()` lze zadat buď absolutní cestu, nebo jen relativní (viz ukázka). V druhém případě se rastr uloží do aktuálního pracovního workspace.\n\nPokud výstupní rastr nepotřebujete uchovat, ale jen použít v dalších nástrojích v rámci stejné analýzy, není třeba rastr ukládat na disk. Lze použít proměnnou s Raster objektem vytvořeným z předchozí analýzy.\n\n:::\n\n**Vizuální kontrola:** Otevřete vrstvu `svazitost` v Contents a zkontrolujte rozsah hodnot.\n\n## Úloha 2: Aspekt\n\n**Zadání:** Spočítejte aspekt.\n\n```python\n# Výpočet aspektu (orientace svahu)\naspect = arcpy.sa.Aspect(\"dtm_Liberec.tif\")\n```\n\n**Interpretace hodnot:**\n\n- 0° / 360° = sever\n- 90° = východ\n- 180° = jih\n- 270° = západ\n- -1 = rovné plochy\n\n------------------------------------------------------------------------\n\n# Lokální mapová algebra\n\n## Úloha 3: Svažitost > 5 %\n\n**Zadání:** Najděte místa, kde je svažitost větší než 5 %.\n\n### Způsob 1: Nástroj GreaterThan\n\n```python\n# Použití funkce GreaterThan\nslope_gt5 = arcpy.sa.GreaterThan(slope, 5)\n```\n\n### Způsob 2: Přímé použití operátorů\n\n```python\n# Kratší zápis pomocí operátoru >\nslope_gt5 = slope > 5\n```\n\nV obou případech jsme použili proměnnou `slope` vytvořenou v předchozích krocích.\n\n::: {.callout-tip}\n## Dva způsoby zápisu\n\n**Funkce** (`GreaterThan`, `LessThan`, `BooleanAnd` apod.) - explicitní, čitelné  \n**Operátory** (`>`, `<`, `==`) - stručné, pythonické\n\nOba způsoby dávají stejný výsledek: rastr s hodnotami 1 (True) a 0 (False).\n:::\n\n## Úloha 4: Jižní aspekt\n\n**Zadání:** Najděte místa, kde je aspekt zhruba jižní (mezi 135° a 225°).\n\n```python\n# Jižní aspekt: 135° - 225°\naspect_south = (aspect >= 135) & (slope <= 225)\naspect_south.save(\"aspekt_jizni\")\n```\n\n**Alternativní zápis pomocí funkcí:**\n\n```python\nge135 = arcpy.sa.GreaterThanEqual(\"aspekt\", 135)\nle225 = arcpy.sa.LessThanEqual(\"aspekt\", 225)\naspect_south = ge135 & le225\n```\n\n::: {.callout-tip}\nV pythonu se pro operátor AND standardně používá `and`. Pro mapovou algebru v rámci ArcPy se ale používá `&`.\n:::\n\n## Úloha 5: Multikriteriální analýza\n\n**Zadání:** Najděte místa, kde jsou splněny obě podmínky (svažitost > 5 % **A** jižní aspekt).\n\n```python\n# Kombinace obou podmínek pomocí & (AND)\nsuitable = slope_gt5 & aspect_south\nsuitable.save(\"vhodna_mista\")\n```\n\n**Nebo vše v jednom příkazu:**\n\n```python\nsuitable = (slope > 5) & (aspect >= 135) & (aspect <= 225)\nsuitable.save(\"vhodna_mista_v2\")\n```\n\n::: {.callout-note}\n## Interpretace\n\nVýsledek má hodnotu 1 tam, kde jsou splněny **obě** podmínky současně - například vhodná místa pro vinice nebo sluneční panely.\n\nPokud bychom chtěli najít místa, kde je splněna **alespoň jedna** z podmínek, použili bychom operátor OR. Ten se v Pythonu standardně píše `or`, pro mapovou algebru v rámci ArcPy se ale používá `|`:\n\n```python\nsuitable = (slope > 5) | (aspect >= 135) & (aspect <= 225)\n```\n:::\n\n------------------------------------------------------------------------\n\n# Fokální mapová algebra\n\n## Úloha 6: Vyhlazení terénu\n\n**Zadání:** Zhlaďte model terénu klouzavým průměrem 3×3 buňky.\n\n```python\n# Focal Statistics - průměr v okolí 3x3 buňky\ndtm_smooth = arcpy.sa.FocalStatistics(\"dtm_Liberec.tif\")\ndtm_smooth.save(\"dtm_smooth\") # není nutné, pokud nechcete rastr uložit\n```\n\n:::{.callout-note}\nNástroj `FocalStatistics` má defaultně nastavené okolí 3x3 buňky a počítá průměr. Níže je ukázka, jak by vypadalo volání nástroje s explicitním nastavením těchto parametrů: \n\n```python\ndtm_smooth = arcpy.sa.FocalStatistics(\n    \"dtm_Liberec.tif\",\n    NbrRectangle(3, 3, \"CELL\"),\n    \"MEAN\"\n)\n```\n\n**Parametry:**\n\n- `NbrRectangle(width, height, \"CELL\")` - obdélníkové okolí\n- `\"MEAN\"` - průměrná hodnota (další možnosti: MAX, MIN, STD, SUM apod.)\n\nZkuste změnit okno na 5x5 buněk a spočítat vždy maximální místo průměrné hodnoty.\n:::\n\n\n## Úloha 7: Vrstevnice\n\n**Zadání:** Vytvořte vrstevnice z původního a zhlazeného modelu terénu (po 200 metrech) a porovnejte je.\n\n```python\n# Vrstevnice z původního DTM\narcpy.sa.Contour(\n    \"dtm_Liberec.tif\",\n    \"vrstevnice_original\",\n    200  # interval vrstevnic\n)\n\n# Vrstevnice ze zhlazeného DTM\narcpy.sa.Contour(\n    \"dtm_smooth\",\n    \"vrstevnice_smooth\",\n    200\n)\n```\n\n::: {.callout-note}\n## Motivace pro vyhlazení\n\nOtevřete obě vrstvy vrstevnic v ArcGIS Pro a porovnejte je:\n\n- **Původní vrstevnice** - více detailů, ale \"zubatější\"\n- **Vyhlazené vrstevnice** - hladší průběh, méně šumu\n\nVyhlazení je užitečné pro **vizualizaci terénu** nebo když potřebujete **odstranit drobné terénní artefakty** (např. chyby měření).\n:::\n\n------------------------------------------------------------------------\n\n# Zonální mapová algebra\n\n## Úloha 8: Převýšení v katastrech\n\n**Zadání:** Zjistěte převýšení terénu na území jednotlivých obcí (max - min).\n\n```python\n# Zonal Statistics as Table\narcpy.sa.ZonalStatisticsAsTable(\n    \"obce.shp\",  # zóny\n    \"NAZEV\",                 # identifikační pole\n    \"dtm_Liberec.tif\",       # hodnoty\n    \"stat_katastry\",         # výstupní tabulka\n    statistics_type=\"RANGE\"\n)\n```\n\n## Úloha 9: Zastoupení krajinného pokryvu\n\n**Zadání:** Zjistěte zastoupení jednotlivých tříd krajinného pokryvu v jednotlivých okresech.\n\n```python\n# Tabulate Area\narcpy.sa.TabulateArea(\n    \"okresy.shp\",       # zóny\n    \"NAZEV\",            # identifikační pole zón\n    \"CLC_2018.tif\",     # kategorie (třídy)\n    \"VALUE\",            # pole s kódy kategorií\n    \"zastoupeni_clc\"    # výstupní tabulka\n)\n```\n\n**Výsledek:** Tabulka obsahující rozlohu (v m²) každé třídy CLC v každém okrese.\n\n::: {.callout-tip}\n## Kdy použít co?\n\n**ZonalStatisticsAsTable** - chci statistiky (průměr, max, min) pro každou zónu\n\n**TabulateArea** - chci vědět, kolik plochy zaujímá každá **kategorie** v každé zóně\n:::\n\n## Úloha 10: Relativní zastoupení lesů\n\n**Zadání:** Zjistěte relativní zastoupení lesů na území jednotlivých obcí.\n\n### Krok 1: Vytvoření binární masky lesů\n\n```python\n# Lesy v CLC mají kód 3\n# Vytvoříme rastr 1/0 (les/neles)\nlesy = arcpy.sa.Equal('CLC_2018.tif', 3)\n```\n\n**Alternativně** bychom mohli použít oprátor '=='. K tomu je ale nutné mít vstupní rastr v podobě Raster objektu. Ten vytvoříme funkcí `Raster`:\n\n```python\n# vytvoření Raster objektu z rastru CLC\nclc = arcpy.sa.Raster('CLC_2018.tif')\n\n# vytvoření binární masky lesů\nlesy = clc == 3\n```\n\n### Krok 2: Zonální statistiky\n\n```python\n# Průměr z masky 1/0 = relativní zastoupení\narcpy.sa.ZonalStatisticsAsTable(\n    \"obce.shp\",\n    \"NAZEV\",\n    \"lesy_mask\",\n    \"zastoupeni_lesu\",\n    statistics_type=\"MEAN\"\n)\n```\n\n::: {.callout-note}\n## Vysvětlení\n\nPrůměr z binární masky (0/1) udává **podíl buněk s hodnotou 1**, tedy relativní zastoupení lesů v zóně.\n\nPříklad: průměr 0.35 = 35 % plochy okresu tvoří lesy.\n:::\n\n------------------------------------------------------------------------\n\n# Reklasifikace\n\n## Úloha 11: Výšková pásma\n\n**Zadání:** Reklasifikujte model terénu na výškové pásy po 200 metrech.\n\nZákladem reklasifikace je **reklasifikační tabulka**. Pokud chceme konkrétní původní hodnotě přiřadit konkrétní novou hodnotu, má tato tabulka **dva sloupce** - jeden pro původní a druhý pro cílovou hodnotu. Pokud chceme novou hodnotu přiřazovat nějakému **rozsahu hodnot** z původního rastru (jako je tomu v naší úloze), má tabulka **tři sloupce** - první dva pro dolní a horní mez rozsahu, třetí pro cílovou hodnotu.\n\nV Pythonu se reklasifikační tabulka reprezentuje pomocí objektů `RemapValue` (pro konkrétní hodnoty), nebo `RemapRange` (pro rozsahy hodnot). Do nich se hodnoty předávají jako **seznam seznamů**, ve kterém vnitřní seznamy představují jednotlivé řádky tabulky (viz ukázka).\n\nRozsah nadmořských výšek našeho DTM je 211 až 1434 m n. m. \n\n```python\n# Vytvoření remap tabulky\nremap_list = [[0,200,1],[200,400,2],[400,600,3],[600,800,4],[800,1000,5],[1000,1200,6],[1200,1400,7],[1400,1600,8]]\nremap = arcpy.sa.RemapRange(remap_list)\n\n# Reklasifikace\nvyskova_pasma = arcpy.sa.Reclassify(\n    \"dtm_Liberec.tif\",\n    \"VALUE\",\n    remap\n)\nvyskova_pasma.save(\"vyskova_pasma_200m\")\n```\n\n:::{.callout-tip}\n\n## Automatické generování reklasifikační tabulky\n\nTi zkušenější si mohou zjistit rozsah rastru programátorsky a podle toho automaticky nastavit `RemapRange``:\n\n```python\n# Zjištění rozsahu hodnot DTM\nresult = arcpy.management.GetRasterProperties(\"dtm_Liberec.tif\", \"MINIMUM\")\nmin_elev = int(float(result.getOutput(0)))\nresult = arcpy.management.GetRasterProperties(\"dtm_Liberec.tif\", \"MAXIMUM\")\nmax_elev = int(float(result.getOutput(0)))\n\n# Vytvoření remap tabulky\nmin_round = (min_elev // 200) * 200\nmax_round = ((max_elev // 200) + 1) * 200\n\nremap_list = []\nfor i in range(min_round, max_round, 200):\n    remap_list.append([i, i+200, i])\n\nremap = arcpy.sa.RemapRange(remap_list)\n\n# Reklasifikace\nvyskova_pasma = arcpy.sa.Reclassify(\n    \"dtm_Liberec.tif\",\n    \"VALUE\",\n    remap\n)\nvyskova_pasma.save(\"vyskova_pasma_200m\")\n```\n:::\n\n------------------------------------------------------------------------\n\n# Dávkové zpracování\n\n::: {.callout-important}\n## Python Notebook\n\n**Úlohy 12-14 řešte v Python Notebooku**, ne v Python Window. Notebook umožňuje lepší strukturu kódu a dokumentaci procesu.\n:::\n\n## Úloha 12: Multikriteriální analýza pro všechny katastry\n\n**Zadání:** Řešte úlohu 5 (vhodná místa: svažitost > 5 % + jižní aspekt) pro jednotlivé katastry Libereckého kraje.\n\n### Python Notebook řešení\n\n::: {#83a424f5 .cell execution_count=1}\n``` {.python .cell-code}\nimport arcpy\nimport os\n\n# Nastavení\nworkspace = r\"C:\\TEMP\\Python_GIS\\Lekce_13\\dtm_katastry\"\narcpy.env.workspace = workspace\narcpy.env.overwriteOutput = True\narcpy.CheckOutExtension(\"Spatial\")\n\n# Získání seznamu všech DEM\ndem_list = arcpy.ListRasters(\"*.tif\")\nprint(f\"Nalezeno {len(dem_list)} katastrů\")\nprint(f\"{'='*60}\")\n\n# Počítadla\nuspesnych = 0\nchybnych = 0\n\n# Zpracování každého DEM\nfor dem in dem_list:\n    print(f\"Zpracovávám: {dem}\")\n    \n    try:\n        # 1. Svažitost\n        slope = arcpy.sa.Slope(dem, \"PERCENT_RISE\")\n        \n        # 2. Aspekt\n        aspect = arcpy.sa.Aspect(dem)\n        \n        # 3. Vhodná místa (svažitost > 5% + jižní aspekt)\n        suitable = (slope > 5) & (aspect >= 135) & (aspect <= 225)\n        \n        # 4. Uložení výsledku\n        output_name = f\"{os.path.splitext(dem)[0]}_suitable\"\n        suitable.save(output_name)\n        \n        print(f\"  OK - výstup: {output_name}\")\n        uspesnych += 1\n        \n    except Exception as e:\n        print(f\"  CHYBA: {str(e)}\")\n        chybnych += 1\n```\n:::\n\n\n## Úloha 13: Analýza vhodnosti pro vinici\n\n**Zadání:** Jako vášnivý milovník vína toužíte po vlastní vinici. Nejprve je pro ni však třeba vybrat vhodné území, splňující následující kritéria: bude na svazích se sklonem menším než 20%, s jihovýchodní až jihozápadní orientací a zároveň skryta před zraky nenechavých turistů, kteří by ji mohli z okolních vyhlídek vidět a přijít na ochutnávku hroznů. Jakou rozlohu má vhodné území pro založení vinice? Řešte pro jeden katastr.\n\n**Kritéria:**\n\n1. Svah se sklonem < 20 %\n2. Jihovýchodní až jihozápadní orientace (135-225°)\n3. Skryto před vyhlídkami (analýza viditelnosti)\n\n**Vstup:** vrstevnice (SHP)\n\n### Krok 1: Vytvoření DTM z vrstevnic\n\n::: {#e95f7f52 .cell execution_count=2}\n``` {.python .cell-code}\nimport arcpy\n\n# Nastavení\narcpy.env.workspace = r\"C:\\TEMP\\Python_GIS\\Lekce_13\\data_vinice\"\narcpy.CheckOutExtension(\"Spatial\")\n\n# Vstup vrstevnic do TopoToRaster\n# formát: [vrstva, pole s výškou]\ninput_contours = arcpy.sa.TopoContour([[\"vrstevnice.shp\", \"VYSKA\"]]) \n\n# TopoToRaster - interpolace z vrstevnic\ndtm = arcpy.sa.TopoToRaster(input_contours, \"dtm_vinice\", cell_size=10)\n```\n:::\n\n\n### Krok 2: Terénní analýza\n\n::: {#f558988d .cell execution_count=3}\n``` {.python .cell-code}\n# Svažitost\nslope = Slope(dtm, \"PERCENT_RISE\")\n\n# Aspekt\naspect = Aspect(dtm)\n\n# Vhodné svahy (< 20% + jihovýchodní až jihozápadní)\nsuitable_terrain = (slope < 20) & (aspect >= 135) & (aspect <= 225)\n```\n:::\n\n\n### Krok 3: Analýza viditelnosti\n\n:::{.callout-warning}\nPro analýzu vrstvevnic je třeba mít bodový shapefile vyhlídek. Ten v datech zatím není k dispozici. Buď si nějaký vytvořte, nebo tuto část vynechte.\n:::\n\n::: {#dd96a60d .cell execution_count=4}\n``` {.python .cell-code}\n# Předpoklad: máme vrstvu vyhlídek (body)\n# Viewshed - viditelnost z vyhlídek\nviewshed = Viewshed(\n    dtm,\n    \"vyhlidky.shp\",\n    observer_offset=1.7  # výška pozorovatele v metrech\n)\n\n# Neviditelná místa (hodnota 0)\nnot_visible = viewshed == 0\n```\n:::\n\n\n### Krok 4: Finální výběr\n\n::: {#65d4b0d3 .cell execution_count=5}\n``` {.python .cell-code}\n# Kombinace všech kritérií\nfinal_suitable = suitable_terrain & not_visible\nfinal_suitable.save(\"vhodne_pro_vinici\")\n```\n:::\n\n\n## Úloha 14: Vinice pro všechny okresy\n\n**Zadání:** Řešte předchozí úlohu pro všechny okresy (každý zvlášť).\n\n### Struktura řešení\n\nZkuste sami :)\n\n------------------------------------------------------------------------\n\n# Shrnutí\n\n## Co jsme se naučili\n\n**Terénní analýzy:**\n\n- `Slope()` - výpočet svažitosti\n- `Aspect()` - výpočet orientace svahu\n- `Contour()` - tvorba vrstevnic\n\n**Lokální mapová algebra:**\n\n- Relační operátory: `>`, `<`, `==`, `>=`, `<=`\n- Logické operátory: `&` (AND), `|` (OR), `~` (NOT)\n- Funkce: `GreaterThan()`, `LessThan()`, `InList()`\n\n**Fokální mapová algebra:**\n\n- `FocalStatistics()` - operace v okolí buňky\n- `NbrRectangle()`, `NbrCircle()` - definice okolí\n\n**Zonální mapová algebra:**\n\n- `ZonalStatisticsAsTable()` - statistiky pro zóny\n- `TabulateArea()` - rozloha kategorií v zónách\n\n**Reklasifikace:**\n\n- `Reclassify()` - změna hodnot rastru\n- `RemapRange()`, `RemapValue()` - tabulka překlasifikace\n\n**Další nástroje:**\n\n- `TopoToRaster()` - interpolace z vrstevnic\n- `Viewshed()` - analýza viditelnosti\n\n**Dávkové zpracování:**\n\n- Funkce pro automatizaci analýz\n- `ListRasters()` pro procházení rastrů\n- Try-except pro ošetření chyb\n- Export výsledků do CSV\n\n## Klíčové poznatky\n\n1. **Rastrové objekty v paměti** - výsledky rastrových nástrojů je třeba explicitně uložit pomocí `.save()`\n\n2. **Dva způsoby zápisu podmínek:**\n   - Funkce (`GreaterThan`) - explicitní\n   - Operátory (`>`) - stručné\n\n3. **Logické operátory:**\n   - Použijte `&` místo `and`\n   - Použijte `|` místo `or`\n   - Vždy dejte podmínky do závorek!\n\n4. **Multikriteriální analýza** - kombinování více podmínek pomocí `&`\n\n5. **Dávkové zpracování** - strukturujte kód do funkcí pro lepší přehlednost\n\n------------------------------------------------------------------------\n\n# Domácí úkol\n\n## Varianta A (základní)\n\n**Zadání:** Analýza lyžařských svahů.\n\nNajděte vhodná místa pro lyžařský svah:\n\n1. Svažitost 15-35 %\n2. Severní aspekt (315-45°, tj. <= 45 NEBO >= 315)\n3. Nadmořská výška > 800 m\n\n**Vstup:** `dtm_Liberec.tif`\n\n**Úkoly:**\n\n- Vypočítejte svažitost a aspekt\n- Vytvořte masku vhodných míst\n- Spočítejte celkovou rozlohu (v ha)\n\n**Odevzdejte:** Skript `lyzarske_svahy.py` + screenshot výsledného rastru\n\n## Varianta B (střední)\n\n**Zadání:** Analýza erozního ohrožení.\n\nPro každý katastr v Libereckém kraji:\n\n1. Vypočítejte svažitost\n2. Reklasifikujte svažitost do kategorií:\n   - 0-3 %: 1 (žádné ohrožení)\n   - 3-7 %: 2 (mírné)\n   - 7-12 %: 3 (střední)\n   - 12-25 %: 4 (vysoké)\n   - > 25 %: 5 (extrémní)\n3. Pro každý katastr spočítejte rozlohu v každé kategorii\n4. Vytvořte CSV s výsledky\n\n**Vstup:** složka `dtm_katastry/`\n\n**Odevzdejte:** Python Notebook `erozni_ohrozeni.ipynb` + CSV s výsledky\n\n## Varianta C (pokročilá)\n\n**Zadání:** Komplexní analýza vhodnosti území.\n\nVytvořte model vhodnosti území pro fotovoltaické elektrárny:\n\n**Kritéria (každé s vahou):**\n\n1. Svažitost < 5 % (váha 0.3)\n2. Jižní orientace 135-225° (váha 0.3)\n3. Nadmořská výška < 500 m (váha 0.2)\n4. Vzdálenost od silnic < 500 m (váha 0.2)\n\n**Postup:**\n\n1. Pro každé kritérium vytvořte rastr 0-1 (nesplňuje-splňuje)\n2. Vynásobte každý rastr jeho váhou\n3. Sečtěte vážené rastry → výsledek 0-1 (nevhodné-ideální)\n4. Reklasifikujte výsledek do kategorií vhodnosti\n\n**Bonusově:**\n\n- Proveďte analýzu pro všechny okresy\n- Vytvořte HTML report s mapami a grafy\n- Vyexportujte vhodné plochy jako polygony\n\n**Odevzdejte:** Notebook `fotovoltaika_analyza.ipynb` + všechny výstupy\n\n------------------------------------------------------------------------\n\n# Poznámky pro vyučujícího\n\n## Časový plán (90 min)\n\n| Čas       | Obsah                                          |\n|-----------|------------------------------------------------|\n| 0-5 min   | Úvod, nastavení prostředí                      |\n| 5-20 min  | Úlohy 1-2 (terénní analýzy)                    |\n| 20-40 min | Úlohy 3-5 (lokální algebra) - společně        |\n| 40-50 min | Úlohy 6-7 (fokální algebra)                    |\n| 50-65 min | Úlohy 8-11 (zonální algebra + reklasifikace)   |\n| 65-80 min | Úloha 12 v Notebooku - struktura řešení       |\n| 80-85 min | Úlohy 13-14 - diskuse přístupu                 |\n| 85-90 min | Shrnutí, domácí úkol                           |\n\n## Klíčové momenty\n\n### Úlohy 1-2 (5-20 min):\n\n- **ZAČÍT:** Import a aktivace Spatial Analyst (všichni společně)\n- **ZDŮRAZNIT:** Rastrové objekty v paměti vs. uložené na disk\n- **UKÁZAT:** `.save()` metodu\n- **VIZUÁLNÍ KONTROLA:** Otevřít výsledky v ArcGIS Pro\n\n### Úlohy 3-5 (20-40 min):\n\n- **UKÁZAT:** Nejdřív `GreaterThan()`, pak operátory\n- **ZDŮRAZNIT:** `&` místo `and`\n- **DŮLEŽITÉ:** Závorky u logických operátorů\n- **PRAKTICKÉ:** Interpretace výsledků (vinice, sluneční panely)\n\n### Úlohy 6-7 (40-50 min):\n\n- **MOTIVACE:** Proč vyhlazovat? Ukázat na vrstevnicích\n- **VIZUÁLNÍ:** Srovnání původních vs. vyhlazených vrstevnic\n- **TIP:** Vyhlazení není vždy vhodné (ztráta detailů)\n\n### Úlohy 8-11 (50-65 min):\n\n- **UKÁZAT:** Rozdíl mezi ZonalStatisticsAsTable a TabulateArea\n- **DŮLEŽITÉ:** InList() pro vytvoření masky\n- **PRAKTICKÉ:** Relativní zastoupení = průměr z masky 0/1\n- **DEMO:** Reklasifikace s RemapRange\n\n### Úloha 12 (65-80 min):\n\n- **PŘEPNOUT:** Z Python Window do Python Notebooku\n- **UKÁZAT:** Strukturu funkce pro jeden rastr\n- **ZDŮRAZNIT:** Try-except pro robustnost\n- **NECHAT:** Studenty adaptovat funkci\n\n### Úlohy 13-14 (80-85 min):\n\n- **DISKUTOVAT:** Postup řešení (TopoToRaster → Slope/Aspect → Viewshed)\n- **UKÁZAT:** Strukturu batch processingu\n- **POZNÁMKA:** Tyto úlohy jsou pro domácí práci\n\n## Rizika\n\n1. **Spatial Analyst není aktivován**\n   - Řešení: Zkontrolovat na začátku, pomoci s licencí\n\n2. **Studenti zapomínají .save()**\n   - Řešení: Opakovaně připomínat, zdůraznit rozdíl vs. vektorové nástroje\n\n3. **Chyba: použití 'and' místo '&'**\n   - Řešení: Ukázat chybovou hlášku, vysvětlit rozdíl\n\n4. **Nedostatek času na všechny úlohy**\n   - Řešení: Úlohy 13-14 pouze probrat, zbytek jako domácí úkol\n\n5. **Komplexní úlohy (12-14) jsou náročné**\n   - Řešení: Poskytnout kostru kódu, nechat studenty doplnit\n\n## Tipy\n\n- **Vizuální kontrola:** Po každé úloze zkontrolovat výsledek v mapě\n- **Data:** Mít připravená data předem, otestovat všechny skripty\n- **Notebook:** Mít připravený vzorový notebook pro úlohu 12\n- **TopoToRaster:** Může trvat dlouho, mít připravené výsledky\n- **Viewshed:** Může být pomalý, zvážit menší testovací oblast\n- **Motivace:** Zdůrazňovat praktické aplikace (vinice, lyžařské svahy, erozní ohrožení)\n\n## Běžné chyby studentů\n\n```python\n# 1. Zapomínají .save()\nslope = Slope(\"dtm\")  # Není uloženo!\n# Správně:\nslope = Slope(\"dtm\")\nslope.save(\"svazitost\")\n\n# 2. Používají 'and' místo '&'\nresult = (slope > 5) and (aspect < 180)  # CHYBA!\n# Správně:\nresult = (slope > 5) & (aspect < 180)\n\n# 3. Zapomínají závorky\nresult = slope > 5 & aspect < 180  # CHYBA! - špatná priorita\n# Správně:\nresult = (slope > 5) & (aspect < 180)\n\n# 4. Zapomínají Raster() u operátorů\nresult = \"slope\" > 5  # CHYBA!\n# Správně:\nresult = Raster(\"slope\") > 5\n```\n\n## Materiály k přípravě\n\n- [ ] DTM pro Liberecký kraj\n- [ ] Vrstva katastrů\n- [ ] CLC 2018 rastr\n- [ ] Složka s DTM pro katastry\n- [ ] Data s vrstevnicemi pro úlohu 13\n- [ ] Vzorový Python Notebook pro úlohu 12\n- [ ] Řešení všech domácích úkolů (A, B, C)\n- [ ] Otestovat TopoToRaster (může trvat dlouho)\n- [ ] Otestovat Viewshed (může být pomalý)\n\n",
    "supporting": [
      "lesson_13_files"
    ],
    "filters": [],
    "includes": {}
  }
}