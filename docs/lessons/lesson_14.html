<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.24">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Vojtěch Barták, FŽP ČZU Praha">
<meta name="dcterms.date" content="2025-11-24">

<title>Lekce 14: Atributové operace – Programování pro GIS a DPZ</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-5c0334f9598869e85f618d5d37196c81.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-e31584831b205ffbb2d98406f31c2a5b.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../index.html" class="navbar-brand navbar-brand-logo">
    </a>
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Programování pro GIS a DPZ</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-st-1-model-builder" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Ćást 1: Model Builder</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-st-1-model-builder">    
        <li>
    <a class="dropdown-item" href="../lessons/lesson_01.html">
 <span class="dropdown-text">Lekce 1: Jednoduchý model</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-st-2-úvod-do-pythonu" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Část 2: Úvod do Pythonu</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-st-2-úvod-do-pythonu">    
        <li>
    <a class="dropdown-item" href="../lessons/lesson_03.html">
 <span class="dropdown-text">Lekce 3: První program v Pythonu</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../lessons/lesson_04.html">
 <span class="dropdown-text">Lekce 4: Cykly a podmínky</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../lessons/lesson_05.html">
 <span class="dropdown-text">Lekce 5: Tvorba jednoduchého algoritmu</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../lessons/lesson_06.html">
 <span class="dropdown-text">Lekce 6: Funkce a moduly</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../lessons/lesson_07.html">
 <span class="dropdown-text">Lekce 7: Textové soubory I</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../lessons/lesson_08.html">
 <span class="dropdown-text">Lekce 8: Textové soubory II</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-st-3-základy-arcpy" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Část 3: Základy ArcPy</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-st-3-základy-arcpy">    
        <li>
    <a class="dropdown-item" href="../lessons/lesson_10.html">
 <span class="dropdown-text">Lekce 10: Úvod do modulu ArcPy</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../lessons/lesson_11.html">
 <span class="dropdown-text">Lekce 11: Správa dat a workspace</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../lessons/lesson_12.html">
 <span class="dropdown-text">Lekce 12: Geoprocessingové nástroje I</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../lessons/lesson_13.html">
 <span class="dropdown-text">Lekce 13: Geoprocessingové nástroje II</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../lessons/lesson_14.html">
 <span class="dropdown-text">Lekce 14: Atributové operace</span></a>
  </li>  
    </ul>
  </li>
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#data-a-nastavení" id="toc-data-a-nastavení" class="nav-link active" data-scroll-target="#data-a-nastavení"><span class="header-section-number">1</span> Data a nastavení</a></li>
  <li><a href="#úvod" id="toc-úvod" class="nav-link" data-scroll-target="#úvod"><span class="header-section-number">2</span> Úvod</a></li>
  <li><a href="#práce-s-vrstvami" id="toc-práce-s-vrstvami" class="nav-link" data-scroll-target="#práce-s-vrstvami"><span class="header-section-number">3</span> Práce s vrstvami</a>
  <ul class="collapse">
  <li><a href="#úloha-1-vytvoření-vrstvy" id="toc-úloha-1-vytvoření-vrstvy" class="nav-link" data-scroll-target="#úloha-1-vytvoření-vrstvy"><span class="header-section-number">3.1</span> Úloha 1: Vytvoření vrstvy</a></li>
  <li><a href="#úloha-2-atributový-výběr" id="toc-úloha-2-atributový-výběr" class="nav-link" data-scroll-target="#úloha-2-atributový-výběr"><span class="header-section-number">3.2</span> Úloha 2: Atributový výběr</a></li>
  <li><a href="#úloha-3-kombinace-podmínek" id="toc-úloha-3-kombinace-podmínek" class="nav-link" data-scroll-target="#úloha-3-kombinace-podmínek"><span class="header-section-number">3.3</span> Úloha 3: Kombinace podmínek</a></li>
  <li><a href="#úloha-4-tabulkový-pohled" id="toc-úloha-4-tabulkový-pohled" class="nav-link" data-scroll-target="#úloha-4-tabulkový-pohled"><span class="header-section-number">3.4</span> Úloha 4: Tabulkový pohled</a></li>
  </ul></li>
  <li><a href="#práce-s-poli" id="toc-práce-s-poli" class="nav-link" data-scroll-target="#práce-s-poli"><span class="header-section-number">4</span> Práce s poli</a>
  <ul class="collapse">
  <li><a href="#úloha-5-přidání-pole" id="toc-úloha-5-přidání-pole" class="nav-link" data-scroll-target="#úloha-5-přidání-pole"><span class="header-section-number">4.1</span> Úloha 5: Přidání pole</a></li>
  <li><a href="#úloha-6-výpočet-konstantní-hodnoty" id="toc-úloha-6-výpočet-konstantní-hodnoty" class="nav-link" data-scroll-target="#úloha-6-výpočet-konstantní-hodnoty"><span class="header-section-number">4.2</span> Úloha 6: Výpočet konstantní hodnoty</a></li>
  <li><a href="#úloha-7-výpočet-z-jiného-pole" id="toc-úloha-7-výpočet-z-jiného-pole" class="nav-link" data-scroll-target="#úloha-7-výpočet-z-jiného-pole"><span class="header-section-number">4.3</span> Úloha 7: Výpočet z jiného pole</a></li>
  <li><a href="#úloha-8-výpočet-plochy" id="toc-úloha-8-výpočet-plochy" class="nav-link" data-scroll-target="#úloha-8-výpočet-plochy"><span class="header-section-number">4.4</span> Úloha 8: Výpočet plochy</a></li>
  <li><a href="#úloha-9-výpočet-obvodu" id="toc-úloha-9-výpočet-obvodu" class="nav-link" data-scroll-target="#úloha-9-výpočet-obvodu"><span class="header-section-number">4.5</span> Úloha 9: Výpočet obvodu</a></li>
  <li><a href="#úloha-10-výpočet-délky-linií" id="toc-úloha-10-výpočet-délky-linií" class="nav-link" data-scroll-target="#úloha-10-výpočet-délky-linií"><span class="header-section-number">4.6</span> Úloha 10: Výpočet délky linií</a></li>
  <li><a href="#úloha-11-perimeter-area-ratio" id="toc-úloha-11-perimeter-area-ratio" class="nav-link" data-scroll-target="#úloha-11-perimeter-area-ratio"><span class="header-section-number">4.7</span> Úloha 11: Perimeter-Area Ratio</a></li>
  </ul></li>
  <li><a href="#propojování-tabulek" id="toc-propojování-tabulek" class="nav-link" data-scroll-target="#propojování-tabulek"><span class="header-section-number">5</span> Propojování tabulek</a>
  <ul class="collapse">
  <li><a href="#dočasné-propojení" id="toc-dočasné-propojení" class="nav-link" data-scroll-target="#dočasné-propojení"><span class="header-section-number">5.1</span> Dočasné propojení</a></li>
  <li><a href="#úloha-12-dočasné-propojení" id="toc-úloha-12-dočasné-propojení" class="nav-link" data-scroll-target="#úloha-12-dočasné-propojení"><span class="header-section-number">5.2</span> Úloha 12: Dočasné propojení</a></li>
  <li><a href="#úloha-13-použití-připojených-dat" id="toc-úloha-13-použití-připojených-dat" class="nav-link" data-scroll-target="#úloha-13-použití-připojených-dat"><span class="header-section-number">5.3</span> Úloha 13: Použití připojených dat</a></li>
  <li><a href="#úloha-14-odstranění-propojení" id="toc-úloha-14-odstranění-propojení" class="nav-link" data-scroll-target="#úloha-14-odstranění-propojení"><span class="header-section-number">5.4</span> Úloha 14: Odstranění propojení</a></li>
  <li><a href="#trvalé-propojení" id="toc-trvalé-propojení" class="nav-link" data-scroll-target="#trvalé-propojení"><span class="header-section-number">5.5</span> Trvalé propojení</a></li>
  <li><a href="#úloha-15-trvalé-připojení-jednoho-pole" id="toc-úloha-15-trvalé-připojení-jednoho-pole" class="nav-link" data-scroll-target="#úloha-15-trvalé-připojení-jednoho-pole"><span class="header-section-number">5.6</span> Úloha 15: Trvalé připojení jednoho pole</a></li>
  <li><a href="#úloha-16-trvalé-připojení-více-polí" id="toc-úloha-16-trvalé-připojení-více-polí" class="nav-link" data-scroll-target="#úloha-16-trvalé-připojení-více-polí"><span class="header-section-number">5.7</span> Úloha 16: Trvalé připojení více polí</a></li>
  </ul></li>
  <li><a href="#sumarizace-tabulky" id="toc-sumarizace-tabulky" class="nav-link" data-scroll-target="#sumarizace-tabulky"><span class="header-section-number">6</span> Sumarizace tabulky</a>
  <ul class="collapse">
  <li><a href="#úloha-17-základní-sumarizace" id="toc-úloha-17-základní-sumarizace" class="nav-link" data-scroll-target="#úloha-17-základní-sumarizace"><span class="header-section-number">6.1</span> Úloha 17: Základní sumarizace</a></li>
  <li><a href="#úloha-18-sumarizace-po-skupinách" id="toc-úloha-18-sumarizace-po-skupinách" class="nav-link" data-scroll-target="#úloha-18-sumarizace-po-skupinách"><span class="header-section-number">6.2</span> Úloha 18: Sumarizace po skupinách</a></li>
  <li><a href="#úloha-19-kombinace-funkcí" id="toc-úloha-19-kombinace-funkcí" class="nav-link" data-scroll-target="#úloha-19-kombinace-funkcí"><span class="header-section-number">6.3</span> Úloha 19: Kombinace funkcí</a></li>
  <li><a href="#úloha-20-připojení-statistik-zpět-k-původní-tabulce" id="toc-úloha-20-připojení-statistik-zpět-k-původní-tabulce" class="nav-link" data-scroll-target="#úloha-20-připojení-statistik-zpět-k-původní-tabulce"><span class="header-section-number">6.4</span> Úloha 20: Připojení statistik zpět k původní tabulce</a></li>
  </ul></li>
  <li><a href="#komplexní-úlohy---python-notebook" id="toc-komplexní-úlohy---python-notebook" class="nav-link" data-scroll-target="#komplexní-úlohy---python-notebook"><span class="header-section-number">7</span> Komplexní úlohy - Python Notebook</a>
  <ul class="collapse">
  <li><a href="#úloha-21-analýza-hustoty-zalidnění" id="toc-úloha-21-analýza-hustoty-zalidnění" class="nav-link" data-scroll-target="#úloha-21-analýza-hustoty-zalidnění"><span class="header-section-number">7.1</span> Úloha 21: Analýza hustoty zalidnění</a></li>
  <li><a href="#úloha-22-dávkové-zpracování---kategorizace-obcí" id="toc-úloha-22-dávkové-zpracování---kategorizace-obcí" class="nav-link" data-scroll-target="#úloha-22-dávkové-zpracování---kategorizace-obcí"><span class="header-section-number">7.2</span> Úloha 22: Dávkové zpracování - kategorizace obcí</a></li>
  </ul></li>
  <li><a href="#shrnutí" id="toc-shrnutí" class="nav-link" data-scroll-target="#shrnutí"><span class="header-section-number">8</span> Shrnutí</a>
  <ul class="collapse">
  <li><a href="#co-jsme-se-naučili" id="toc-co-jsme-se-naučili" class="nav-link" data-scroll-target="#co-jsme-se-naučili"><span class="header-section-number">8.1</span> Co jsme se naučili</a></li>
  <li><a href="#klíčové-koncepty" id="toc-klíčové-koncepty" class="nav-link" data-scroll-target="#klíčové-koncepty"><span class="header-section-number">8.2</span> Klíčové koncepty</a></li>
  </ul></li>
  <li><a href="#domácí-úkol" id="toc-domácí-úkol" class="nav-link" data-scroll-target="#domácí-úkol"><span class="header-section-number">9</span> Domácí úkol</a>
  <ul class="collapse">
  <li><a href="#varianta-a-základní" id="toc-varianta-a-základní" class="nav-link" data-scroll-target="#varianta-a-základní"><span class="header-section-number">9.1</span> Varianta A (základní)</a></li>
  <li><a href="#varianta-b-střední" id="toc-varianta-b-střední" class="nav-link" data-scroll-target="#varianta-b-střední"><span class="header-section-number">9.2</span> Varianta B (střední)</a></li>
  <li><a href="#varianta-c-pokročilá" id="toc-varianta-c-pokročilá" class="nav-link" data-scroll-target="#varianta-c-pokročilá"><span class="header-section-number">9.3</span> Varianta C (pokročilá)</a></li>
  </ul></li>
  <li><a href="#poznámky-pro-vyučujícího" id="toc-poznámky-pro-vyučujícího" class="nav-link" data-scroll-target="#poznámky-pro-vyučujícího"><span class="header-section-number">10</span> Poznámky pro vyučujícího</a>
  <ul class="collapse">
  <li><a href="#časový-plán-90-min" id="toc-časový-plán-90-min" class="nav-link" data-scroll-target="#časový-plán-90-min"><span class="header-section-number">10.1</span> Časový plán (90 min)</a></li>
  <li><a href="#klíčové-momenty" id="toc-klíčové-momenty" class="nav-link" data-scroll-target="#klíčové-momenty"><span class="header-section-number">10.2</span> Klíčové momenty</a>
  <ul class="collapse">
  <li><a href="#úlohy-1-4-5-20-min" id="toc-úlohy-1-4-5-20-min" class="nav-link" data-scroll-target="#úlohy-1-4-5-20-min"><span class="header-section-number">10.2.1</span> Úlohy 1-4 (5-20 min):</a></li>
  <li><a href="#úlohy-5-11-20-40-min" id="toc-úlohy-5-11-20-40-min" class="nav-link" data-scroll-target="#úlohy-5-11-20-40-min"><span class="header-section-number">10.2.2</span> Úlohy 5-11 (20-40 min):</a></li>
  <li><a href="#úlohy-12-16-40-60-min" id="toc-úlohy-12-16-40-60-min" class="nav-link" data-scroll-target="#úlohy-12-16-40-60-min"><span class="header-section-number">10.2.3</span> Úlohy 12-16 (40-60 min):</a></li>
  <li><a href="#úlohy-17-20-60-75-min" id="toc-úlohy-17-20-60-75-min" class="nav-link" data-scroll-target="#úlohy-17-20-60-75-min"><span class="header-section-number">10.2.4</span> Úlohy 17-20 (60-75 min):</a></li>
  <li><a href="#úloha-21-75-85-min" id="toc-úloha-21-75-85-min" class="nav-link" data-scroll-target="#úloha-21-75-85-min"><span class="header-section-number">10.2.5</span> Úloha 21 (75-85 min):</a></li>
  </ul></li>
  <li><a href="#rizika" id="toc-rizika" class="nav-link" data-scroll-target="#rizika"><span class="header-section-number">10.3</span> Rizika</a></li>
  <li><a href="#tipy" id="toc-tipy" class="nav-link" data-scroll-target="#tipy"><span class="header-section-number">10.4</span> Tipy</a></li>
  <li><a href="#běžné-chyby-studentů" id="toc-běžné-chyby-studentů" class="nav-link" data-scroll-target="#běžné-chyby-studentů"><span class="header-section-number">10.5</span> Běžné chyby studentů</a></li>
  <li><a href="#materiály-k-přípravě" id="toc-materiály-k-přípravě" class="nav-link" data-scroll-target="#materiály-k-přípravě"><span class="header-section-number">10.6</span> Materiály k přípravě</a></li>
  </ul></li>
  <li><a href="#cheatsheet---atributové-operace" id="toc-cheatsheet---atributové-operace" class="nav-link" data-scroll-target="#cheatsheet---atributové-operace"><span class="header-section-number">11</span> Cheatsheet - Atributové operace</a>
  <ul class="collapse">
  <li><a href="#vrstvy" id="toc-vrstvy" class="nav-link" data-scroll-target="#vrstvy"><span class="header-section-number">11.1</span> Vrstvy</a></li>
  <li><a href="#výběry" id="toc-výběry" class="nav-link" data-scroll-target="#výběry"><span class="header-section-number">11.2</span> Výběry</a></li>
  <li><a href="#pole" id="toc-pole" class="nav-link" data-scroll-target="#pole"><span class="header-section-number">11.3</span> Pole</a></li>
  <li><a href="#propojení" id="toc-propojení" class="nav-link" data-scroll-target="#propojení"><span class="header-section-number">11.4</span> Propojení</a></li>
  <li><a href="#sumarizace" id="toc-sumarizace" class="nav-link" data-scroll-target="#sumarizace"><span class="header-section-number">11.5</span> Sumarizace</a></li>
  <li><a href="#sql-syntaxe" id="toc-sql-syntaxe" class="nav-link" data-scroll-target="#sql-syntaxe"><span class="header-section-number">11.6</span> SQL syntaxe</a></li>
  </ul></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="lesson_14.pdf"><i class="bi bi-file-pdf"></i>PDF</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Lekce 14: Atributové operace</h1>
<p class="subtitle lead">Python pro GIS - Práce s tabulkami a poli</p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Vojtěch Barták, FŽP ČZU Praha </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">November 24, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="data-a-nastavení" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Data a nastavení</h1>
<p><strong>Data ke stažení:</strong></p>
<p><strong>Z Lekce 13 (rastrové analýzy):</strong> - <code>katastry_Liberec.shp</code> - katastry v Libereckém kraji - <code>okresy.shp</code> - okresy</p>
<p><strong>Data pro atributové operace (<code>data_odtoky/</code>):</strong> - <code>UrbanAtlas_LK.shp</code> - krajinný pokryv Urban Atlas pro Liberecký kraj - <code>obce_LK.shp</code> - obce v Libereckém kraji - <code>coef.dbf</code> - tabulka součinitelů odtoku pro typy povrchu</p>
<p><strong>Z ArcČR500:</strong> - <code>Sidla.shp</code> - sídla v ČR - <code>Silnice.shp</code> - silniční síť - <code>VUSC.shp</code> - kraje - <code>Okresy_VUSC.shp</code> - okresy s kódem kraje - <code>Sidla_pocty.dbf</code> - tabulka s počty obyvatel sídel</p>
<p><strong>Nastavení prostředí:</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> arcpy</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Workspace</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>arcpy.env.workspace <span class="op">=</span> <span class="vs">r"C:</span><span class="er">\</span><span class="vs">TEMP</span><span class="er">\</span><span class="vs">Python_GIS</span><span class="er">\</span><span class="vs">Lekce_14"</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>arcpy.env.overwriteOutput <span class="op">=</span> <span class="va">True</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Pracovní prostředí
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>Úlohy 1-20</strong> řešte v <strong>IDLE</strong> nebo v <strong>Python Window</strong> v ArcGIS Pro.</p>
<p><strong>Úlohy 21-22</strong> (komplexní analýzy) řešte v <strong>Python Notebooku</strong>.</p>
</div>
</div>
<hr>
</section>
<section id="úvod" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Úvod</h1>
<p>V této lekci probereme operace, které jste většinou zvyklí v grafickém prostředí ArcGIS provádět “ručně”, často kliknutím pravým tlačítkem myši na pole atributové tabulky či vrstvu a výběrem nástroje z kontextového menu. Tyto operace zahrnují například:</p>
<ul>
<li>Přidání nového pole do atributové tabulky</li>
<li>Smazání existujícího pole atributové tabulky</li>
<li>Výpočet hodnot pole pomocí <em>Field Calculator</em>, případně <em>Calculate Geometry</em></li>
<li>Sumarizaci hodnot pole/polí atributové tabulky</li>
<li>Propojení tabulek pomocí <em>Join</em></li>
<li>Atributový výběr prvků pomocí SQL dotazu</li>
</ul>
<p>Ke všem těmto “ručním” operacím existují odpovídající geoprocessingové nástroje z ArcToolboxu, které umožňují jejich provádění v rámci modelů z Model Builderu či v rámci skriptů v Pythonu. Většina z nich je umístěná v nástrojovém balíčku <em>Data Management Tools</em>.</p>
<hr>
</section>
<section id="práce-s-vrstvami" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Práce s vrstvami</h1>
<p>Než se pustíme do práce s poli a tabulkami, je důležité pochopit rozdíl mezi <strong>datovou sadou</strong> (data uložená na disku) a <strong>vrstvou</strong> (pohled na data v paměti).</p>
<p><strong>Datová sada</strong> (feature class, shapefile) je fyzický soubor s daty uloženými na disku. Když s ní pracujeme v Pythonu, přímo měníme data na disku.</p>
<p><strong>Vrstva</strong> (layer) je dočasný pohled na datovou sadu, který existuje pouze v operační paměti. Vrstva může mít definovaný výběr prvků, symbologii, propojení s jinými tabulkami atd. Když zavřeme ArcGIS Pro (nebo smažeme vrstvu), vrstva zmizí, ale původní data zůstávají nedotčená.</p>
<section id="úloha-1-vytvoření-vrstvy" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="úloha-1-vytvoření-vrstvy"><span class="header-section-number">3.1</span> Úloha 1: Vytvoření vrstvy</h2>
<p><strong>Zadání:</strong> Vytvořte vrstvu z <code>katastry_Liberec.shp</code> s názvem “katastry_layer”.</p>
<p>Vrstva se vytváří nástrojem <strong>Make Feature Layer</strong> z balíčku <em>Data Management Tools</em>. Prvním parametrem je cesta k datové sadě, z níž chceme vrstvu vytvořit, druhým parametrem je název vrstvy. Výsledek volání nástroje (objekt třídy <em>Result</em>) můžeme uložit do proměnné, která bude následně vrstvu zastupovat v dalších nástrojích.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Vytvoření vrstvy</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>katastry_lyr <span class="op">=</span> arcpy.management.MakeFeatureLayer(</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"katastry_Liberec.shp"</span>, </span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"katastry_layer"</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Vrstva vytvořena"</span>)</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Výpis názvů polí vrstvy</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">Pole v tabulce:"</span>)</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> field <span class="kw">in</span> arcpy.ListFields(katastry_lyr):</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"  </span><span class="sc">{</span>field<span class="sc">.</span>name<span class="sc">}</span><span class="ss">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Important</span>Zamykání dat
</div>
</div>
<div class="callout-body-container callout-body">
<p>Když z datové sady vytvoříte vrstvu pomocí <code>MakeFeatureLayer</code>, tato datová sada se “zamkne” - vytvoří se k ní soubor zámku, zamezující jakémukoli programu provádět v datové sadě změny.</p>
<p>Pokud budete chtít v datové sadě přidávat či mazat pole, nebude to možné, pokud je z ní vytvořena vrstva. Po smazání vrstvy nástrojem <code>Delete</code> se soubor zámku smaže a datová sada se odemkne pro úpravy.</p>
</div>
</div>
</section>
<section id="úloha-2-atributový-výběr" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="úloha-2-atributový-výběr"><span class="header-section-number">3.2</span> Úloha 2: Atributový výběr</h2>
<p><strong>Zadání:</strong> Z vrstvy katastrů vyberte pouze ty, které mají v názvu slovo “Liberec”.</p>
<p>Atributový výběr se provádí nástrojem <strong>Select Layer By Attribute</strong>. Tento nástroj používá SQL syntaxi pro definici podmínek výběru.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Výběr katastrů s "Liberec" v názvu</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>arcpy.management.SelectLayerByAttribute(</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>    katastry_lyr,</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"NEW_SELECTION"</span>,</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"NAZEV LIKE '</span><span class="sc">%Li</span><span class="st">berec%'"</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Zjištění počtu vybraných prvků</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>result <span class="op">=</span> arcpy.management.GetCount(katastry_lyr)</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>count <span class="op">=</span> <span class="bu">int</span>(result.getOutput(<span class="dv">0</span>))</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Vybráno katastrů: </span><span class="sc">{</span>count<span class="sc">}</span><span class="ss">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>Parametry:</strong></p>
<ul>
<li>První parametr: vrstva</li>
<li>Druhý parametr: typ výběru
<ul>
<li><code>"NEW_SELECTION"</code> - nový výběr (smaže předchozí)</li>
<li><code>"ADD_TO_SELECTION"</code> - přidá k výběru</li>
<li><code>"REMOVE_FROM_SELECTION"</code> - odebere z výběru</li>
<li><code>"CLEAR_SELECTION"</code> - smaže výběr</li>
</ul></li>
<li>Třetí parametr: SQL podmínka (where clause)</li>
</ul>
<p><strong>SQL operátory:</strong></p>
<ul>
<li><code>LIKE</code> - hledání vzoru (% = libovolné znaky)</li>
<li><code>=</code>, <code>&lt;&gt;</code>, <code>&gt;</code>, <code>&lt;</code>, <code>&gt;=</code>, <code>&lt;=</code> - porovnání</li>
<li><code>AND</code>, <code>OR</code>, <code>NOT</code> - logické operátory</li>
<li><code>IN (hodnota1, hodnota2, ...)</code> - jeden z hodnot</li>
</ul>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Vytvoření vrstvy s výběrem lze provést v jediném kroku. Nástroj <code>MakeFeatureLayer</code> má totiž nepovinný parametr, ve kterém je možné přímo zadat SQL dotaz. Vrstva se pak vytvoří rovnou s výběrem.</p>
<p>K čemu je tedy vytváření vrstvy v samostatném kroku? Umožňuje např. vytvořit nejprve vrstvu pomocí <code>MakeFeatureLayer</code> a následně v ní v cyklu dynamicky měnit výběr pomocí <code>SelectLayerByAttribute</code> a provádět nějakou analýzu jen s příslušným výběrem.</p>
</div>
</div>
</section>
<section id="úloha-3-kombinace-podmínek" class="level2" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="úloha-3-kombinace-podmínek"><span class="header-section-number">3.3</span> Úloha 3: Kombinace podmínek</h2>
<p><strong>Zadání:</strong> Z vrstvy obcí vyberte obce s počtem obyvatel větším než 5000 <strong>A ZÁROVEŇ</strong> s rozlohou menší než 20 km².</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Nejprve vytvoříme vrstvu z obcí</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>obce_lyr <span class="op">=</span> arcpy.management.MakeFeatureLayer(<span class="st">"obce_LK.shp"</span>, <span class="st">"obce_layer"</span>)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Přidáme pole pro plochu (bude potřeba pro podmínku)</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>arcpy.management.AddField(obce_lyr, <span class="st">"AREA_KM"</span>, <span class="st">"DOUBLE"</span>)</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>arcpy.management.CalculateField(</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>    obce_lyr, </span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">"AREA_KM"</span>, </span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">'!shape.area!/1000000'</span>, </span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">"PYTHON3"</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Výběr s kombinací podmínek</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>arcpy.management.SelectLayerByAttribute(</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>    obce_lyr,</span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>    <span class="st">"NEW_SELECTION"</span>,</span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>    <span class="st">"OBYVATEL &gt; 5000 AND AREA_KM &lt; 20"</span></span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Uložení výběru do nového shapefile</span></span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>arcpy.management.CopyFeatures(obce_lyr, <span class="st">"obce_velke_kompaktni.shp"</span>)</span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Výběr uložen"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="úloha-4-tabulkový-pohled" class="level2" data-number="3.4">
<h2 data-number="3.4" class="anchored" data-anchor-id="úloha-4-tabulkový-pohled"><span class="header-section-number">3.4</span> Úloha 4: Tabulkový pohled</h2>
<p><strong>Zadání:</strong> Vytvořte tabulkový pohled na <code>Sidla_pocty.dbf</code> obsahující pouze sídla s počtem obyvatel větším než 10000.</p>
<p>Pro samostatné tabulky (ne prostorové vrstvy) se místo <code>MakeFeatureLayer</code> používá <strong>Make Table View</strong>:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Vytvoření tabulkového pohledu s filtrem</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>sidla_view <span class="op">=</span> arcpy.management.MakeTableView(</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Sidla_pocty.dbf"</span>,</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"sidla_view"</span>,</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"POCET_OB &gt; 10000"</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Zjištění počtu záznamů</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>result <span class="op">=</span> arcpy.management.GetCount(sidla_view)</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Velkých sídel: </span><span class="sc">{</span>result<span class="sc">.</span>getOutput(<span class="dv">0</span>)<span class="sc">}</span><span class="ss">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<hr>
</section>
</section>
<section id="práce-s-poli" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Práce s poli</h1>
<p>Nástroje pro práci s poli atributových tabulek, jako je přidání pole, smazání pole, či výpočet hodnot pole, nalezneme v nástrojové sadě <em>Data Management Tools → Fields</em>.</p>
<section id="úloha-5-přidání-pole" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="úloha-5-přidání-pole"><span class="header-section-number">4.1</span> Úloha 5: Přidání pole</h2>
<p><strong>Zadání:</strong> Do <code>obce_LK.shp</code> přidejte nové pole “AREA_KM” typu DOUBLE.</p>
<p><strong>Přidání pole</strong> se provádí nástrojem <strong>Add Field</strong>. Jeho použití si předvedeme na příkladu přidání číselného pole do tabulky vrstvy obcí.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>obce <span class="op">=</span> <span class="st">"obce_LK.shp"</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Přidání číselného pole</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>arcpy.management.AddField(obce, <span class="st">"AREA_KM"</span>, <span class="st">"DOUBLE"</span>)</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Pole AREA_KM přidáno"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>Parametry:</strong></p>
<ul>
<li>První parametr: název vstupní tabulky (může být vektorová třída prvků nebo samostatná tabulka)</li>
<li>Druhý parametr: název přidávaného pole</li>
<li>Třetí parametr: datový typ pole</li>
</ul>
<p><strong>Běžné datové typy:</strong></p>
<ul>
<li><code>"TEXT"</code> - textový řetězec</li>
<li><code>"DOUBLE"</code> - desetinné číslo</li>
<li><code>"LONG"</code> - celé číslo</li>
<li><code>"SHORT"</code> - krátké celé číslo</li>
<li><code>"DATE"</code> - datum</li>
</ul>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Warning</span>Pozor na existující pole!
</div>
</div>
<div class="callout-body-container callout-body">
<p>Při přidávání pole je třeba dávat pozor na to, zda pole s daným názvem již v tabulce není. Pokud ano, nástroj <em>Add Field</em> pole přidá a pouze na existenci původního pole se stejným názvem upozorní hláškou typu “Warning”. Tím se ovšem původní pole nenávratně smaže.</p>
</div>
</div>
<p>Existující pole (pokud není povinné, jako např. pole FID či Shape) lze smazat pomocí nástroje <strong>Delete Field</strong>:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Smazání pole</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>arcpy.management.DeleteField(obce, <span class="st">"AREA_KM"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="úloha-6-výpočet-konstantní-hodnoty" class="level2" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="úloha-6-výpočet-konstantní-hodnoty"><span class="header-section-number">4.2</span> Úloha 6: Výpočet konstantní hodnoty</h2>
<p><strong>Zadání:</strong> Vytvořte pole “KRAJ” a vyplňte ho konstantou “Liberecký”.</p>
<p>Výpočet hodnot pole tabulky se provádí nástrojem <strong>Calculate Field</strong> z nástrojové sady <em>Fields</em>. Prvním parametrem je cesta ke vstupní datové sadě, druhým název pole, které chceme vypočítat. Následuje výraz výpočtu.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>obce <span class="op">=</span> <span class="st">"obce_LK.shp"</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Přidání textového pole</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>arcpy.management.AddField(obce, <span class="st">"KRAJ"</span>, <span class="st">"TEXT"</span>)</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Vyplnění pole konstantou</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>arcpy.management.CalculateField(obce, <span class="st">"KRAJ"</span>, <span class="st">'"Liberecký"'</span>)</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Pole KRAJ vyplněno"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Všimněte si, že v případě textového atributu bylo třeba výraz “Liberecký” napsat pomocí obou typů uvozovek: <code>'"Liberecký"'</code>. To proto, že součástí výrazu musí v případě textu být i uvozovky, přičemž samotný výraz je nástroji předáván také jako text. Vnější, jednoduché uvozovky ohraničují celý text výrazu, kdežto vnitřní, dvojité uvozovky jsou již součástí výrazu samotného a sdělují, že obsah výrazu je text.</p>
<p><strong>Podobně pro číselné pole:</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Přidání číselného pole</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>arcpy.management.AddField(obce, <span class="st">"CONST"</span>, <span class="st">"LONG"</span>)</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Vyplnění konstantou</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>arcpy.management.CalculateField(obce, <span class="st">"CONST"</span>, <span class="dv">100</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="úloha-7-výpočet-z-jiného-pole" class="level2" data-number="4.3">
<h2 data-number="4.3" class="anchored" data-anchor-id="úloha-7-výpočet-z-jiného-pole"><span class="header-section-number">4.3</span> Úloha 7: Výpočet z jiného pole</h2>
<p><strong>Zadání:</strong> Vytvořte pole “NAZEV_UPPER” a zkopírujte do něj názvy obcí převedené na velká písmena.</p>
<p>Při vyplňování pole je možné použít hodnoty kteréhokoli jiného, již existujícího pole. Na toto pole se lze odkázat jeho názvem, uvedeným mezi vykřičníky. Je přitom možné hodnoty různých polí libovolně kombinovat, provádět s nimi výpočty apod. Ve výrazu je možné použít jakoukoli funkci či operaci, která je součástí základní výbavy Pythonu. Čtvrtým, volitelným parametrem nástroje <em>Calculate Field</em> specifikujeme, že používáme jazyk Python 3.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>obce <span class="op">=</span> <span class="st">"obce_LK.shp"</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Přidání nového pole</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>arcpy.management.AddField(obce, <span class="st">"NAZEV_UPPER"</span>, <span class="st">"TEXT"</span>)</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Vyplnění pole s použitím metody upper()</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>arcpy.management.CalculateField(</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>    obce, </span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">"NAZEV_UPPER"</span>, </span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">'!NAZEV!.upper()'</span>, </span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">"PYTHON3"</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Názvy převedeny na velká písmena"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Všimněte si použití vykřičníků pro odkaz na pole “NAZEV” v rámci výrazu, a na použití metody <code>.upper()</code> pro převod na velká písmena.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>Užitečné metody pro textové řetězce:</strong></p>
<ul>
<li><code>.upper()</code> - převod na velká písmena</li>
<li><code>.lower()</code> - převod na malá písmena</li>
<li><code>.replace(old, new)</code> - nahrazení textu</li>
<li><code>.strip()</code> - odstranění bílých znaků</li>
</ul>
</div>
</div>
</section>
<section id="úloha-8-výpočet-plochy" class="level2" data-number="4.4">
<h2 data-number="4.4" class="anchored" data-anchor-id="úloha-8-výpočet-plochy"><span class="header-section-number">4.4</span> Úloha 8: Výpočet plochy</h2>
<p><strong>Zadání:</strong> Vypočítejte plochu katastrů v km² do pole “AREA_KM”.</p>
<p>Velmi častou úlohou je výpočet geometrických vlastností prvků do atributu. “Ruční” řešení by spočívalo v použití nástroje <em>Calculate Geometry</em> dostupného v kontextovém menu příslušného pole. V Pythonu se operace provede pomocí nástroje <em>Calculate Field</em>, kde se v rámci výrazu odkážeme na speciální pole <code>!shape.area!</code>:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>katastry <span class="op">=</span> <span class="st">"katastry_Liberec.shp"</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Přidání pole pro plochu</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>arcpy.management.AddField(katastry, <span class="st">"AREA_KM"</span>, <span class="st">"DOUBLE"</span>)</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Výpočet plochy v km² (shape.area je v m²)</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>arcpy.management.CalculateField(</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>    katastry, </span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">"AREA_KM"</span>, </span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">'!shape.area!/1000000'</span>, </span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">"PYTHON3"</span></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Plochy vypočítány"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="úloha-9-výpočet-obvodu" class="level2" data-number="4.5">
<h2 data-number="4.5" class="anchored" data-anchor-id="úloha-9-výpočet-obvodu"><span class="header-section-number">4.5</span> Úloha 9: Výpočet obvodu</h2>
<p><strong>Zadání:</strong> Vypočítejte obvod polygonů Urban Atlas v km do pole “PERIMETER_KM”.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>urban_atlas <span class="op">=</span> <span class="st">"UrbanAtlas_LK.shp"</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Přidání pole</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>arcpy.management.AddField(urban_atlas, <span class="st">"PERIMETER_KM"</span>, <span class="st">"DOUBLE"</span>)</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Výpočet obvodu v km (shape.length je v m)</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>arcpy.management.CalculateField(</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>    urban_atlas,</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">"PERIMETER_KM"</span>,</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">'!shape.length!/1000'</span>,</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">"PYTHON3"</span></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Obvody vypočítány"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="úloha-10-výpočet-délky-linií" class="level2" data-number="4.6">
<h2 data-number="4.6" class="anchored" data-anchor-id="úloha-10-výpočet-délky-linií"><span class="header-section-number">4.6</span> Úloha 10: Výpočet délky linií</h2>
<p><strong>Zadání:</strong> Vypočítejte délku silnic v km do pole “LENGTH_KM”.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>silnice <span class="op">=</span> <span class="st">"Silnice.shp"</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Přidání pole</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>arcpy.management.AddField(silnice, <span class="st">"LENGTH_KM"</span>, <span class="st">"DOUBLE"</span>)</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Výpočet délky (shape.length u linií)</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>arcpy.management.CalculateField(</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>    silnice,</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">"LENGTH_KM"</span>,</span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">'!shape.length!/1000'</span>,</span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">"PYTHON3"</span></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Délky silnic vypočítány"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>Geometrické vlastnosti:</strong></p>
<ul>
<li><strong>Polygony:</strong>
<ul>
<li><code>!shape.area!</code> - plocha (v m²)</li>
<li><code>!shape.length!</code> - obvod (v m)</li>
</ul></li>
<li><strong>Linie:</strong>
<ul>
<li><code>!shape.length!</code> - délka (v m)</li>
</ul></li>
<li><strong>Body:</strong>
<ul>
<li><code>!shape.X!</code> - souřadnice X</li>
<li><code>!shape.Y!</code> - souřadnice Y</li>
</ul></li>
</ul>
</section>
<section id="úloha-11-perimeter-area-ratio" class="level2" data-number="4.7">
<h2 data-number="4.7" class="anchored" data-anchor-id="úloha-11-perimeter-area-ratio"><span class="header-section-number">4.7</span> Úloha 11: Perimeter-Area Ratio</h2>
<p><strong>Zadání:</strong> Do <code>UrbanAtlas_LK.shp</code> přidejte pole “PA_RATIO” a vypočtěte do něj poměr obvodu a plochy.</p>
<p>Perimeter-Area Ratio je krajinná metrika popisující míru složitosti tvaru krajinných plošek. Čím je hodnota vyšší, tím je tvar složitější (členitější okraj).</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>urban_atlas <span class="op">=</span> <span class="st">"UrbanAtlas_LK.shp"</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Přidání pole</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>arcpy.management.AddField(urban_atlas, <span class="st">"PA_RATIO"</span>, <span class="st">"DOUBLE"</span>)</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Výpočet PA_RATIO = obvod / plocha</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>arcpy.management.CalculateField(</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>    urban_atlas,</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">"PA_RATIO"</span>,</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">'!shape.length!/!shape.area!'</span>,</span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">"PYTHON3"</span></span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"PA_RATIO vypočítán"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<hr>
</section>
</section>
<section id="propojování-tabulek" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> Propojování tabulek</h1>
<p>Propojení tabulek pomocí metody <em>join</em> má za následek přidání pole (či polí) z připojované tabulky do cílové tabulky, a to na základě nějakého společného atributu (tzv. <em>klíče</em>). Tento typ propojení je možný v případě, kdy jednomu řádku cílové tabulky odpovídá max. jeden řádek připojované tabulky. Zároveň platí, že jednomu řádku připojované tabulky může odpovídat jeden či více řádků cílové tabulky.</p>
<p>Propojení metodou <em>join</em> lze v praxi provést dvěma způsoby:</p>
<ul>
<li>jako <strong>dočasné propojení</strong>, které je definované pouze v rámci vrstev</li>
<li>jako <strong>permanentní</strong> rozšíření cílové tabulky o nové sloupce</li>
</ul>
<section id="dočasné-propojení" class="level2" data-number="5.1">
<h2 data-number="5.1" class="anchored" data-anchor-id="dočasné-propojení"><span class="header-section-number">5.1</span> Dočasné propojení</h2>
<p>Dočasné propojení je právě ten způsob, který jste pravděpodobně zvyklí provádět v prostředí ArcGIS “ručně”.</p>
<p>Jelikož je dočasné propojení definováno na úrovni vrstvy, nikoli datové sady, je pro jeho použití pomocí Pythonu třeba nejprve vytvořit ze zdrojové sady vrstvu. Vrstva se vytvoří v operační paměti a bude uložena do proměnné, pomocí které s ní bude možné pracovat.</p>
</section>
<section id="úloha-12-dočasné-propojení" class="level2" data-number="5.2">
<h2 data-number="5.2" class="anchored" data-anchor-id="úloha-12-dočasné-propojení"><span class="header-section-number">5.2</span> Úloha 12: Dočasné propojení</h2>
<p><strong>Zadání:</strong> K vrstvě <code>UrbanAtlas_LK.shp</code> dočasně připojte tabulku <code>coef.dbf</code> podle pole CODE.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Vstupní data</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>land_cover <span class="op">=</span> <span class="st">"UrbanAtlas_LK.shp"</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>coef_table <span class="op">=</span> <span class="st">"coef.dbf"</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Vytvoření vrstvy</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>lyr <span class="op">=</span> arcpy.management.MakeFeatureLayer(land_cover, <span class="st">"ua_layer"</span>)</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Připojení tabulky</span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>arcpy.management.AddJoin(lyr, <span class="st">"CODE"</span>, coef_table, <span class="st">"CODE"</span>)</span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Výpis názvů polí připojené vrstvy</span></span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Pole v připojené tabulce:"</span>)</span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> field <span class="kw">in</span> arcpy.ListFields(lyr):</span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"  </span><span class="sc">{</span>field<span class="sc">.</span>name<span class="sc">}</span><span class="ss">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Výsledek:</p>
<pre><code>Pole v připojené tabulce:
  UrbanAtlas_LK.FID
  UrbanAtlas_LK.Shape
  UrbanAtlas_LK.CODE
  UrbanAtlas_LK.ITEM
  UrbanAtlas_LK.SHAPE_AREA
  coef.OID
  coef.CODE
  coef.nazev
  coef.ko_vsak</code></pre>
<p>Jak je vidět, v tabulce vrstvy jsou názvy sloupců doplněny názvem tabulky, z níž sloupce pochází. Díky tomu se v této vrstvě můžeme odkazovat na sloupce z připojené tabulky.</p>
</section>
<section id="úloha-13-použití-připojených-dat" class="level2" data-number="5.3">
<h2 data-number="5.3" class="anchored" data-anchor-id="úloha-13-použití-připojených-dat"><span class="header-section-number">5.3</span> Úloha 13: Použití připojených dat</h2>
<p><strong>Zadání:</strong> Ve vrstvě s připojenou tabulkou vypočítejte pole “ODTOK” jako součin srážek, plochy a součinitele odtoku. Dloudobý roční srážkový normál je 860 mm.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Pokračujeme s vrstvou z předchozí úlohy</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Přidání pole pro výpočet</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="co"># POZOR: přidáváme do vrstvy, ne do původní datové sady!</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>arcpy.management.AddField(lyr, <span class="st">"ODTOK"</span>, <span class="st">"DOUBLE"</span>)</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Výpočet s použitím polí z obou tabulek</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Pozor na správné názvy s prefixem!</span></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>arcpy.management.CalculateField(</span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>    lyr,</span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">"ODTOK"</span>,</span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">'!UrbanAtlas_LK.shape.area! * !coef.ko_vsak! * 860'</span>,</span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">"PYTHON3"</span></span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Odtok vypočítán"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>Prefixy u připojených polí
</div>
</div>
<div class="callout-body-container callout-body">
<p>Při práci s připojenými poli musíte používat <strong>plné názvy s prefixem</strong>:</p>
<ul>
<li><code>!NazevTabulky.NazevPole!</code> pro pole z připojené tabulky</li>
<li><code>!NazevVrstvy.NazevPole!</code> pro pole z původní vrstvy</li>
</ul>
<p>Bez prefixu by Python nevěděl, ze které tabulky pole vzít!</p>
</div>
</div>
</section>
<section id="úloha-14-odstranění-propojení" class="level2" data-number="5.4">
<h2 data-number="5.4" class="anchored" data-anchor-id="úloha-14-odstranění-propojení"><span class="header-section-number">5.4</span> Úloha 14: Odstranění propojení</h2>
<p><strong>Zadání:</strong> Odstraňte propojení z vrstvy.</p>
<p>Pokud již propojení tabulek dále nepotřebujeme, je třeba je z vrstvy odstranit nástrojem <strong>Remove Join</strong>:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Odstranění propojení</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>arcpy.management.RemoveJoin(lyr, <span class="st">"coef"</span>)</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Propojení odstraněno"</span>)</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Ověření - výpis polí</span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> field <span class="kw">in</span> arcpy.ListFields(lyr):</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(field.name)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Namísto odstranění propojení je možné také vrstvu smazat. Nestačí ovšem použít pythonovský příkaz <code>del</code>, je nutné vrstvu smazat nástrojem <strong>Delete</strong>:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Smazání vrstvy</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>arcpy.management.Delete(lyr)</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Vrstva smazána"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="trvalé-propojení" class="level2" data-number="5.5">
<h2 data-number="5.5" class="anchored" data-anchor-id="trvalé-propojení"><span class="header-section-number">5.5</span> Trvalé propojení</h2>
<p>Pokud chceme připojit pole trvale, máme dvě možnosti:</p>
<ol type="1">
<li>Provedeme nejprve dočasné propojení výše uvedeným způsobem, a pak výslednou vrstvu uložíme do nové datové sady nástrojem <strong>Copy Features</strong></li>
<li>Připojíme pole přímo do tabulky zdrojové datové sady pomocí nástroje <strong>Join Field</strong></li>
</ol>
</section>
<section id="úloha-15-trvalé-připojení-jednoho-pole" class="level2" data-number="5.6">
<h2 data-number="5.6" class="anchored" data-anchor-id="úloha-15-trvalé-připojení-jednoho-pole"><span class="header-section-number">5.6</span> Úloha 15: Trvalé připojení jednoho pole</h2>
<p><strong>Zadání:</strong> K tabulce <code>Sidla.shp</code> trvale připojte pole POCET_OB z tabulky <code>Sidla_pocty.dbf</code>.</p>
<p>Nástroj <strong>Join Field</strong> připojí pole přímo do tabulky zdrojové datové sady. Zde je možné připojit buď všechna pole, nebo jen vybraná:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Trvalé připojení pole</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>arcpy.management.JoinField(</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>    in_data<span class="op">=</span><span class="st">"Sidla.shp"</span>,</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>    in_field<span class="op">=</span><span class="st">"KOD"</span>,</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>    join_table<span class="op">=</span><span class="st">"Sidla_pocty.dbf"</span>,</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>    join_field<span class="op">=</span><span class="st">"KOD"</span>,</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>    fields<span class="op">=</span>[<span class="st">"POCET_OB"</span>]  <span class="co"># seznam polí k připojení</span></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Pole POCET_OB trvale připojeno"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Warning</span>Pozor - trvalá změna!
</div>
</div>
<div class="callout-body-container callout-body">
<p>Na rozdíl od <code>AddJoin</code>, nástroj <code>JoinField</code> <strong>přímo mění</strong> vstupní tabulku! Pole z připojené tabulky se stanou trvalou součástí cílové tabulky.</p>
</div>
</div>
</section>
<section id="úloha-16-trvalé-připojení-více-polí" class="level2" data-number="5.7">
<h2 data-number="5.7" class="anchored" data-anchor-id="úloha-16-trvalé-připojení-více-polí"><span class="header-section-number">5.7</span> Úloha 16: Trvalé připojení více polí</h2>
<p><strong>Zadání:</strong> K <code>Okresy_VUSC.shp</code> připojte název a kód kraje z tabulky <code>VUSC.shp</code>.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Připojení více polí najednou</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>arcpy.management.JoinField(</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>    in_data<span class="op">=</span><span class="st">"Okresy_VUSC.shp"</span>,</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>    in_field<span class="op">=</span><span class="st">"KOD_VUSC"</span>,</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>    join_table<span class="op">=</span><span class="st">"VUSC.shp"</span>,</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>    join_field<span class="op">=</span><span class="st">"KOD_VUSC"</span>,</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>    fields<span class="op">=</span>[<span class="st">"NAZEV_VUSC"</span>, <span class="st">"KOD_VUSC"</span>]</span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Informace o krajích připojeny"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<hr>
</section>
</section>
<section id="sumarizace-tabulky" class="level1" data-number="6">
<h1 data-number="6"><span class="header-section-number">6</span> Sumarizace tabulky</h1>
<p>Sumarizace tabulky pomocí nástroje <strong>Statistics</strong> umožňuje vypočítat agregační statistiky (součet, průměr, minimum, maximum, počet) pro vybraná pole. Výsledkem je nová tabulka obsahující vypočítané hodnoty.</p>
<section id="úloha-17-základní-sumarizace" class="level2" data-number="6.1">
<h2 data-number="6.1" class="anchored" data-anchor-id="úloha-17-základní-sumarizace"><span class="header-section-number">6.1</span> Úloha 17: Základní sumarizace</h2>
<p><strong>Zadání:</strong> Spočítejte celkovou rozlohu všech katastrů v Libereckém kraji.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>katastry <span class="op">=</span> <span class="st">"katastry_Liberec.shp"</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Nejprve musíme mít pole AREA_KM (viz úloha 8)</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Pokud ho nemáme, vytvoříme ho:</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>arcpy.management.AddField(katastry, <span class="st">"AREA_KM"</span>, <span class="st">"DOUBLE"</span>)</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>arcpy.management.CalculateField(</span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>    katastry,</span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">"AREA_KM"</span>,</span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">'!shape.area!/1000000'</span>,</span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">"PYTHON3"</span></span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Sumarizace - celková plocha</span></span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a>arcpy.analysis.Statistics(</span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a>    in_table<span class="op">=</span>katastry,</span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a>    out_table<span class="op">=</span><span class="st">"stat_katastry_celkem"</span>,</span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a>    statistics_fields<span class="op">=</span>[[<span class="st">"AREA_KM"</span>, <span class="st">"SUM"</span>]]</span>
<span id="cb22-18"><a href="#cb22-18" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb22-19"><a href="#cb22-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-20"><a href="#cb22-20" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Statistiky vypočítány"</span>)</span>
<span id="cb22-21"><a href="#cb22-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-22"><a href="#cb22-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Výpis výsledku</span></span>
<span id="cb22-23"><a href="#cb22-23" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> arcpy.da.SearchCursor(<span class="st">"stat_katastry_celkem"</span>, [<span class="st">"SUM_AREA_KM"</span>]) <span class="im">as</span> cursor:</span>
<span id="cb22-24"><a href="#cb22-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> row <span class="kw">in</span> cursor:</span>
<span id="cb22-25"><a href="#cb22-25" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f"Celková plocha katastrů: </span><span class="sc">{</span>row[<span class="dv">0</span>]<span class="sc">:.2f}</span><span class="ss"> km²"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>Parametry nástroje Statistics:</strong></p>
<ul>
<li><code>in_table</code> - vstupní tabulka</li>
<li><code>out_table</code> - výstupní tabulka se statistikami</li>
<li><code>statistics_fields</code> - seznam polí a funkcí: <code>[["pole", "funkce"], ...]</code></li>
<li><code>case_field</code> - pole pro skupinování (volitelné)</li>
</ul>
<p><strong>Statistické funkce:</strong></p>
<ul>
<li><code>"SUM"</code> - součet</li>
<li><code>"MEAN"</code> - průměr</li>
<li><code>"MIN"</code> - minimum</li>
<li><code>"MAX"</code> - maximum</li>
<li><code>"COUNT"</code> - počet</li>
</ul>
</section>
<section id="úloha-18-sumarizace-po-skupinách" class="level2" data-number="6.2">
<h2 data-number="6.2" class="anchored" data-anchor-id="úloha-18-sumarizace-po-skupinách"><span class="header-section-number">6.2</span> Úloha 18: Sumarizace po skupinách</h2>
<p><strong>Zadání:</strong> Spočítejte celkovou rozlohu a průměrnou rozlohu katastrů pro každý okres.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>katastry <span class="op">=</span> <span class="st">"katastry_Liberec.shp"</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Nejprve musíme k datům připojit informaci o okresu</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="co"># To provedeme pomocí JoinField z vrstvy okresů</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>arcpy.management.JoinField(</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>    in_data<span class="op">=</span>katastry,</span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>    in_field<span class="op">=</span><span class="st">"KOD_OKRESU"</span>,  <span class="co"># předpokládáme, že toto pole existuje</span></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>    join_table<span class="op">=</span><span class="st">"okresy.shp"</span>,</span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>    join_field<span class="op">=</span><span class="st">"KOD"</span>,</span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>    fields<span class="op">=</span>[<span class="st">"NAZEV_OKRESU"</span>]</span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Sumarizace podle okresů</span></span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a>arcpy.analysis.Statistics(</span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a>    in_table<span class="op">=</span>katastry,</span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a>    out_table<span class="op">=</span><span class="st">"stat_katastry_okresy"</span>,</span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a>    statistics_fields<span class="op">=</span>[</span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a>        [<span class="st">"AREA_KM"</span>, <span class="st">"SUM"</span>],</span>
<span id="cb23-19"><a href="#cb23-19" aria-hidden="true" tabindex="-1"></a>        [<span class="st">"AREA_KM"</span>, <span class="st">"MEAN"</span>]</span>
<span id="cb23-20"><a href="#cb23-20" aria-hidden="true" tabindex="-1"></a>    ],</span>
<span id="cb23-21"><a href="#cb23-21" aria-hidden="true" tabindex="-1"></a>    case_field<span class="op">=</span><span class="st">"NAZEV_OKRESU"</span>  <span class="co"># skupinování podle okresu</span></span>
<span id="cb23-22"><a href="#cb23-22" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb23-23"><a href="#cb23-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-24"><a href="#cb23-24" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Statistiky po okresech vypočítány"</span>)</span>
<span id="cb23-25"><a href="#cb23-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-26"><a href="#cb23-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Výpis výsledků</span></span>
<span id="cb23-27"><a href="#cb23-27" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> arcpy.da.SearchCursor(<span class="st">"stat_katastry_okresy"</span>, </span>
<span id="cb23-28"><a href="#cb23-28" aria-hidden="true" tabindex="-1"></a>                          [<span class="st">"NAZEV_OKRESU"</span>, <span class="st">"SUM_AREA_KM"</span>, <span class="st">"MEAN_AREA_KM"</span>]) <span class="im">as</span> cursor:</span>
<span id="cb23-29"><a href="#cb23-29" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="sc">{</span><span class="st">'Okres'</span><span class="sc">:&lt;30}</span><span class="ss"> | </span><span class="sc">{</span><span class="st">'Celková plocha'</span><span class="sc">:&gt;15}</span><span class="ss"> | </span><span class="sc">{</span><span class="st">'Průměrná plocha'</span><span class="sc">:&gt;17}</span><span class="ss">"</span>)</span>
<span id="cb23-30"><a href="#cb23-30" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"-"</span> <span class="op">*</span> <span class="dv">70</span>)</span>
<span id="cb23-31"><a href="#cb23-31" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> row <span class="kw">in</span> cursor:</span>
<span id="cb23-32"><a href="#cb23-32" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f"</span><span class="sc">{</span>row[<span class="dv">0</span>]<span class="sc">:&lt;30}</span><span class="ss"> | </span><span class="sc">{</span>row[<span class="dv">1</span>]<span class="sc">:&gt;15.2f}</span><span class="ss"> | </span><span class="sc">{</span>row[<span class="dv">2</span>]<span class="sc">:&gt;17.2f}</span><span class="ss">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Parametr case_field
</div>
</div>
<div class="callout-body-container callout-body">
<p>Když použijete <code>case_field</code>, nástroj <strong>Statistics</strong> vytvoří jeden řádek výsledné tabulky pro každou <strong>unikátní hodnotu</strong> v tomto poli. Výsledky jsou tedy <strong>seskupené podle hodnot</strong> v case_field.</p>
<p>Bez <code>case_field</code> se sumarizuje celá tabulka do jednoho řádku.</p>
</div>
</div>
</section>
<section id="úloha-19-kombinace-funkcí" class="level2" data-number="6.3">
<h2 data-number="6.3" class="anchored" data-anchor-id="úloha-19-kombinace-funkcí"><span class="header-section-number">6.3</span> Úloha 19: Kombinace funkcí</h2>
<p><strong>Zadání:</strong> Pro každý typ krajinného pokryvu (Urban Atlas) spočítejte: počet plošek, celkovou plochu, průměrnou plochu, minimální a maximální plochu.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>urban_atlas <span class="op">=</span> <span class="st">"UrbanAtlas_LK.shp"</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Přidání pole AREA_KM</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>arcpy.management.AddField(urban_atlas, <span class="st">"AREA_KM"</span>, <span class="st">"DOUBLE"</span>)</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>arcpy.management.CalculateField(</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>    urban_atlas,</span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"AREA_KM"</span>,</span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">'!shape.area!/1000000'</span>,</span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">"PYTHON3"</span></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Sumarizace s kombinací funkcí</span></span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a>arcpy.analysis.Statistics(</span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a>    in_table<span class="op">=</span>urban_atlas,</span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a>    out_table<span class="op">=</span><span class="st">"stat_landcover"</span>,</span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a>    statistics_fields<span class="op">=</span>[</span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a>        [<span class="st">"AREA_KM"</span>, <span class="st">"COUNT"</span>],</span>
<span id="cb24-18"><a href="#cb24-18" aria-hidden="true" tabindex="-1"></a>        [<span class="st">"AREA_KM"</span>, <span class="st">"SUM"</span>],</span>
<span id="cb24-19"><a href="#cb24-19" aria-hidden="true" tabindex="-1"></a>        [<span class="st">"AREA_KM"</span>, <span class="st">"MEAN"</span>],</span>
<span id="cb24-20"><a href="#cb24-20" aria-hidden="true" tabindex="-1"></a>        [<span class="st">"AREA_KM"</span>, <span class="st">"MIN"</span>],</span>
<span id="cb24-21"><a href="#cb24-21" aria-hidden="true" tabindex="-1"></a>        [<span class="st">"AREA_KM"</span>, <span class="st">"MAX"</span>]</span>
<span id="cb24-22"><a href="#cb24-22" aria-hidden="true" tabindex="-1"></a>    ],</span>
<span id="cb24-23"><a href="#cb24-23" aria-hidden="true" tabindex="-1"></a>    case_field<span class="op">=</span><span class="st">"CODE"</span></span>
<span id="cb24-24"><a href="#cb24-24" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb24-25"><a href="#cb24-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-26"><a href="#cb24-26" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Statistiky krajinného pokryvu vypočítány"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="úloha-20-připojení-statistik-zpět-k-původní-tabulce" class="level2" data-number="6.4">
<h2 data-number="6.4" class="anchored" data-anchor-id="úloha-20-připojení-statistik-zpět-k-původní-tabulce"><span class="header-section-number">6.4</span> Úloha 20: Připojení statistik zpět k původní tabulce</h2>
<p><strong>Zadání:</strong> K původní tabulce katastrů připojte celkovou rozlohu okresu, ve kterém se katastr nachází. Poté vypočítejte podíl rozlohy katastru na rozloze okresu.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>katastry <span class="op">=</span> <span class="st">"katastry_Liberec.shp"</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Sumarizace - celková plocha okresů</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>arcpy.analysis.Statistics(</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>    in_table<span class="op">=</span>katastry,</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>    out_table<span class="op">=</span><span class="st">"stat_okresy"</span>,</span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>    statistics_fields<span class="op">=</span>[[<span class="st">"AREA_KM"</span>, <span class="st">"SUM"</span>]],</span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>    case_field<span class="op">=</span><span class="st">"KOD_OKRESU"</span></span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Připojení výsledků zpět k původní tabulce</span></span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a>arcpy.management.JoinField(</span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a>    in_data<span class="op">=</span>katastry,</span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a>    in_field<span class="op">=</span><span class="st">"KOD_OKRESU"</span>,</span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a>    join_table<span class="op">=</span><span class="st">"stat_okresy"</span>,</span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true" tabindex="-1"></a>    join_field<span class="op">=</span><span class="st">"KOD_OKRESU"</span>,</span>
<span id="cb25-17"><a href="#cb25-17" aria-hidden="true" tabindex="-1"></a>    fields<span class="op">=</span>[<span class="st">"SUM_AREA_KM"</span>]</span>
<span id="cb25-18"><a href="#cb25-18" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb25-19"><a href="#cb25-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-20"><a href="#cb25-20" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. Výpočet podílu</span></span>
<span id="cb25-21"><a href="#cb25-21" aria-hidden="true" tabindex="-1"></a>arcpy.management.AddField(katastry, <span class="st">"PODIL_OKRESU"</span>, <span class="st">"DOUBLE"</span>)</span>
<span id="cb25-22"><a href="#cb25-22" aria-hidden="true" tabindex="-1"></a>arcpy.management.CalculateField(</span>
<span id="cb25-23"><a href="#cb25-23" aria-hidden="true" tabindex="-1"></a>    katastry,</span>
<span id="cb25-24"><a href="#cb25-24" aria-hidden="true" tabindex="-1"></a>    <span class="st">"PODIL_OKRESU"</span>,</span>
<span id="cb25-25"><a href="#cb25-25" aria-hidden="true" tabindex="-1"></a>    <span class="st">'!AREA_KM!/!SUM_AREA_KM!*100'</span>,</span>
<span id="cb25-26"><a href="#cb25-26" aria-hidden="true" tabindex="-1"></a>    <span class="st">"PYTHON3"</span></span>
<span id="cb25-27"><a href="#cb25-27" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb25-28"><a href="#cb25-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-29"><a href="#cb25-29" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Podíl rozlohy na okresu vypočítán"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<hr>
</section>
</section>
<section id="komplexní-úlohy---python-notebook" class="level1" data-number="7">
<h1 data-number="7"><span class="header-section-number">7</span> Komplexní úlohy - Python Notebook</h1>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Important</span>Python Notebook
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>Následující úlohy řešte v Python Notebooku</strong>, ne v Python Window. Tyto úlohy kombinují techniky z celé lekce a vyžadují strukturovanější přístup.</p>
</div>
</div>
<section id="úloha-21-analýza-hustoty-zalidnění" class="level2" data-number="7.1">
<h2 data-number="7.1" class="anchored" data-anchor-id="úloha-21-analýza-hustoty-zalidnění"><span class="header-section-number">7.1</span> Úloha 21: Analýza hustoty zalidnění</h2>
<p><strong>Zadání:</strong> Pro každý okres spočítejte hustotu zalidnění (obyvatel/km²).</p>
<p><strong>Data:</strong> - <code>Okresy_VUSC.shp</code> - polygony okresů - <code>Sidla.shp</code> - bodová vrstva sídel - <code>Sidla_pocty.dbf</code> - tabulka s počty obyvatel</p>
<p><strong>Postup:</strong></p>
<div id="d41f9acd" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> arcpy</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Nastavení</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>arcpy.env.workspace <span class="op">=</span> <span class="vs">r"C:</span><span class="er">\</span><span class="vs">TEMP</span><span class="er">\</span><span class="vs">Python_GIS</span><span class="er">\</span><span class="vs">Lekce_14"</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>arcpy.env.overwriteOutput <span class="op">=</span> <span class="va">True</span></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"="</span> <span class="op">*</span> <span class="dv">60</span>)</span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"ANALÝZA HUSTOTY ZALIDNĚNÍ OKRESŮ"</span>)</span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"="</span> <span class="op">*</span> <span class="dv">60</span>)</span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Výpočet plochy okresů</span></span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">1. Počítám plochu okresů..."</span>)</span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a>okresy <span class="op">=</span> <span class="st">"Okresy_VUSC.shp"</span></span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a>arcpy.management.AddField(okresy, <span class="st">"AREA_KM"</span>, <span class="st">"DOUBLE"</span>)</span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true" tabindex="-1"></a>arcpy.management.CalculateField(</span>
<span id="cb26-17"><a href="#cb26-17" aria-hidden="true" tabindex="-1"></a>    okresy,</span>
<span id="cb26-18"><a href="#cb26-18" aria-hidden="true" tabindex="-1"></a>    <span class="st">"AREA_KM"</span>,</span>
<span id="cb26-19"><a href="#cb26-19" aria-hidden="true" tabindex="-1"></a>    <span class="st">'!shape.area!/1000000'</span>,</span>
<span id="cb26-20"><a href="#cb26-20" aria-hidden="true" tabindex="-1"></a>    <span class="st">"PYTHON3"</span></span>
<span id="cb26-21"><a href="#cb26-21" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb26-22"><a href="#cb26-22" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"   OK"</span>)</span>
<span id="cb26-23"><a href="#cb26-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-24"><a href="#cb26-24" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Připojení počtu obyvatel k sídlům</span></span>
<span id="cb26-25"><a href="#cb26-25" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">2. Připojuji počty obyvatel k sídlům..."</span>)</span>
<span id="cb26-26"><a href="#cb26-26" aria-hidden="true" tabindex="-1"></a>sidla <span class="op">=</span> <span class="st">"Sidla.shp"</span></span>
<span id="cb26-27"><a href="#cb26-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-28"><a href="#cb26-28" aria-hidden="true" tabindex="-1"></a>arcpy.management.JoinField(</span>
<span id="cb26-29"><a href="#cb26-29" aria-hidden="true" tabindex="-1"></a>    in_data<span class="op">=</span>sidla,</span>
<span id="cb26-30"><a href="#cb26-30" aria-hidden="true" tabindex="-1"></a>    in_field<span class="op">=</span><span class="st">"KOD"</span>,</span>
<span id="cb26-31"><a href="#cb26-31" aria-hidden="true" tabindex="-1"></a>    join_table<span class="op">=</span><span class="st">"Sidla_pocty.dbf"</span>,</span>
<span id="cb26-32"><a href="#cb26-32" aria-hidden="true" tabindex="-1"></a>    join_field<span class="op">=</span><span class="st">"KOD"</span>,</span>
<span id="cb26-33"><a href="#cb26-33" aria-hidden="true" tabindex="-1"></a>    fields<span class="op">=</span>[<span class="st">"POCET_OB"</span>]</span>
<span id="cb26-34"><a href="#cb26-34" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb26-35"><a href="#cb26-35" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"   OK"</span>)</span>
<span id="cb26-36"><a href="#cb26-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-37"><a href="#cb26-37" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. Spatial Join - připojení kódu okresu k sídlům</span></span>
<span id="cb26-38"><a href="#cb26-38" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">3. Přiřazuji sídla k okresům (Spatial Join)..."</span>)</span>
<span id="cb26-39"><a href="#cb26-39" aria-hidden="true" tabindex="-1"></a>sidla_okresy <span class="op">=</span> <span class="st">"sidla_s_okresy.shp"</span></span>
<span id="cb26-40"><a href="#cb26-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-41"><a href="#cb26-41" aria-hidden="true" tabindex="-1"></a>arcpy.analysis.SpatialJoin(</span>
<span id="cb26-42"><a href="#cb26-42" aria-hidden="true" tabindex="-1"></a>    target_features<span class="op">=</span>sidla,</span>
<span id="cb26-43"><a href="#cb26-43" aria-hidden="true" tabindex="-1"></a>    join_features<span class="op">=</span>okresy,</span>
<span id="cb26-44"><a href="#cb26-44" aria-hidden="true" tabindex="-1"></a>    out_feature_class<span class="op">=</span>sidla_okresy,</span>
<span id="cb26-45"><a href="#cb26-45" aria-hidden="true" tabindex="-1"></a>    join_type<span class="op">=</span><span class="st">"KEEP_COMMON"</span>,</span>
<span id="cb26-46"><a href="#cb26-46" aria-hidden="true" tabindex="-1"></a>    match_option<span class="op">=</span><span class="st">"WITHIN"</span></span>
<span id="cb26-47"><a href="#cb26-47" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb26-48"><a href="#cb26-48" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"   OK"</span>)</span>
<span id="cb26-49"><a href="#cb26-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-50"><a href="#cb26-50" aria-hidden="true" tabindex="-1"></a><span class="co"># 4. Sumarizace - součet obyvatel pro každý okres</span></span>
<span id="cb26-51"><a href="#cb26-51" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">4. Sumarizuji počty obyvatel podle okresů..."</span>)</span>
<span id="cb26-52"><a href="#cb26-52" aria-hidden="true" tabindex="-1"></a>arcpy.analysis.Statistics(</span>
<span id="cb26-53"><a href="#cb26-53" aria-hidden="true" tabindex="-1"></a>    in_table<span class="op">=</span>sidla_okresy,</span>
<span id="cb26-54"><a href="#cb26-54" aria-hidden="true" tabindex="-1"></a>    out_table<span class="op">=</span><span class="st">"stat_obyvatele_okresy"</span>,</span>
<span id="cb26-55"><a href="#cb26-55" aria-hidden="true" tabindex="-1"></a>    statistics_fields<span class="op">=</span>[[<span class="st">"POCET_OB"</span>, <span class="st">"SUM"</span>]],</span>
<span id="cb26-56"><a href="#cb26-56" aria-hidden="true" tabindex="-1"></a>    case_field<span class="op">=</span><span class="st">"KOD_OKRESU"</span></span>
<span id="cb26-57"><a href="#cb26-57" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb26-58"><a href="#cb26-58" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"   OK"</span>)</span>
<span id="cb26-59"><a href="#cb26-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-60"><a href="#cb26-60" aria-hidden="true" tabindex="-1"></a><span class="co"># 5. Připojení počtu obyvatel k okresům</span></span>
<span id="cb26-61"><a href="#cb26-61" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">5. Připojuji počty obyvatel k okresům..."</span>)</span>
<span id="cb26-62"><a href="#cb26-62" aria-hidden="true" tabindex="-1"></a>arcpy.management.JoinField(</span>
<span id="cb26-63"><a href="#cb26-63" aria-hidden="true" tabindex="-1"></a>    in_data<span class="op">=</span>okresy,</span>
<span id="cb26-64"><a href="#cb26-64" aria-hidden="true" tabindex="-1"></a>    in_field<span class="op">=</span><span class="st">"KOD"</span>,</span>
<span id="cb26-65"><a href="#cb26-65" aria-hidden="true" tabindex="-1"></a>    join_table<span class="op">=</span><span class="st">"stat_obyvatele_okresy"</span>,</span>
<span id="cb26-66"><a href="#cb26-66" aria-hidden="true" tabindex="-1"></a>    join_field<span class="op">=</span><span class="st">"KOD_OKRESU"</span>,</span>
<span id="cb26-67"><a href="#cb26-67" aria-hidden="true" tabindex="-1"></a>    fields<span class="op">=</span>[<span class="st">"SUM_POCET_OB"</span>]</span>
<span id="cb26-68"><a href="#cb26-68" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb26-69"><a href="#cb26-69" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"   OK"</span>)</span>
<span id="cb26-70"><a href="#cb26-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-71"><a href="#cb26-71" aria-hidden="true" tabindex="-1"></a><span class="co"># 6. Výpočet hustoty zalidnění</span></span>
<span id="cb26-72"><a href="#cb26-72" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">6. Počítám hustotu zalidnění..."</span>)</span>
<span id="cb26-73"><a href="#cb26-73" aria-hidden="true" tabindex="-1"></a>arcpy.management.AddField(okresy, <span class="st">"HUSTOTA"</span>, <span class="st">"DOUBLE"</span>)</span>
<span id="cb26-74"><a href="#cb26-74" aria-hidden="true" tabindex="-1"></a>arcpy.management.CalculateField(</span>
<span id="cb26-75"><a href="#cb26-75" aria-hidden="true" tabindex="-1"></a>    okresy,</span>
<span id="cb26-76"><a href="#cb26-76" aria-hidden="true" tabindex="-1"></a>    <span class="st">"HUSTOTA"</span>,</span>
<span id="cb26-77"><a href="#cb26-77" aria-hidden="true" tabindex="-1"></a>    <span class="st">'!SUM_POCET_OB!/!AREA_KM!'</span>,</span>
<span id="cb26-78"><a href="#cb26-78" aria-hidden="true" tabindex="-1"></a>    <span class="st">"PYTHON3"</span></span>
<span id="cb26-79"><a href="#cb26-79" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb26-80"><a href="#cb26-80" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"   OK"</span>)</span>
<span id="cb26-81"><a href="#cb26-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-82"><a href="#cb26-82" aria-hidden="true" tabindex="-1"></a><span class="co"># 7. Výpis výsledků</span></span>
<span id="cb26-83"><a href="#cb26-83" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">"</span> <span class="op">+</span> <span class="st">"="</span> <span class="op">*</span> <span class="dv">60</span>)</span>
<span id="cb26-84"><a href="#cb26-84" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"VÝSLEDKY - HUSTOTA ZALIDNĚNÍ"</span>)</span>
<span id="cb26-85"><a href="#cb26-85" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"="</span> <span class="op">*</span> <span class="dv">60</span>)</span>
<span id="cb26-86"><a href="#cb26-86" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-87"><a href="#cb26-87" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> arcpy.da.SearchCursor(okresy, </span>
<span id="cb26-88"><a href="#cb26-88" aria-hidden="true" tabindex="-1"></a>                          [<span class="st">"NAZEV_OKRESU"</span>, <span class="st">"SUM_POCET_OB"</span>, <span class="st">"AREA_KM"</span>, <span class="st">"HUSTOTA"</span>],</span>
<span id="cb26-89"><a href="#cb26-89" aria-hidden="true" tabindex="-1"></a>                          sql_clause<span class="op">=</span>(<span class="va">None</span>, <span class="st">"ORDER BY HUSTOTA DESC"</span>)) <span class="im">as</span> cursor:</span>
<span id="cb26-90"><a href="#cb26-90" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="sc">{</span><span class="st">'Okres'</span><span class="sc">:&lt;30}</span><span class="ss"> | </span><span class="sc">{</span><span class="st">'Obyvatel'</span><span class="sc">:&gt;10}</span><span class="ss"> | </span><span class="sc">{</span><span class="st">'Plocha (km²)'</span><span class="sc">:&gt;12}</span><span class="ss"> | </span><span class="sc">{</span><span class="st">'Hustota'</span><span class="sc">:&gt;10}</span><span class="ss">"</span>)</span>
<span id="cb26-91"><a href="#cb26-91" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"-"</span> <span class="op">*</span> <span class="dv">70</span>)</span>
<span id="cb26-92"><a href="#cb26-92" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> row <span class="kw">in</span> cursor:</span>
<span id="cb26-93"><a href="#cb26-93" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> row[<span class="dv">1</span>] <span class="kw">is</span> <span class="kw">not</span> <span class="va">None</span>:  <span class="co"># kontrola, že má data</span></span>
<span id="cb26-94"><a href="#cb26-94" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="ss">f"</span><span class="sc">{</span>row[<span class="dv">0</span>]<span class="sc">:&lt;30}</span><span class="ss"> | </span><span class="sc">{</span>row[<span class="dv">1</span>]<span class="sc">:&gt;10.0f}</span><span class="ss"> | </span><span class="sc">{</span>row[<span class="dv">2</span>]<span class="sc">:&gt;12.2f}</span><span class="ss"> | </span><span class="sc">{</span>row[<span class="dv">3</span>]<span class="sc">:&gt;10.2f}</span><span class="ss">"</span>)</span>
<span id="cb26-95"><a href="#cb26-95" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-96"><a href="#cb26-96" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">"</span> <span class="op">+</span> <span class="st">"="</span> <span class="op">*</span> <span class="dv">60</span>)</span>
<span id="cb26-97"><a href="#cb26-97" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"ANALÝZA DOKONČENA"</span>)</span>
<span id="cb26-98"><a href="#cb26-98" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"="</span> <span class="op">*</span> <span class="dv">60</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="úloha-22-dávkové-zpracování---kategorizace-obcí" class="level2" data-number="7.2">
<h2 data-number="7.2" class="anchored" data-anchor-id="úloha-22-dávkové-zpracování---kategorizace-obcí"><span class="header-section-number">7.2</span> Úloha 22: Dávkové zpracování - kategorizace obcí</h2>
<p><strong>Zadání:</strong> Pro všechny kraje v ČR vytvořte nové shapefily s kategorizací obcí podle velikosti.</p>
<p><strong>Kategorie:</strong> - Malé obce: &lt; 500 obyvatel - Střední obce: 500-5000 obyvatel - Velké obce: &gt; 5000 obyvatel</p>
<p><strong>Postup:</strong></p>
<div id="16d015cf" class="cell" data-execution_count="2">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> arcpy</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Nastavení</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>arcpy.env.workspace <span class="op">=</span> <span class="vs">r"C:</span><span class="er">\</span><span class="vs">TEMP</span><span class="er">\</span><span class="vs">Python_GIS</span><span class="er">\</span><span class="vs">Lekce_14"</span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>arcpy.env.overwriteOutput <span class="op">=</span> <span class="va">True</span></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Výstupní složka</span></span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>output_folder <span class="op">=</span> <span class="vs">r"C:</span><span class="er">\</span><span class="vs">TEMP</span><span class="er">\</span><span class="vs">Python_GIS</span><span class="er">\</span><span class="vs">Lekce_14</span><span class="er">\</span><span class="vs">kategorie_obci"</span></span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="kw">not</span> os.path.exists(output_folder):</span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a>    os.makedirs(output_folder)</span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"="</span> <span class="op">*</span> <span class="dv">60</span>)</span>
<span id="cb27-14"><a href="#cb27-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"KATEGORIZACE OBCÍ PODLE KRAJŮ"</span>)</span>
<span id="cb27-15"><a href="#cb27-15" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"="</span> <span class="op">*</span> <span class="dv">60</span>)</span>
<span id="cb27-16"><a href="#cb27-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-17"><a href="#cb27-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Data</span></span>
<span id="cb27-18"><a href="#cb27-18" aria-hidden="true" tabindex="-1"></a>obce <span class="op">=</span> <span class="st">"obce_LK.shp"</span>  <span class="co"># nebo obecnější data ze všech krajů</span></span>
<span id="cb27-19"><a href="#cb27-19" aria-hidden="true" tabindex="-1"></a>kraje <span class="op">=</span> <span class="st">"VUSC.shp"</span></span>
<span id="cb27-20"><a href="#cb27-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-21"><a href="#cb27-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Vytvoření vrstvy krajů</span></span>
<span id="cb27-22"><a href="#cb27-22" aria-hidden="true" tabindex="-1"></a>kraje_lyr <span class="op">=</span> arcpy.management.MakeFeatureLayer(kraje, <span class="st">"kraje_layer"</span>)</span>
<span id="cb27-23"><a href="#cb27-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-24"><a href="#cb27-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Získání seznamu krajů</span></span>
<span id="cb27-25"><a href="#cb27-25" aria-hidden="true" tabindex="-1"></a>kraje_list <span class="op">=</span> []</span>
<span id="cb27-26"><a href="#cb27-26" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> arcpy.da.SearchCursor(kraje_lyr, [<span class="st">"NAZEV_VUSC"</span>, <span class="st">"KOD_VUSC"</span>]) <span class="im">as</span> cursor:</span>
<span id="cb27-27"><a href="#cb27-27" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> row <span class="kw">in</span> cursor:</span>
<span id="cb27-28"><a href="#cb27-28" aria-hidden="true" tabindex="-1"></a>        kraje_list.append((row[<span class="dv">0</span>], row[<span class="dv">1</span>]))</span>
<span id="cb27-29"><a href="#cb27-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-30"><a href="#cb27-30" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">Nalezeno krajů: </span><span class="sc">{</span><span class="bu">len</span>(kraje_list)<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb27-31"><a href="#cb27-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-32"><a href="#cb27-32" aria-hidden="true" tabindex="-1"></a><span class="co"># Zpracování každého kraje</span></span>
<span id="cb27-33"><a href="#cb27-33" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> nazev_kraje, kod_kraje <span class="kw">in</span> kraje_list:</span>
<span id="cb27-34"><a href="#cb27-34" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="sc">{</span><span class="st">'='</span><span class="op">*</span><span class="dv">60</span><span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb27-35"><a href="#cb27-35" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"Zpracovávám: </span><span class="sc">{</span>nazev_kraje<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb27-36"><a href="#cb27-36" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"</span><span class="sc">{</span><span class="st">'='</span><span class="op">*</span><span class="dv">60</span><span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb27-37"><a href="#cb27-37" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb27-38"><a href="#cb27-38" aria-hidden="true" tabindex="-1"></a>    <span class="cf">try</span>:</span>
<span id="cb27-39"><a href="#cb27-39" aria-hidden="true" tabindex="-1"></a>        <span class="co"># 1. Výběr obce v kraji (pomocí Spatial Join nebo Select by Location)</span></span>
<span id="cb27-40"><a href="#cb27-40" aria-hidden="true" tabindex="-1"></a>        obce_lyr <span class="op">=</span> arcpy.management.MakeFeatureLayer(obce, <span class="st">"obce_layer"</span>)</span>
<span id="cb27-41"><a href="#cb27-41" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb27-42"><a href="#cb27-42" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Výběr kraje</span></span>
<span id="cb27-43"><a href="#cb27-43" aria-hidden="true" tabindex="-1"></a>        arcpy.management.SelectLayerByAttribute(</span>
<span id="cb27-44"><a href="#cb27-44" aria-hidden="true" tabindex="-1"></a>            kraje_lyr,</span>
<span id="cb27-45"><a href="#cb27-45" aria-hidden="true" tabindex="-1"></a>            <span class="st">"NEW_SELECTION"</span>,</span>
<span id="cb27-46"><a href="#cb27-46" aria-hidden="true" tabindex="-1"></a>            <span class="ss">f"KOD_VUSC = </span><span class="sc">{</span>kod_kraje<span class="sc">}</span><span class="ss">"</span></span>
<span id="cb27-47"><a href="#cb27-47" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb27-48"><a href="#cb27-48" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb27-49"><a href="#cb27-49" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Výběr obcí v kraji</span></span>
<span id="cb27-50"><a href="#cb27-50" aria-hidden="true" tabindex="-1"></a>        arcpy.management.SelectLayerByLocation(</span>
<span id="cb27-51"><a href="#cb27-51" aria-hidden="true" tabindex="-1"></a>            obce_lyr,</span>
<span id="cb27-52"><a href="#cb27-52" aria-hidden="true" tabindex="-1"></a>            <span class="st">"WITHIN"</span>,</span>
<span id="cb27-53"><a href="#cb27-53" aria-hidden="true" tabindex="-1"></a>            kraje_lyr</span>
<span id="cb27-54"><a href="#cb27-54" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb27-55"><a href="#cb27-55" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb27-56"><a href="#cb27-56" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Zjištění počtu obcí v kraji</span></span>
<span id="cb27-57"><a href="#cb27-57" aria-hidden="true" tabindex="-1"></a>        count <span class="op">=</span> <span class="bu">int</span>(arcpy.management.GetCount(obce_lyr).getOutput(<span class="dv">0</span>))</span>
<span id="cb27-58"><a href="#cb27-58" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f"  Obcí v kraji: </span><span class="sc">{</span>count<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb27-59"><a href="#cb27-59" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb27-60"><a href="#cb27-60" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> count <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb27-61"><a href="#cb27-61" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="st">"  Přeskakuji - žádné obce"</span>)</span>
<span id="cb27-62"><a href="#cb27-62" aria-hidden="true" tabindex="-1"></a>            <span class="cf">continue</span></span>
<span id="cb27-63"><a href="#cb27-63" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb27-64"><a href="#cb27-64" aria-hidden="true" tabindex="-1"></a>        <span class="co"># 2. Vytvoření shapefilů pro jednotlivé kategorie</span></span>
<span id="cb27-65"><a href="#cb27-65" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb27-66"><a href="#cb27-66" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Malé obce (&lt; 500)</span></span>
<span id="cb27-67"><a href="#cb27-67" aria-hidden="true" tabindex="-1"></a>        arcpy.management.SelectLayerByAttribute(</span>
<span id="cb27-68"><a href="#cb27-68" aria-hidden="true" tabindex="-1"></a>            obce_lyr,</span>
<span id="cb27-69"><a href="#cb27-69" aria-hidden="true" tabindex="-1"></a>            <span class="st">"NEW_SELECTION"</span>,</span>
<span id="cb27-70"><a href="#cb27-70" aria-hidden="true" tabindex="-1"></a>            <span class="st">"OBYVATEL &lt; 500"</span></span>
<span id="cb27-71"><a href="#cb27-71" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb27-72"><a href="#cb27-72" aria-hidden="true" tabindex="-1"></a>        count_male <span class="op">=</span> <span class="bu">int</span>(arcpy.management.GetCount(obce_lyr).getOutput(<span class="dv">0</span>))</span>
<span id="cb27-73"><a href="#cb27-73" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> count_male <span class="op">&gt;</span> <span class="dv">0</span>:</span>
<span id="cb27-74"><a href="#cb27-74" aria-hidden="true" tabindex="-1"></a>            output_male <span class="op">=</span> os.path.join(output_folder, </span>
<span id="cb27-75"><a href="#cb27-75" aria-hidden="true" tabindex="-1"></a>                                      <span class="ss">f"obce_</span><span class="sc">{</span>nazev_kraje<span class="sc">}</span><span class="ss">_male.shp"</span>)</span>
<span id="cb27-76"><a href="#cb27-76" aria-hidden="true" tabindex="-1"></a>            arcpy.management.CopyFeatures(obce_lyr, output_male)</span>
<span id="cb27-77"><a href="#cb27-77" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="ss">f"  Malé obce: </span><span class="sc">{</span>count_male<span class="sc">}</span><span class="ss"> → </span><span class="sc">{</span>output_male<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb27-78"><a href="#cb27-78" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb27-79"><a href="#cb27-79" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Střední obce (500-5000)</span></span>
<span id="cb27-80"><a href="#cb27-80" aria-hidden="true" tabindex="-1"></a>        arcpy.management.SelectLayerByLocation(</span>
<span id="cb27-81"><a href="#cb27-81" aria-hidden="true" tabindex="-1"></a>            obce_lyr,</span>
<span id="cb27-82"><a href="#cb27-82" aria-hidden="true" tabindex="-1"></a>            <span class="st">"WITHIN"</span>,</span>
<span id="cb27-83"><a href="#cb27-83" aria-hidden="true" tabindex="-1"></a>            kraje_lyr</span>
<span id="cb27-84"><a href="#cb27-84" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb27-85"><a href="#cb27-85" aria-hidden="true" tabindex="-1"></a>        arcpy.management.SelectLayerByAttribute(</span>
<span id="cb27-86"><a href="#cb27-86" aria-hidden="true" tabindex="-1"></a>            obce_lyr,</span>
<span id="cb27-87"><a href="#cb27-87" aria-hidden="true" tabindex="-1"></a>            <span class="st">"NEW_SELECTION"</span>,</span>
<span id="cb27-88"><a href="#cb27-88" aria-hidden="true" tabindex="-1"></a>            <span class="st">"OBYVATEL &gt;= 500 AND OBYVATEL &lt;= 5000"</span></span>
<span id="cb27-89"><a href="#cb27-89" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb27-90"><a href="#cb27-90" aria-hidden="true" tabindex="-1"></a>        count_stredni <span class="op">=</span> <span class="bu">int</span>(arcpy.management.GetCount(obce_lyr).getOutput(<span class="dv">0</span>))</span>
<span id="cb27-91"><a href="#cb27-91" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> count_stredni <span class="op">&gt;</span> <span class="dv">0</span>:</span>
<span id="cb27-92"><a href="#cb27-92" aria-hidden="true" tabindex="-1"></a>            output_stredni <span class="op">=</span> os.path.join(output_folder, </span>
<span id="cb27-93"><a href="#cb27-93" aria-hidden="true" tabindex="-1"></a>                                         <span class="ss">f"obce_</span><span class="sc">{</span>nazev_kraje<span class="sc">}</span><span class="ss">_stredni.shp"</span>)</span>
<span id="cb27-94"><a href="#cb27-94" aria-hidden="true" tabindex="-1"></a>            arcpy.management.CopyFeatures(obce_lyr, output_stredni)</span>
<span id="cb27-95"><a href="#cb27-95" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="ss">f"  Střední obce: </span><span class="sc">{</span>count_stredni<span class="sc">}</span><span class="ss"> → </span><span class="sc">{</span>output_stredni<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb27-96"><a href="#cb27-96" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb27-97"><a href="#cb27-97" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Velké obce (&gt; 5000)</span></span>
<span id="cb27-98"><a href="#cb27-98" aria-hidden="true" tabindex="-1"></a>        arcpy.management.SelectLayerByLocation(</span>
<span id="cb27-99"><a href="#cb27-99" aria-hidden="true" tabindex="-1"></a>            obce_lyr,</span>
<span id="cb27-100"><a href="#cb27-100" aria-hidden="true" tabindex="-1"></a>            <span class="st">"WITHIN"</span>,</span>
<span id="cb27-101"><a href="#cb27-101" aria-hidden="true" tabindex="-1"></a>            kraje_lyr</span>
<span id="cb27-102"><a href="#cb27-102" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb27-103"><a href="#cb27-103" aria-hidden="true" tabindex="-1"></a>        arcpy.management.SelectLayerByAttribute(</span>
<span id="cb27-104"><a href="#cb27-104" aria-hidden="true" tabindex="-1"></a>            obce_lyr,</span>
<span id="cb27-105"><a href="#cb27-105" aria-hidden="true" tabindex="-1"></a>            <span class="st">"NEW_SELECTION"</span>,</span>
<span id="cb27-106"><a href="#cb27-106" aria-hidden="true" tabindex="-1"></a>            <span class="st">"OBYVATEL &gt; 5000"</span></span>
<span id="cb27-107"><a href="#cb27-107" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb27-108"><a href="#cb27-108" aria-hidden="true" tabindex="-1"></a>        count_velke <span class="op">=</span> <span class="bu">int</span>(arcpy.management.GetCount(obce_lyr).getOutput(<span class="dv">0</span>))</span>
<span id="cb27-109"><a href="#cb27-109" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> count_velke <span class="op">&gt;</span> <span class="dv">0</span>:</span>
<span id="cb27-110"><a href="#cb27-110" aria-hidden="true" tabindex="-1"></a>            output_velke <span class="op">=</span> os.path.join(output_folder, </span>
<span id="cb27-111"><a href="#cb27-111" aria-hidden="true" tabindex="-1"></a>                                       <span class="ss">f"obce_</span><span class="sc">{</span>nazev_kraje<span class="sc">}</span><span class="ss">_velke.shp"</span>)</span>
<span id="cb27-112"><a href="#cb27-112" aria-hidden="true" tabindex="-1"></a>            arcpy.management.CopyFeatures(obce_lyr, output_velke)</span>
<span id="cb27-113"><a href="#cb27-113" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="ss">f"  Velké obce: </span><span class="sc">{</span>count_velke<span class="sc">}</span><span class="ss"> → </span><span class="sc">{</span>output_velke<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb27-114"><a href="#cb27-114" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb27-115"><a href="#cb27-115" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f"  OK - Kraj zpracován"</span>)</span>
<span id="cb27-116"><a href="#cb27-116" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb27-117"><a href="#cb27-117" aria-hidden="true" tabindex="-1"></a>    <span class="cf">except</span> <span class="pp">Exception</span> <span class="im">as</span> e:</span>
<span id="cb27-118"><a href="#cb27-118" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f"  CHYBA: </span><span class="sc">{</span><span class="bu">str</span>(e)<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb27-119"><a href="#cb27-119" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb27-120"><a href="#cb27-120" aria-hidden="true" tabindex="-1"></a>    <span class="cf">finally</span>:</span>
<span id="cb27-121"><a href="#cb27-121" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Vyčištění výběrů</span></span>
<span id="cb27-122"><a href="#cb27-122" aria-hidden="true" tabindex="-1"></a>        arcpy.management.SelectLayerByAttribute(obce_lyr, <span class="st">"CLEAR_SELECTION"</span>)</span>
<span id="cb27-123"><a href="#cb27-123" aria-hidden="true" tabindex="-1"></a>        arcpy.management.SelectLayerByAttribute(kraje_lyr, <span class="st">"CLEAR_SELECTION"</span>)</span>
<span id="cb27-124"><a href="#cb27-124" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-125"><a href="#cb27-125" aria-hidden="true" tabindex="-1"></a><span class="co"># Smazání vrstev</span></span>
<span id="cb27-126"><a href="#cb27-126" aria-hidden="true" tabindex="-1"></a>arcpy.management.Delete(obce_lyr)</span>
<span id="cb27-127"><a href="#cb27-127" aria-hidden="true" tabindex="-1"></a>arcpy.management.Delete(kraje_lyr)</span>
<span id="cb27-128"><a href="#cb27-128" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-129"><a href="#cb27-129" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">"</span> <span class="op">+</span> <span class="st">"="</span> <span class="op">*</span> <span class="dv">60</span>)</span>
<span id="cb27-130"><a href="#cb27-130" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"DÁVKOVÉ ZPRACOVÁNÍ DOKONČENO"</span>)</span>
<span id="cb27-131"><a href="#cb27-131" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"="</span> <span class="op">*</span> <span class="dv">60</span>)</span>
<span id="cb27-132"><a href="#cb27-132" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Výstupní složka: </span><span class="sc">{</span>output_folder<span class="sc">}</span><span class="ss">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<hr>
</section>
</section>
<section id="shrnutí" class="level1" data-number="8">
<h1 data-number="8"><span class="header-section-number">8</span> Shrnutí</h1>
<section id="co-jsme-se-naučili" class="level2" data-number="8.1">
<h2 data-number="8.1" class="anchored" data-anchor-id="co-jsme-se-naučili"><span class="header-section-number">8.1</span> Co jsme se naučili</h2>
<p><strong>Práce s vrstvami:</strong></p>
<ul>
<li><code>MakeFeatureLayer()</code> - vytváření vrstev v paměti</li>
<li><code>MakeTableView()</code> - vytváření tabulkových pohledů</li>
<li><code>SelectLayerByAttribute()</code> - SQL dotazy na vrstvy</li>
<li><code>Delete()</code> - mazání vrstev (odemknutí dat)</li>
</ul>
<p><strong>Práce s poli:</strong></p>
<ul>
<li><code>AddField()</code> - přidávání polí do tabulky</li>
<li><code>DeleteField()</code> - mazání polí</li>
<li><code>CalculateField()</code> - výpočet hodnot polí
<ul>
<li>Konstanty: <code>100</code>, <code>"text"</code></li>
<li>Odkaz na pole: <code>!NAZEV!</code></li>
<li>Geometrie: <code>!shape.area!</code>, <code>!shape.length!</code></li>
<li>Python výrazy: <code>.upper()</code>, <code>.lower()</code>, matematika</li>
</ul></li>
</ul>
<p><strong>Propojování tabulek:</strong></p>
<ul>
<li><code>AddJoin()</code> - dočasné propojení (v rámci vrstvy)</li>
<li><code>RemoveJoin()</code> - odstranění dočasného propojení</li>
<li><code>JoinField()</code> - trvalé připojení polí (mění zdrojová data!)</li>
<li>Prefixy u připojených polí: <code>!TabulkaA.pole!</code></li>
</ul>
<p><strong>Sumarizace:</strong></p>
<ul>
<li><code>Statistics()</code> - agregační funkce (SUM, MEAN, MIN, MAX, COUNT)</li>
<li><code>case_field</code> - sumarizace po skupinách</li>
<li>Kombinace více funkcí v jednom volání</li>
<li>Připojení výsledků zpět k původní tabulce</li>
</ul>
<p><strong>SQL syntaxe v ArcGIS:</strong></p>
<ul>
<li>Porovnání: <code>=</code>, <code>&lt;&gt;</code>, <code>&gt;</code>, <code>&lt;</code>, <code>&gt;=</code>, <code>&lt;=</code></li>
<li>Vzory: <code>LIKE '%text%'</code></li>
<li>Logika: <code>AND</code>, <code>OR</code>, <code>NOT</code></li>
<li>Seznamy: <code>IN (val1, val2, ...)</code></li>
</ul>
</section>
<section id="klíčové-koncepty" class="level2" data-number="8.2">
<h2 data-number="8.2" class="anchored" data-anchor-id="klíčové-koncepty"><span class="header-section-number">8.2</span> Klíčové koncepty</h2>
<ol type="1">
<li><p><strong>Vrstvy vs.&nbsp;datové sady</strong> - vrstva je dočasný pohled v paměti, datová sada je fyzický soubor</p></li>
<li><p><strong>Dočasné vs.&nbsp;trvalé propojení</strong> - AddJoin je dočasné (v rámci vrstvy), JoinField je trvalé (mění data)</p></li>
<li><p><strong>Uvozovky v CalculateField</strong> - vnější <code>'</code> pro celý výraz, vnitřní <code>"</code> pro textové konstanty</p></li>
<li><p><strong>Prefixy u připojených polí</strong> - <code>!NazevTabulky.NazevPole!</code> pro jednoznačnou identifikaci</p></li>
<li><p><strong>Statistics vytváří novou tabulku</strong> - výsledek je samostatná tabulka, ne modifikace původní</p></li>
<li><p><strong>Zamykání dat vrstvami</strong> - MakeFeatureLayer zamkne data, Delete odemkne</p></li>
</ol>
<hr>
</section>
</section>
<section id="domácí-úkol" class="level1" data-number="9">
<h1 data-number="9"><span class="header-section-number">9</span> Domácí úkol</h1>
<section id="varianta-a-základní" class="level2" data-number="9.1">
<h2 data-number="9.1" class="anchored" data-anchor-id="varianta-a-základní"><span class="header-section-number">9.1</span> Varianta A (základní)</h2>
<p><strong>Zadání:</strong> Analýza silniční sítě podle okresů.</p>
<p>Pro každý okres spočítejte: 1. Celkovou délku silnic (v km) 2. Průměrnou délku silničních úseků 3. Počet silničních úseků</p>
<p><strong>Data:</strong> <code>Silnice.shp</code>, <code>Okresy_VUSC.shp</code></p>
<p><strong>Postup:</strong> 1. Vypočítat délku silnic (LENGTH_KM) 2. Spatial Join - připojit kód okresu k silnicím 3. Statistics - sumarizovat podle okresů 4. Vyexportovat výsledky do CSV</p>
<p><strong>Odevzdejte:</strong> Skript <code>analyza_silnic.py</code> + CSV s výsledky</p>
</section>
<section id="varianta-b-střední" class="level2" data-number="9.2">
<h2 data-number="9.2" class="anchored" data-anchor-id="varianta-b-střední"><span class="header-section-number">9.2</span> Varianta B (střední)</h2>
<p><strong>Zadání:</strong> Kategorizace katastrů podle tvaru.</p>
<p>Vytvořte kategorie katastrů podle tvaru (PA_RATIO): - Kompaktní: PA_RATIO &lt; 0.001 - Střední: 0.001 &lt;= PA_RATIO &lt; 0.002 - Členité: PA_RATIO &gt;= 0.002</p>
<p>Pro každou kategorii: 1. Spočítejte počet katastrů 2. Spočítejte celkovou a průměrnou rozlohu 3. Vytvořte samostatný shapefile</p>
<p><strong>Data:</strong> <code>katastry_Liberec.shp</code></p>
<p><strong>Odevzdejte:</strong> Python Notebook <code>kategorizace_katastru.ipynb</code> + 3 shapefily</p>
</section>
<section id="varianta-c-pokročilá" class="level2" data-number="9.3">
<h2 data-number="9.3" class="anchored" data-anchor-id="varianta-c-pokročilá"><span class="header-section-number">9.3</span> Varianta C (pokročilá)</h2>
<p><strong>Zadání:</strong> Komplexní analýza krajinného pokryvu.</p>
<p>Pro každý okres v Libereckém kraji vytvořte report o krajinném pokryvu:</p>
<ol type="1">
<li><p>Pro každý typ pokryvu (Urban Atlas):</p>
<ul>
<li>Celková plocha</li>
<li>Počet plošek</li>
<li>Průměrná velikost plošky</li>
<li>PA_RATIO (průměr, min, max)</li>
</ul></li>
<li><p>Identifikujte dominantní typ pokryvu v každém okrese (největší plocha)</p></li>
<li><p>Spočítejte fragmentaci krajiny:</p>
<ul>
<li>Počet plošek / celková plocha</li>
</ul></li>
<li><p>Vytvořte HTML report s tabulkami a grafem (matplotlib)</p></li>
</ol>
<p><strong>Data:</strong> <code>UrbanAtlas_LK.shp</code>, <code>okresy.shp</code></p>
<p><strong>Bonusově:</strong> - Graf: zastoupení typů pokryvu v každém okrese (stacked bar chart) - Mapa: okresy obarvené podle dominantního typu pokryvu</p>
<p><strong>Odevzdejte:</strong> Notebook <code>analyza_krajiny.ipynb</code> + HTML report</p>
<hr>
</section>
</section>
<section id="poznámky-pro-vyučujícího" class="level1" data-number="10">
<h1 data-number="10"><span class="header-section-number">10</span> Poznámky pro vyučujícího</h1>
<section id="časový-plán-90-min" class="level2" data-number="10.1">
<h2 data-number="10.1" class="anchored" data-anchor-id="časový-plán-90-min"><span class="header-section-number">10.1</span> Časový plán (90 min)</h2>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Čas</th>
<th>Obsah</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>0-5 min</td>
<td>Úvod, rozdíl vrstvy vs.&nbsp;datová sada</td>
</tr>
<tr class="even">
<td>5-20 min</td>
<td>Úlohy 1-4 (MakeFeatureLayer, Select)</td>
</tr>
<tr class="odd">
<td>20-40 min</td>
<td>Úlohy 5-11 (AddField, CalculateField)</td>
</tr>
<tr class="even">
<td>40-60 min</td>
<td>Úlohy 12-16 (Join operace)</td>
</tr>
<tr class="odd">
<td>60-75 min</td>
<td>Úlohy 17-20 (Statistics)</td>
</tr>
<tr class="even">
<td>75-85 min</td>
<td>Úloha 21 v Notebooku - struktura řešení</td>
</tr>
<tr class="odd">
<td>85-90 min</td>
<td>Shrnutí, domácí úkol</td>
</tr>
</tbody>
</table>
</section>
<section id="klíčové-momenty" class="level2" data-number="10.2">
<h2 data-number="10.2" class="anchored" data-anchor-id="klíčové-momenty"><span class="header-section-number">10.2</span> Klíčové momenty</h2>
<section id="úlohy-1-4-5-20-min" class="level3" data-number="10.2.1">
<h3 data-number="10.2.1" class="anchored" data-anchor-id="úlohy-1-4-5-20-min"><span class="header-section-number">10.2.1</span> Úlohy 1-4 (5-20 min):</h3>
<ul>
<li><strong>ZDŮRAZNIT:</strong> Rozdíl mezi vrstvou (v paměti) a datovou sadou (na disku)</li>
<li><strong>UKÁZAT:</strong> MakeFeatureLayer krok za krokem</li>
<li><strong>DŮLEŽITÉ:</strong> Zamykání dat - vrstva zamkne datovou sadu</li>
<li><strong>PRAKTICKÉ:</strong> SQL syntaxe v ArcGIS (LIKE, AND, OR)</li>
<li><strong>VIZUÁLNÍ:</strong> Kontrola výběrů v ArcGIS Pro</li>
</ul>
</section>
<section id="úlohy-5-11-20-40-min" class="level3" data-number="10.2.2">
<h3 data-number="10.2.2" class="anchored" data-anchor-id="úlohy-5-11-20-40-min"><span class="header-section-number">10.2.2</span> Úlohy 5-11 (20-40 min):</h3>
<ul>
<li><strong>ZAČÍT:</strong> Jednoduchý příklad s AddField</li>
<li><strong>ZDŮRAZNIT:</strong> Uvozovky v CalculateField (<code>'"text"'</code>)</li>
<li><strong>UKÁZAT:</strong> Odkaz na pole pomocí <code>!POLE!</code></li>
<li><strong>PRAKTICKÉ:</strong> shape.area a shape.length</li>
<li><strong>TIP:</strong> Převody jednotek (dělení 1000000 pro km²)</li>
</ul>
</section>
<section id="úlohy-12-16-40-60-min" class="level3" data-number="10.2.3">
<h3 data-number="10.2.3" class="anchored" data-anchor-id="úlohy-12-16-40-60-min"><span class="header-section-number">10.2.3</span> Úlohy 12-16 (40-60 min):</h3>
<ul>
<li><strong>UKÁZAT:</strong> AddJoin krok za krokem</li>
<li><strong>DŮLEŽITÉ:</strong> Prefixy u připojených polí</li>
<li><strong>ZDŮRAZNIT:</strong> Rozdíl mezi AddJoin (dočasné) a JoinField (trvalé)</li>
<li><strong>POZOR:</strong> JoinField mění původní data!</li>
<li><strong>PRAKTICKÉ:</strong> Kdy použít který typ propojení</li>
</ul>
</section>
<section id="úlohy-17-20-60-75-min" class="level3" data-number="10.2.4">
<h3 data-number="10.2.4" class="anchored" data-anchor-id="úlohy-17-20-60-75-min"><span class="header-section-number">10.2.4</span> Úlohy 17-20 (60-75 min):</h3>
<ul>
<li><strong>UKÁZAT:</strong> Statistics bez case_field</li>
<li><strong>POROVNAT:</strong> Statistics s case_field</li>
<li><strong>DŮLEŽITÉ:</strong> Statistics vytváří NOVOU tabulku</li>
<li><strong>PRAKTICKÉ:</strong> Kombinace Statistics + JoinField</li>
<li><strong>TIP:</strong> Použití sql_clause pro řazení výsledků</li>
</ul>
</section>
<section id="úloha-21-75-85-min" class="level3" data-number="10.2.5">
<h3 data-number="10.2.5" class="anchored" data-anchor-id="úloha-21-75-85-min"><span class="header-section-number">10.2.5</span> Úloha 21 (75-85 min):</h3>
<ul>
<li><strong>PŘEPNOUT:</strong> Do Python Notebooku</li>
<li><strong>UKÁZAT:</strong> Strukturu komplexní analýzy (komentáře, výpisy průběhu)</li>
<li><strong>ZDŮRAZNIT:</strong> Kombinace technik z celé lekce</li>
<li><strong>NECHAT:</strong> Studenty adaptovat kód pro vlastní analýzu</li>
</ul>
</section>
</section>
<section id="rizika" class="level2" data-number="10.3">
<h2 data-number="10.3" class="anchored" data-anchor-id="rizika"><span class="header-section-number">10.3</span> Rizika</h2>
<ol type="1">
<li><strong>Studenti zapomínají vytvořit vrstvu před Select</strong>
<ul>
<li>Řešení: Zdůraznit, že Select pracuje s vrstvami, ne datovými sadami</li>
</ul></li>
<li><strong>Špatné uvozovky v CalculateField</strong>
<ul>
<li>Řešení: Napsat na tabuli vzor: <code>'"textová_konstanta"'</code></li>
<li>Ukázat chybovou hlášku a správné řešení</li>
</ul></li>
<li><strong>Nesprávné názvy polí v AddJoin</strong>
<ul>
<li>Řešení: Ukázat ListFields() pro výpis správných názvů s prefixy</li>
</ul></li>
<li><strong>Zapomínají smazat vrstvy (zamčená data)</strong>
<ul>
<li>Řešení: Důsledně ukazovat Delete() na konci každé sekce</li>
</ul></li>
<li><strong>Nedostatek času na Notebook úlohy</strong>
<ul>
<li>Řešení: Úloha 21 jen struktura, úloha 22 jako domácí úkol</li>
</ul></li>
<li><strong>SQL syntaxe - studenti míchají Python a SQL</strong>
<ul>
<li>Řešení: Zdůraznit rozdíl, ukázat příklady</li>
</ul></li>
</ol>
</section>
<section id="tipy" class="level2" data-number="10.4">
<h2 data-number="10.4" class="anchored" data-anchor-id="tipy"><span class="header-section-number">10.4</span> Tipy</h2>
<ul>
<li><strong>Vizuální kontrola:</strong> Po každé úloze zkontrolovat výsledek v atributové tabulce</li>
<li><strong>Data:</strong> Mít připravená data, otestovat všechny skripty předem</li>
<li><strong>ListFields():</strong> Používat často pro kontrolu názvů polí</li>
<li><strong>GetCount():</strong> Používat pro kontrolu počtu vybraných prvků</li>
<li><strong>Cheatsheet:</strong> Rozdat vytištěný cheatsheet se SQL syntaxí</li>
<li><strong>Propojení s GUI:</strong> Ukázat, jak se operace dělají v GUI vs.&nbsp;Python</li>
</ul>
</section>
<section id="běžné-chyby-studentů" class="level2" data-number="10.5">
<h2 data-number="10.5" class="anchored" data-anchor-id="běžné-chyby-studentů"><span class="header-section-number">10.5</span> Běžné chyby studentů</h2>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Zapomínají vytvořit vrstvu před Select</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>arcpy.management.SelectLayerByAttribute(<span class="st">"shapefile.shp"</span>, ...)  <span class="co"># CHYBA!</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Správně:</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>lyr <span class="op">=</span> arcpy.management.MakeFeatureLayer(<span class="st">"shapefile.shp"</span>, <span class="st">"layer"</span>)</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>arcpy.management.SelectLayerByAttribute(lyr, ...)</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Špatné uvozovky v CalculateField</span></span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>arcpy.management.CalculateField(tbl, <span class="st">"POLE"</span>, <span class="st">"text"</span>)  <span class="co"># CHYBA!</span></span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Správně:</span></span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a>arcpy.management.CalculateField(tbl, <span class="st">"POLE"</span>, <span class="st">'"text"'</span>)</span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. Zapomínají prefix u připojených polí</span></span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true" tabindex="-1"></a>arcpy.management.CalculateField(lyr, <span class="st">"VYSL"</span>, <span class="st">'!pole1! * !pole2!'</span>)  <span class="co"># CHYBA!</span></span>
<span id="cb28-14"><a href="#cb28-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Správně:</span></span>
<span id="cb28-15"><a href="#cb28-15" aria-hidden="true" tabindex="-1"></a>arcpy.management.CalculateField(lyr, <span class="st">"VYSL"</span>, <span class="st">'!tabulka1.pole1! * !tabulka2.pole2!'</span>)</span>
<span id="cb28-16"><a href="#cb28-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-17"><a href="#cb28-17" aria-hidden="true" tabindex="-1"></a><span class="co"># 4. Nesprávná jednotka u shape.area</span></span>
<span id="cb28-18"><a href="#cb28-18" aria-hidden="true" tabindex="-1"></a><span class="co"># shape.area je v m², ne v km²!</span></span>
<span id="cb28-19"><a href="#cb28-19" aria-hidden="true" tabindex="-1"></a>arcpy.management.CalculateField(tbl, <span class="st">"AREA"</span>, <span class="st">'!shape.area!'</span>)  <span class="co"># v m²</span></span>
<span id="cb28-20"><a href="#cb28-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Pro km²:</span></span>
<span id="cb28-21"><a href="#cb28-21" aria-hidden="true" tabindex="-1"></a>arcpy.management.CalculateField(tbl, <span class="st">"AREA_KM"</span>, <span class="st">'!shape.area!/1000000'</span>)</span>
<span id="cb28-22"><a href="#cb28-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-23"><a href="#cb28-23" aria-hidden="true" tabindex="-1"></a><span class="co"># 5. Zapomínají PYTHON3 u CalculateField s Python výrazy</span></span>
<span id="cb28-24"><a href="#cb28-24" aria-hidden="true" tabindex="-1"></a>arcpy.management.CalculateField(tbl, <span class="st">"POLE"</span>, <span class="st">'!TEXT!.upper()'</span>)  <span class="co"># CHYBA!</span></span>
<span id="cb28-25"><a href="#cb28-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Správně:</span></span>
<span id="cb28-26"><a href="#cb28-26" aria-hidden="true" tabindex="-1"></a>arcpy.management.CalculateField(tbl, <span class="st">"POLE"</span>, <span class="st">'!TEXT!.upper()'</span>, <span class="st">"PYTHON3"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="materiály-k-přípravě" class="level2" data-number="10.6">
<h2 data-number="10.6" class="anchored" data-anchor-id="materiály-k-přípravě"><span class="header-section-number">10.6</span> Materiály k přípravě</h2>
<ul class="task-list">
<li><label><input type="checkbox">Všechna data připravená a otestovaná</label></li>
<li><label><input type="checkbox">SQL syntaxe cheatsheet (vytisknout)</label></li>
<li><label><input type="checkbox">Diagram: vrstvy vs.&nbsp;datové sady</label></li>
<li><label><input type="checkbox">Diagram: AddJoin vs.&nbsp;JoinField</label></li>
<li><label><input type="checkbox">Tabulka: datové typy polí</label></li>
<li><label><input type="checkbox">Vzorový Notebook pro úlohu 21</label></li>
<li><label><input type="checkbox">Řešení všech domácích úkolů (A, B, C)</label></li>
<li><label><input type="checkbox">Screenshot: ListFields() s prefixy</label></li>
</ul>
<hr>
</section>
</section>
<section id="cheatsheet---atributové-operace" class="level1" data-number="11">
<h1 data-number="11"><span class="header-section-number">11</span> Cheatsheet - Atributové operace</h1>
<section id="vrstvy" class="level2" data-number="11.1">
<h2 data-number="11.1" class="anchored" data-anchor-id="vrstvy"><span class="header-section-number">11.1</span> Vrstvy</h2>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Vytvoření vrstvy</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>lyr <span class="op">=</span> arcpy.management.MakeFeatureLayer(<span class="st">"data.shp"</span>, <span class="st">"layer_name"</span>)</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Tabulkový pohled</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>view <span class="op">=</span> arcpy.management.MakeTableView(<span class="st">"table.dbf"</span>, <span class="st">"view_name"</span>, <span class="st">"WHERE_CLAUSE"</span>)</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Smazání vrstvy (odemkne data)</span></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>arcpy.management.Delete(lyr)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="výběry" class="level2" data-number="11.2">
<h2 data-number="11.2" class="anchored" data-anchor-id="výběry"><span class="header-section-number">11.2</span> Výběry</h2>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb30"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Nový výběr</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>arcpy.management.SelectLayerByAttribute(</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>    lyr, </span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"NEW_SELECTION"</span>, </span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"POLE &gt; 100 AND TEXT LIKE '%vzor%'"</span></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Zjištění počtu vybraných</span></span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>count <span class="op">=</span> <span class="bu">int</span>(arcpy.management.GetCount(lyr).getOutput(<span class="dv">0</span>))</span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Vyčištění výběru</span></span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a>arcpy.management.SelectLayerByAttribute(lyr, <span class="st">"CLEAR_SELECTION"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="pole" class="level2" data-number="11.3">
<h2 data-number="11.3" class="anchored" data-anchor-id="pole"><span class="header-section-number">11.3</span> Pole</h2>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Přidání pole</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>arcpy.management.AddField(table, <span class="st">"POLE"</span>, <span class="st">"DOUBLE"</span>)</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Smazání pole</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>arcpy.management.DeleteField(table, <span class="st">"POLE"</span>)</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Výpočet - konstanta</span></span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>arcpy.management.CalculateField(table, <span class="st">"POLE"</span>, <span class="dv">100</span>)</span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a>arcpy.management.CalculateField(table, <span class="st">"TEXT"</span>, <span class="st">'"konstanta"'</span>)</span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Výpočet - z jiného pole</span></span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a>arcpy.management.CalculateField(</span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true" tabindex="-1"></a>    table, </span>
<span id="cb31-14"><a href="#cb31-14" aria-hidden="true" tabindex="-1"></a>    <span class="st">"VYSLEDEK"</span>, </span>
<span id="cb31-15"><a href="#cb31-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">'!POLE1! + !POLE2!'</span>, </span>
<span id="cb31-16"><a href="#cb31-16" aria-hidden="true" tabindex="-1"></a>    <span class="st">"PYTHON3"</span></span>
<span id="cb31-17"><a href="#cb31-17" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb31-18"><a href="#cb31-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-19"><a href="#cb31-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Geometrie</span></span>
<span id="cb31-20"><a href="#cb31-20" aria-hidden="true" tabindex="-1"></a>arcpy.management.CalculateField(table, <span class="st">"AREA_KM"</span>, <span class="st">'!shape.area!/1000000'</span>, <span class="st">"PYTHON3"</span>)</span>
<span id="cb31-21"><a href="#cb31-21" aria-hidden="true" tabindex="-1"></a>arcpy.management.CalculateField(table, <span class="st">"LENGTH_KM"</span>, <span class="st">'!shape.length!/1000'</span>, <span class="st">"PYTHON3"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="propojení" class="level2" data-number="11.4">
<h2 data-number="11.4" class="anchored" data-anchor-id="propojení"><span class="header-section-number">11.4</span> Propojení</h2>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb32"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Dočasné propojení (v paměti)</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>lyr <span class="op">=</span> arcpy.management.MakeFeatureLayer(<span class="st">"data.shp"</span>, <span class="st">"layer"</span>)</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>arcpy.management.AddJoin(lyr, <span class="st">"KEY_FIELD"</span>, <span class="st">"table.dbf"</span>, <span class="st">"KEY_FIELD"</span>)</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Práce s připojenými poli: !table.field!</span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>arcpy.management.RemoveJoin(lyr, <span class="st">"table"</span>)</span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Trvalé připojení (mění data!)</span></span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>arcpy.management.JoinField(</span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">"data.shp"</span>, </span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">"KEY_FIELD"</span>, </span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">"table.dbf"</span>, </span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">"KEY_FIELD"</span>, </span>
<span id="cb32-13"><a href="#cb32-13" aria-hidden="true" tabindex="-1"></a>    [<span class="st">"POLE1"</span>, <span class="st">"POLE2"</span>]</span>
<span id="cb32-14"><a href="#cb32-14" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="sumarizace" class="level2" data-number="11.5">
<h2 data-number="11.5" class="anchored" data-anchor-id="sumarizace"><span class="header-section-number">11.5</span> Sumarizace</h2>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb33"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Celá tabulka</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>arcpy.analysis.Statistics(</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"input.shp"</span>,</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"output_stats"</span>,</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>    [[<span class="st">"POLE"</span>, <span class="st">"SUM"</span>], [<span class="st">"POLE"</span>, <span class="st">"MEAN"</span>]]</span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Po skupinách</span></span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a>arcpy.analysis.Statistics(</span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">"input.shp"</span>,</span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">"output_stats"</span>,</span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a>    [[<span class="st">"POLE"</span>, <span class="st">"SUM"</span>]],</span>
<span id="cb33-13"><a href="#cb33-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">"GROUP_FIELD"</span></span>
<span id="cb33-14"><a href="#cb33-14" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb33-15"><a href="#cb33-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-16"><a href="#cb33-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Funkce: SUM, MEAN, MIN, MAX, COUNT</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="sql-syntaxe" class="level2" data-number="11.6">
<h2 data-number="11.6" class="anchored" data-anchor-id="sql-syntaxe"><span class="header-section-number">11.6</span> SQL syntaxe</h2>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb34"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Porovnání</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="co">"POLE = 100"</span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a><span class="co">"POLE &lt;&gt; 100"</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a><span class="co">"POLE &gt; 100"</span></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a><span class="co">"POLE &lt;= 100"</span></span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Rozsah</span></span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a><span class="co">"POLE BETWEEN 10 AND 100"</span></span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Text</span></span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a><span class="co">"TEXT = 'Praha'"</span></span>
<span id="cb34-12"><a href="#cb34-12" aria-hidden="true" tabindex="-1"></a><span class="co">"TEXT LIKE '%vzor%'"</span>  <span class="co"># % = libovolné znaky</span></span>
<span id="cb34-13"><a href="#cb34-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-14"><a href="#cb34-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Logika</span></span>
<span id="cb34-15"><a href="#cb34-15" aria-hidden="true" tabindex="-1"></a><span class="co">"POLE1 &gt; 100 AND POLE2 &lt; 200"</span></span>
<span id="cb34-16"><a href="#cb34-16" aria-hidden="true" tabindex="-1"></a><span class="co">"TEXT = 'A' OR TEXT = 'B'"</span></span>
<span id="cb34-17"><a href="#cb34-17" aria-hidden="true" tabindex="-1"></a><span class="co">"NOT (POLE IS NULL)"</span></span>
<span id="cb34-18"><a href="#cb34-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-19"><a href="#cb34-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Seznam</span></span>
<span id="cb34-20"><a href="#cb34-20" aria-hidden="true" tabindex="-1"></a><span class="co">"POLE IN (1, 2, 3)"</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/vojta-bartak\.github\.io\/quarto_example\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>