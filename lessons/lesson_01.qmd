---
title: "Lekce 1: Ãšvod do automatizace GIS pomocÃ­ Model Builderu"
subtitle: "ProgramovÃ¡nÃ­ pro GIS"
author: "Fakulta Å¾ivotnÃ­ho prostÅ™edÃ­, ÄŒZU Praha"
date: "2025"
format:
  html:
    toc: true
    toc-depth: 3
    toc-title: "Obsah"
    number-sections: true
    code-fold: false
    code-tools: true
    theme: 
      - cosmo
      - custom.scss
    css: styles.css
  pdf:
    toc: true
    number-sections: true
    colorlinks: true
    geometry:
      - top=30mm
      - left=20mm
      - right=20mm
      - bottom=30mm
execute:
  echo: true
  warning: false
  message: false
---

::: {.callout-note}
## Informace o lekci

**ÄŒasovÃ¡ dotace:** 90 minut (1,5 hodiny)  
**PÅ™edpoklady:** ZÃ¡kladnÃ­ znalost ArcGIS Pro (GIS 1, GIS 2)  
**MateriÃ¡ly:** ArcGIS Pro projekt ke staÅ¾enÃ­ na [odkaz]
:::

# Ãšvod do kurzu {#sec-uvod}

## Co se v tomto kurzu nauÄÃ­te

Tento kurz vÃ¡s provede cestou od vizuÃ¡lnÃ­ho programovÃ¡nÃ­ v Model Builderu k psanÃ­ vlastnÃ­ch Python skriptÅ¯ pro automatizaci GIS Ãºloh.

::: {.panel-tabset}

### TÃ½dny 1-2
**Model Builder â†’ Python**

- Ãšvod do automatizace
- PrvnÃ­ pohled na Python kÃ³d
- Export modelÅ¯

### TÃ½dny 3-5
**ZÃ¡klady programovÃ¡nÃ­ v Pythonu**

- PromÄ›nnÃ©, cykly, funkce
- PrÃ¡ce se soubory
- AlgoritmickÃ© myÅ¡lenÃ­

### TÃ½dny 6-9
**ArcPy - Python pro GIS**

- Automatizace analÃ½z
- TabulkovÃ© operace
- RastrovÃ© analÃ½zy

### TÃ½dny 10-11
**PokroÄilÃ© techniky**

- Kurzory
- Geometrie
- Tvorba nÃ¡strojÅ¯ s GUI

### TÃ½den 12
**ZÃ¡vÄ›reÄnÃ½ projekt**

- VlastnÃ­ nÃ¡stroj
- Å˜eÅ¡enÃ­ reÃ¡lnÃ©ho problÃ©mu

:::

## ProÄ tento kurz?

UÅ¾ umÃ­te pracovat s ArcGIS Pro - znÃ¡te nÃ¡stroje, dokÃ¡Å¾ete provÃ¡dÄ›t analÃ½zy, vytvÃ¡Å™et mapy. **NynÃ­ se nauÄÃ­te GIS automatizovat a programovat.**

::: {.callout-tip}
## PÅ™Ã­klady z praxe

ğŸ”„ **OpakujÃ­cÃ­ se Ãºlohy**  
"KaÅ¾dÃ½ mÄ›sÃ­c musÃ­me aktualizovat mapy dostupnosti zdravotnickÃ½ch zaÅ™Ã­zenÃ­ pro 14 krajÅ¯."  
â†’ **Å˜eÅ¡enÃ­:** Napsat skript, kterÃ½ to udÄ›lÃ¡ automaticky za 5 minut.

ğŸ“Š **VelkÃ© mnoÅ¾stvÃ­ dat**  
"PotÅ™ebujeme zpracovat 500 rastrovÃ½ch snÃ­mkÅ¯ z druÅ¾ice."  
â†’ **Å˜eÅ¡enÃ­:** Python skript bÄ›Å¾Ã­cÃ­ pÅ™es noc, vy rÃ¡no kontrolujete vÃ½sledky.

ğŸ¯ **SloÅ¾itÃ© analÃ½zy**  
"Chceme optimalizovat umÃ­stÄ›nÃ­ vÄ›trnÃ½ch elektrÃ¡ren na zÃ¡kladÄ› 10 rÅ¯znÃ½ch kritÃ©riÃ­."  
â†’ **Å˜eÅ¡enÃ­:** VlastnÃ­ nÃ¡stroj s GUI, kterÃ½ mÅ¯Å¾e pouÅ¾Ã­vat kdokoli v tÃ½mu.
:::

## Struktura vÃ½uky

**KaÅ¾dÃ½ tÃ½den:**

- 2Ã— 1,5 hodiny praktickÃ½ch cviÄenÃ­
- Kombinace vÃ½kladu + samostatnÃ© prÃ¡ce
- VolitelnÃ© Ãºkoly k procviÄenÃ­

**HodnocenÃ­:**

- Aktivita na cviÄenÃ­ch
- PrÅ¯bÄ›Å¾nÃ© Ãºkoly (malÃ©, tÃ½dennÃ­)
- **ZÃ¡vÄ›reÄnÃ½ projekt** (hlavnÃ­ ÄÃ¡st hodnocenÃ­)
  - FunkÄnÃ­ Python nÃ¡stroj
  - Å˜eÅ¡Ã­ reÃ¡lnÃ½ GIS problÃ©m
  - S dokumentacÃ­

**NÃ¡stroje:**

- ArcGIS Pro (mÃ¡te nainstalovanÃ©?)
- Python 3.x (souÄÃ¡st ArcGIS Pro)
- TextovÃ½ editor (dnes ukÃ¡Å¾eme)
- PozdÄ›ji: Jupyter Notebook, VS Code

# ProÄ automatizovat GIS Ãºlohy? {#sec-automatizace}

## MotivaÄnÃ­ pÅ™Ã­klad

PÅ™edstavte si, Å¾e mÃ¡te tuto Ãºlohu:

::: {.callout-warning}
## ZadÃ¡nÃ­

SpoÄÃ­tejte vzdÃ¡lenost od kaÅ¾dÃ©ho okresu v ÄŒR k nejbliÅ¾Å¡Ã­ dÃ¡lnici a vytvoÅ™te mapu s vÃ½sledky.
:::

### Å˜eÅ¡enÃ­ ruÄnÄ›

1. Vybrat okres Praha
2. Spustit nÃ¡stroj Near
3. Zapsat vÃ½sledek
4. Vybrat okres BeneÅ¡ov
5. Spustit nÃ¡stroj Near
6. Zapsat vÃ½sledek
7. ... opakovat 75Ã—
8. VytvoÅ™it mapu

â±ï¸ **ÄŒas:** 2-3 hodiny  
ğŸ˜« **Riziko chyby:** VysokÃ© (Ãºnava, pÅ™eklep, zapomenutÃ½ okres)

### Å˜eÅ¡enÃ­ s automatizacÃ­

1. VytvoÅ™it model/skript
2. Spustit

â±ï¸ **ÄŒas:** 5 minut bÄ›hu + 30 minut na pÅ™Ã­pravu modelu  
âœ… **Riziko chyby:** MinimÃ¡lnÃ­  
ğŸ”„ **Bonus:** PÅ™Ã­Å¡tÄ› to pouÅ¾ijete znovu!

## VÃ½hody automatizace

| VÃ½hoda | Popis | PÅ™Ã­klad |
|--------|-------|---------|
| â±ï¸ **ÄŒasovÃ¡ Ãºspora** | TisÃ­ce opakovÃ¡nÃ­ za vÃ¡s | AnalÃ½za pro 77 okresÅ¯ Ã— 10 parametrÅ¯ = 770 opakovÃ¡nÃ­ |
| ğŸ¯ **PÅ™esnost** | Å½Ã¡dnÃ© chyby z nepozornosti | VÅ¾dy stejnÃ½ postup, stejnÃ© vÃ½sledky |
| ğŸ“ **Dokumentace** | Workflow je viditelnÃ½ | Model = dokumentace postupu |
| ğŸ”„ **Opakovatelnost** | Snadno spustit znovu | Aktualizace dat? Jeden klik. |
| ğŸ”§ **Parametrizace** | SnadnÃ¡ zmÄ›na nastavenÃ­ | ZmÄ›nit vzdÃ¡lenost z 500m na 1000m |
| ğŸ¤ **SdÃ­lenÃ­** | KolegovÃ© mohou pouÅ¾Ã­t | VytvoÅ™it nÃ¡stroj pro celÃ½ tÃ½m |

: PÅ™ehled vÃ½hod automatizace {#tbl-vyhody}

## Kdy automatizovat?

::: {.columns}

::: {.column width="48%"}
### âœ… ANO - automatizujte kdyÅ¾:

- Ãšlohu budete opakovat vÃ­c neÅ¾ 2-3Ã—
- Ãšloha mÃ¡ jasnÃ© kroky
- Pracujete s mnoha datovÃ½mi sadami
- PotÅ™ebujete konzistentnÃ­ vÃ½sledky
- Chcete uÅ¡etÅ™it Äas (i pÅ™es pÅ™Ã­pravu)
:::

::: {.column width="4%"}
:::

::: {.column width="48%"}
### âŒ NE - neautomatizujte kdyÅ¾:

- Ãšloha je jednorÃ¡zovÃ¡ a jednoduchÃ¡
- TrvÃ¡ 2 minuty
- PÅ™Ã­prava automatizace by trvala dÃ©le neÅ¾ ruÄnÃ­ prÃ¡ce
- NenÃ­ jasnÃ½ postup (jeÅ¡tÄ› experimentujete)
:::

:::

# Model Builder - vizuÃ¡lnÃ­ programovÃ¡nÃ­ {#sec-modelbuilder}

## Co je Model Builder?

**Model Builder** je nÃ¡stroj v ArcGIS Pro pro grafickÃ© sestavovÃ¡nÃ­ workflow (pracovnÃ­ch postupÅ¯). Je to forma **"programovÃ¡nÃ­ bez psanÃ­ kÃ³du"** - mÃ­sto textovÃ½ch pÅ™Ã­kazÅ¯ sklÃ¡dÃ¡te nÃ¡stroje jako puzzle.

## ZÃ¡kladnÃ­ koncepty

Model se sklÃ¡dÃ¡ ze tÅ™Ã­ typÅ¯ prvkÅ¯:

```{mermaid}
%%| fig-cap: "ZÃ¡kladnÃ­ struktura modelu"
%%| label: fig-model-struktura

flowchart LR
    A[VstupnÃ­ data] --> B[NÃ¡stroj/Proces]
    B --> C[VÃ½stupnÃ­ data]
    
    style A fill:#6baed6
    style B fill:#fee391
    style C fill:#6baed6
```

- **ğŸ”µ ModrÃ½ ovÃ¡l** = Data (vrstvy, tabulky, rastry)
- **ğŸŸ¡ Å½lutÃ½ obdÃ©lnÃ­k** = NÃ¡stroj (Buffer, Clip, Intersect, ...)
- **â¡ï¸ Å ipky** = Tok dat (co se pouÅ¾Ã­vÃ¡ kam)

## JednoduchÃ½ pÅ™Ã­klad

**Ãšloha:** VytvoÅ™it 500m buffer kolem Å™ek

```{mermaid}
%%| fig-cap: "JednoduchÃ½ model - Buffer Å™ek"

flowchart LR
    A[Å˜eky.shp] --> B[Buffer 500m]
    B --> C[Reky_buffer_500m.shp]
    
    style A fill:#6baed6
    style B fill:#fee391
    style C fill:#6baed6
```

**Co se dÄ›je:**

1. Model naÄte vrstvu Å™ek
2. SpustÃ­ nÃ¡stroj Buffer s parametrem 500 metrÅ¯
3. UloÅ¾Ã­ vÃ½sledek

## Jak vytvoÅ™it model

::: {.callout-note collapse="true"}
## Krok za krokem - VytvoÅ™enÃ­ modelu

1. **OtevÅ™Ã­t ModelBuilder:**
   - V ArcGIS Pro: Insert â†’ New Toolbox
   - PravÃ½ klik na toolbox â†’ New â†’ Model

2. **PÅ™idat vstupnÃ­ data:**
   - PÅ™etÃ¡hnout vrstvu z Contents pane do modelu
   - NEBO: Insert â†’ Variable â†’ [typ dat]

3. **PÅ™idat nÃ¡stroj:**
   - PÅ™etÃ¡hnout z ArcToolbox
   - NEBO: Insert â†’ Tool â†’ vybrat nÃ¡stroj

4. **Propojit:**
   - PÅ™etÃ¡hnout Å¡ipku z dat do nÃ¡stroje
   - Nastavit parametry nÃ¡stroje (dvojklik)

5. **Spustit:**
   - NejdÅ™Ã­v uloÅ¾it! (File â†’ Save)
   - Pak Run (tlaÄÃ­tko â–¶ï¸)
:::

# PraktickÃ¡ Ãºloha {#sec-uloha}

## ZadÃ¡nÃ­

::: {.callout-important}
## AnalytickÃ¡ Ãºloha

**JakÃ© je zastoupenÃ­ lesÅ¯ v ochrannÃ©m pÃ¡smu 500 metrÅ¯ kolem dÃ¡lnic v okrese JindÅ™ichÅ¯v Hradec?**
:::

### ProÄ tato Ãºloha?

- âœ… **RealistickÃ¡** - ochrannÃ¡ pÃ¡sma, hlukovÃ© mapovÃ¡nÃ­, dostupnost
- âœ… **JednoduchÃ¡** - pochopitelnÃ© kroky
- âœ… **RozÅ¡iÅ™itelnÃ¡** - pozdÄ›ji pÅ™idÃ¡me dalÅ¡Ã­ parametry
- âœ… **UkÃ¡Å¾e limity** Model Builderu â†’ motivace pro Python

## Data {#sec-data}

VÅ¡echna data jsou pÅ™ipravena v projektu ArcGIS Pro, kterÃ½ si stÃ¡hnete z [odkaz].

::: {.panel-tabset}

### Okresy
`okresy` - polygony okresÅ¯ ÄŒR

- SouÅ™adnicovÃ½ systÃ©m: EPSG:3035
- KlÃ­ÄovÃ© pole: NAZ_LAU1 (nÃ¡zev okresu)

### DÃ¡lnice
`dalnice` - linie dÃ¡lnic ÄŒR

- SouÅ™adnicovÃ½ systÃ©m: EPSG:3035
- Geometrie: polyline

### KrajinnÃ½ pokryv
`clc_2018` - rastr Corine Land Cover

- SouÅ™adnicovÃ½ systÃ©m: EPSG:3035
- Hodnoty:
  - 1 = UrbanizovanÃ© plochy
  - 2 = ZemÄ›dÄ›lskÃ¡ pÅ¯da
  - 3 = Lesy â­
  - 4 = MokÅ™ady
  - 5 = VodnÃ­ plochy

:::

::: {.callout-note}
**PoznÃ¡mka:** Data jsou uÅ¾ transformovÃ¡na do jednotnÃ©ho souÅ™adnicovÃ©ho systÃ©mu ETRS89 LAEA (EPSG: 3035).
:::

## AnalytickÃ½ postup

**CÃ­l:** Zjistit, kolik procent plochy okresu JindÅ™ichÅ¯v Hradec v pÃ¡smu 500m od dÃ¡lnic tvoÅ™Ã­ lesy.

```{mermaid}
%%| fig-cap: "Workflow analytickÃ©ho postupu"
%%| label: fig-workflow

flowchart TD
    A[Okresy] --> B[Vybrat JH]
    B --> C[Okres JH]
    D[DÃ¡lnice] --> E[OÅ™Ã­znout okresem]
    C --> E
    E --> F[DÃ¡lnice v JH]
    F --> G[Buffer 500m]
    G --> H[PÃ¡smo 500m]
    I[CLC rastr] --> J[BinÃ¡rnÃ­ rastr lesÅ¯]
    H --> K[ZÃ³nÃ¡lnÃ­ statistika]
    J --> K
    K --> L[VÃ½sledek]
    
    style C fill:#6baed6
    style F fill:#6baed6
    style H fill:#6baed6
    style J fill:#74c476
    style L fill:#fd8d3c
```

## Krok za krokem {#sec-kroky}

### PÅ™Ã­prava

1. OtevÅ™ete ArcGIS Pro projekt `Lekce1_AutomatizaceGIS.aprx`
2. ProhlÃ©dnÄ›te si data v mapÄ›
3. VytvoÅ™te novÃ½ toolbox:
   - PravÃ½ klik v Catalog Pane â†’ New â†’ Toolbox
   - Pojmenujte: `Lekce1_Tools.atbx`
4. VytvoÅ™te novÃ½ model:
   - PravÃ½ klik na toolbox â†’ New â†’ Model
   - Pojmenujte: `Analyza_Lesu_v_Pasmu`

### Krok 1: VÃ½bÄ›r okresu JindÅ™ichÅ¯v Hradec {#sec-krok1}

**NÃ¡stroj:** Make Feature Layer

::: {.callout-tip}
## ProÄ ne Select?

NÃ¡stroj *Select* vytvÃ¡Å™Ã­ novou datovou sadu na disku. *Make Feature Layer* vytvÃ¡Å™Ã­ pouze doÄasnou vrstvu v pamÄ›ti, coÅ¾ je rychlejÅ¡Ã­ a efektivnÄ›jÅ¡Ã­.
:::

**Postup:**

1. V modelu: Insert â†’ Tool â†’ vyhledat "Make Feature Layer"
2. PÅ™etÃ¡hnÄ›te vrstvu `okresy` do modelu
3. Propojte `okresy` s nÃ¡strojem Make Feature Layer
4. Dvojklik na nÃ¡stroj â†’ nastavit parametry:
   - **Input Features:** okresy
   - **Output Layer:** `okres_jh_layer`
   - **Expression:** KliknÄ›te SQL ğŸ”§

```sql
NAZ_LAU1 = 'JindÅ™ichÅ¯v Hradec'
```

5. OK

**Kontrola:** ğŸ”µ `okresy` â†’ ğŸŸ¡ `Make Feature Layer` â†’ ğŸ”µ `okres_jh_layer`

### Krok 2: OÅ™ezÃ¡nÃ­ dÃ¡lnic na okres {#sec-krok2}

**NÃ¡stroj:** Clip

**ÃšÄel:** Z celÃ© vrstvy dÃ¡lnic chceme jen Ãºseky, kterÃ© jsou v okrese JH.

**Postup:**

1. Insert â†’ Tool â†’ "Clip"
2. PÅ™etÃ¡hnÄ›te vrstvu `dalnice` do modelu
3. Propojte:
   - `dalnice` â†’ Clip (jako Input Features)
   - `okres_jh_layer` â†’ Clip (jako Clip Features)
4. Dvojklik na Clip â†’ parametry:
   - **Input Features:** dalnice
   - **Clip Features:** okres_jh_layer
   - **Output:** `dalnice_clip`
5. OK

### Krok 3: VytvoÅ™enÃ­ ochrannÃ©ho pÃ¡sma (buffer) {#sec-krok3}

**NÃ¡stroj:** Buffer

::: {.callout-important}
## DÅ¯leÅ¾itÃ© nastavenÃ­

**Dissolve Type = ALL** (spojÃ­ vÅ¡echny buffery do jednoho)
:::

**Postup:**

1. Insert â†’ Tool â†’ "Buffer"
2. Propojte `dalnice_clip` â†’ Buffer
3. Dvojklik na Buffer â†’ parametry:
   - **Input Features:** dalnice_clip
   - **Output:** `buffer_500m`
   - **Distance:** 500 Meters
   - **Dissolve Type:** **ALL** â† dÅ¯leÅ¾itÃ©!
   - Side Type: FULL
   - End Type: ROUND
4. OK

::: {.callout-note collapse="true"}
## ProÄ Dissolve ALL?

Bez dissolve bychom mÄ›li desÃ­tky pÅ™ekrÃ½vajÃ­cÃ­ch se bufferÅ¯ (jeden pro kaÅ¾dÃ½ Ãºsek dÃ¡lnice). S ALL se vÅ¡echny spojÃ­ do jednoho (multi)polygonu.
:::

### Krok 4: VytvoÅ™enÃ­ binÃ¡rnÃ­ho rastru lesÅ¯ {#sec-krok4}

**NÃ¡stroj:** Equal To (Spatial Analyst)

**ÃšÄel:** Z CLC rastru (hodnoty 1,2,3,4,5) vytvoÅ™it rastr s hodnotami 0/1, kde 1 = les.

**Postup:**

1. Insert â†’ Tool â†’ "Equal To" (v kategorii Spatial Analyst â†’ Math â†’ Logical)
2. PÅ™etÃ¡hnÄ›te rastr `clc_2018` do modelu
3. Propojte `clc_2018` â†’ Equal To
4. Dvojklik na Equal To:
   - **Input raster:** clc_2018
   - **Input value:** 3 (kÃ³d pro lesy)
   - **Output:** `lesy_binarni`
5. OK

::: {.callout-note}
## Co se stane?

Rastr bude mÃ­t hodnotu 1 tam, kde je les (CLC=3), a hodnotu 0 vÅ¡ude jinde.
:::

### Krok 5: ZonÃ¡lnÃ­ statistika {#sec-krok5}

**NÃ¡stroj:** Zonal Statistics as Table

**ÃšÄel:** SpoÄÃ­tat prÅ¯mÄ›r z binÃ¡rnÃ­ho rastru v rÃ¡mci bufferu. 

::: {.callout-tip}
## MatematickÃ½ trik

PrÅ¯mÄ›r z nul a jedniÄek = podÃ­l jedniÄek = relativnÃ­ plocha lesÅ¯!

Pokud je prÅ¯mÄ›r 0.35, znamenÃ¡ to, Å¾e 35% pixelÅ¯ mÃ¡ hodnotu 1 (les).
:::

**Postup:**

1. Insert â†’ Tool â†’ "Zonal Statistics as Table"
2. Propojte:
   - `buffer_500m` â†’ Zonal Statistics (jako Input Zone Data)
   - `lesy_binarni` â†’ Zonal Statistics (jako Input Value Raster)
3. Dvojklik na Zonal Statistics:
   - **Input Zone Data:** buffer_500m
   - **Zone Field:** OBJECTID
   - **Input Value Raster:** lesy_binarni
   - **Output Table:** `vysledek_lesy.dbf`
   - **Statistics Type:** MEAN (prÅ¯mÄ›r)
   - **Ignore NoData:** zaÅ¡krtnuto
4. OK

### UloÅ¾enÃ­ a spuÅ¡tÄ›nÃ­ modelu {#sec-spusteni}

::: {.panel-tabset}

### 1. UloÅ¾it
File â†’ Save (Ctrl+S)

### 2. OvÄ›Å™it
Model â†’ Validate Entire Model

Pokud je vÅ¡e OK, vÅ¡echny nÃ¡stroje budou barevnÃ© (ne Å¡edÃ©)

### 3. Spustit
KliknÄ›te na â–¶ï¸ Run

### 4. PoÄkat
Model bÄ›Å¾Ã­, sledujte progress

### 5. VÃ½sledek
OtevÅ™ete `vysledek_lesy.dbf`

:::

## Interpretace vÃ½sledku {#sec-vysledek}

V tabulce `vysledek_lesy.dbf` najdete sloupec **MEAN**.

**VÃ½znam:**

- MEAN = 0.354 â†’ **35.4% plochy v pÃ¡smu tvoÅ™Ã­ lesy**
- MEAN = 0.205 â†’ **20.5% plochy v pÃ¡smu tvoÅ™Ã­ lesy**

::: {.callout-note}
## ProÄ to funguje?

PrÅ¯mÄ›r z binÃ¡rnÃ­ho rastru (0/1) v danÃ© zÃ³nÄ› = podÃ­l pixelÅ¯ s hodnotou 1 = relativnÃ­ plocha lesÅ¯.

Pro procenta: **MEAN Ã— 100**
:::

### ManuÃ¡lnÃ­ dopoÄÃ­tÃ¡nÃ­

VÃ½slednou hodnotu MEAN musÃ­me **ruÄnÄ› vynÃ¡sobit 100**, abychom dostali procenta.

**Postup:**

1. OtevÅ™Ã­t tabulku `vysledek_lesy.dbf`
2. NajÃ­t hodnotu MEAN (napÅ™. 0.354)
3. KalkulaÄka: 0.354 Ã— 100 = **35.4%**
4. Zapsat si vÃ½sledek

::: {.callout-warning}
## ProblÃ©m?

Ano! MusÃ­me poÄÃ­tat ruÄnÄ›. Co kdybychom chtÄ›li analyzovat vÅ¡ech 77 okresÅ¯? 77Ã— otevÅ™Ã­t tabulku a poÄÃ­tat...

**Diskuze:**  
"Dalo by se to automatizovat v Model Builderu?"  
â†’ Ano, pomocÃ­ Calculate Field, ale komplikovanÃ©.  
â†’ V Pythonu? JednoduchÃ½ vÃ½poÄet!
:::

```python
# Python Å™eÅ¡enÃ­
mean_value = 0.354
procento = mean_value * 100
print(f"PodÃ­l lesÅ¯: {procento:.1f}%")
```

# Export modelu do Pythonu {#sec-export}

## ProÄ exportovat?

Model Builder je skvÄ›lÃ½ pro vizualizaci workflow, ale mÃ¡ limity:

- TÄ›Å¾ko se kopÃ­rujÃ­ ÄÃ¡sti modelu
- SloÅ¾itÃ© sdÃ­lenÃ­ (musÃ­te sdÃ­let toolbox)
- OmezenÃ© moÅ¾nosti logiky (podmÃ­nky, cykly)

**Python** nÃ¡m dÃ¡vÃ¡:

- âœ… TextovÃ½ soubor (snadno sdÃ­litelnÃ½, verzovatelnÃ½)
- âœ… MoÅ¾nost Ãºprav v textovÃ©m editoru
- âœ… PÅ™idÃ¡nÃ­ vlastnÃ­ logiky
- âœ… SpuÅ¡tÄ›nÃ­ mimo ArcGIS Pro

## Jak exportovat

1. V Model Builderu: **Model â†’ Export â†’ To Python Script**
2. UloÅ¾it jako: `model_export.py`
3. Vybrat lokaci a uloÅ¾it

## ProhlÃ©dnutÃ­ Python kÃ³du {#sec-python-kod}

OtevÅ™ete exportovanÃ½ soubor v textovÃ©m editoru:

- **Notepad++** (doporuÄeno - zvÃ½razÅˆuje syntax)
- **VS Code** (pokud mÃ¡te)
- **PoznÃ¡mkovÃ½ blok** (funguje, ale bez barev)

### Struktura kÃ³du

```{.python filename="model_export.py"}
# -*- coding: utf-8 -*-
# ---------------------------------------------------------------------------
# model_export.py
# Created on: 2025-01-15
# Description: AnalÃ½za lesÅ¯ v pÃ¡smu kolem dÃ¡lnic
# ---------------------------------------------------------------------------

# Import knihovny ArcPy
import arcpy

# LokÃ¡lnÃ­ promÄ›nnÃ© (cesty k datÅ¯m)
okresy = "okresy"
dalnice = "dalnice"
clc_2018 = "clc_2018"
okres_jh_layer = "okres_jh_layer"
dalnice_clip = "C:\\Data\\dalnice_clip.shp"
buffer_500m = "C:\\Data\\buffer_500m.shp"
lesy_binarni = "C:\\Data\\lesy_binarni.tif"
vysledek_lesy = "C:\\Data\\vysledek_lesy.dbf"

# PROCES 1: Make Feature Layer - vÃ½bÄ›r okresu
arcpy.MakeFeatureLayer_management(
    in_features=okresy,
    out_layer=okres_jh_layer,
    where_clause="NAZ_LAU1 = 'JindÅ™ichÅ¯v Hradec'"
)

# PROCES 2: Clip - oÅ™ezÃ¡nÃ­ dÃ¡lnic
arcpy.Clip_analysis(
    in_features=dalnice,
    clip_features=okres_jh_layer,
    out_feature_class=dalnice_clip
)

# PROCES 3: Buffer - ochrannÃ© pÃ¡smo
arcpy.Buffer_analysis(
    in_features=dalnice_clip,
    out_feature_class=buffer_500m,
    buffer_distance_or_field="500 Meters",
    dissolve_option="ALL"
)

# PROCES 4: Equal To - binÃ¡rnÃ­ rastr lesÅ¯
arcpy.gp.EqualTo_sa(
    in_raster_or_constant1=clc_2018,
    in_raster_or_constant2="3",
    out_raster=lesy_binarni
)

# PROCES 5: Zonal Statistics as Table
arcpy.gp.ZonalStatisticsAsTable_sa(
    in_zone_data=buffer_500m,
    zone_field="OBJECTID",
    in_value_raster=lesy_binarni,
    out_table=vysledek_lesy,
    statistics_type="MEAN"
)

print("Model dokonÄen!")
```

## Co vidÃ­me v kÃ³du? {#sec-rozbor-kodu}

### 1. Import ArcPy

```python
import arcpy
```

::: {.callout-note}
**VÃ½znam:** "Chci pouÅ¾Ã­t nÃ¡stroje ArcGIS v Pythonu"  
**Analogie:** Jako kdyÅ¾ v ArcGIS Pro otevÅ™ete ArcToolbox - zÃ­skÃ¡te pÅ™Ã­stup k nÃ¡strojÅ¯m.
:::

### 2. PromÄ›nnÃ©

```python
okresy = "okresy"
vzdalenost = "500 Meters"
```

::: {.callout-tip}
**VÃ½hoda promÄ›nnÃ½ch:** MÅ¯Å¾eme snadno zmÄ›nit na jednom mÃ­stÄ›:

```python
vzdalenost = "1000 Meters"  # ZmÄ›na parametru!
```
:::

### 3. VolÃ¡nÃ­ nÃ¡stroje

```python
arcpy.Buffer_analysis(
    in_features=dalnice_clip,
    out_feature_class=buffer_500m,
    buffer_distance_or_field="500 Meters",
    dissolve_option="ALL"
)
```

**SrovnÃ¡nÃ­ s Model Builderem:**

| Model Builder | Python |
|---------------|--------|
| Å½lutÃ½ obdÃ©lnÃ­k "Buffer" | `arcpy.Buffer_analysis()` |
| Dialog s parametry | Parametry v zÃ¡vorkÃ¡ch |
| PropojenÃ­ Å¡ipkou | PromÄ›nnÃ© jako parametry |
| KliknutÃ­ na Run | `python script.py` |

: SrovnÃ¡nÃ­ Model Builder vs. Python {#tbl-srovnani}

::: {.callout-important}
## KlÃ­ÄovÃ© poznÃ¡nÃ­

Je to STEJNÃ‰, jen jinak zapsanÃ©!
:::

## InteraktivnÃ­ prozkoumÃ¡nÃ­ {#sec-prozkoumani}

::: {.callout-note collapse="true"}
## Ãškol 1: NajdÄ›te v kÃ³du

**Kde je napsÃ¡no "JindÅ™ichÅ¯v Hradec"?**

```python
where_clause="NAZ_LAU1 = 'JindÅ™ichÅ¯v Hradec'"
```
:::

::: {.callout-note collapse="true"}
## Ãškol 2: NajdÄ›te v kÃ³du

**Kde je vzdÃ¡lenost bufferu?**

```python
buffer_distance_or_field="500 Meters"
```
:::

::: {.callout-note collapse="true"}
## Ãškol 3: NajdÄ›te v kÃ³du

**Kde se vytvÃ¡Å™Ã­ binÃ¡rnÃ­ rastr lesÅ¯?**

```python
arcpy.gp.EqualTo_sa(
    in_raster_or_constant1=clc_2018,
    in_raster_or_constant2="3",  # â† tady je kÃ³d pro lesy
    out_raster=lesy_binarni
)
```
:::

## Co by se dalo snadno zmÄ›nit v Pythonu? {#sec-zmeny}

::: {.panel-tabset}

### ZmÄ›na vzdÃ¡lenosti

```python
# MÃ­sto:
buffer_distance_or_field="500 Meters"

# MÅ¯Å¾eme:
vzdalenost = 1000  # metry
buffer_distance_or_field=f"{vzdalenost} Meters"
```

### JinÃ½ okres

```python
# MÃ­sto:
where_clause="NAZ_LAU1 = 'JindÅ™ichÅ¯v Hradec'"

# MÅ¯Å¾eme:
okres = "Praha"
where_clause=f"NAZ_LAU1 = '{okres}'"
```

### AutomatickÃ½ vÃ½poÄet procent

```python
# Po Zonal Statistics pÅ™idat:
import arcpy

# PÅ™eÄÃ­st vÃ½sledek
with arcpy.da.SearchCursor(vysledek_lesy, ["MEAN"]) as cursor:
    for row in cursor:
        mean_value = row[0]
        procento = mean_value * 100
        print(f"PodÃ­l lesÅ¯: {procento:.1f}%")
```

:::

::: {.callout-tip}
## VidÃ­te?

V Pythonu mÅ¯Å¾eme snadno:

- MÄ›nit parametry
- PÅ™idÃ¡vat vÃ½poÄty
- Automatizovat opakovÃ¡nÃ­
:::

## VÃ½hody Pythonu vs. Model Builder {#sec-srovnani-vyhod}

| Aspekt | Model Builder | Python |
|--------|---------------|--------|
| **Vizualizace** | âœ… VÃ½bornÃ¡ | âŒ Å½Ã¡dnÃ¡ (jen text) |
| **RychlÃ© vytvoÅ™enÃ­** | âœ… Drag & drop | âŒ MusÃ­te psÃ¡t |
| **SdÃ­lenÃ­** | âš ï¸ Toolbox soubor | âœ… TextovÃ½ .py soubor |
| **VerzovÃ¡nÃ­ (Git)** | âŒ BinÃ¡rnÃ­ formÃ¡t | âœ… TextovÃ½ formÃ¡t |
| **PodmÃ­nky (IF)** | âš ï¸ OmezenÃ© | âœ… PlnÃ¡ podpora |
| **Cykly (FOR)** | âš ï¸ Jen iterÃ¡tory | âœ… PlnÃ¡ flexibilita |
| **VÃ½poÄty** | âš ï¸ Calculate Field | âœ… JakÃ©koli operace |
| **Debugging** | âš ï¸ ObtÃ­Å¾nÃ© | âœ… SnadnÃ© |
| **Rychlost bÄ›hu** | âš ï¸ PomalejÅ¡Ã­ | âœ… RychlejÅ¡Ã­ |

: SrovnÃ¡nÃ­ Model Builder vs. Python {#tbl-srovnani-mb-python}

::: {.callout-important}
## ZÃ¡vÄ›r

**Model Builder** = skvÄ›lÃ½ start  
**Python** = mocnÃ½ nÃ¡stroj pro pokroÄilÃ© Ãºlohy
:::

# MoÅ¾nosti rozÅ¡Ã­Å™enÃ­ {#sec-rozsireni}

## Co kdybychom chtÄ›li vÃ­c?

NynÃ­ mÃ¡me Å™eÅ¡enÃ­ pro:

- âœ… 1 okres (JindÅ™ichÅ¯v Hradec)
- âœ… 1 vzdÃ¡lenost (500m)
- âœ… 1 typ krajinnÃ©ho pokryvu (lesy)

**Co kdyÅ¾ chceme:**

- ğŸ¤” VÅ¡echny okresy? (77Ã—)
- ğŸ¤” RÅ¯znÃ© vzdÃ¡lenosti? (100m, 300m, 500m, 1000m)
- ğŸ¤” VÅ¡echny typy pokryvu? (lesy, pole, mÄ›sta, voda, ...)

## MoÅ¾nost A: Spustit model vÃ­ckrÃ¡t ruÄnÄ› {#sec-rucni}

**Pro rÅ¯znÃ© vzdÃ¡lenosti:**

1. OtevÅ™Ã­t model
2. ZmÄ›nit parametr bufferu na 100m
3. Spustit
4. ZmÄ›nit na 300m
5. Spustit
6. ...

â±ï¸ **ÄŒas:** 10-15 minut  
ğŸ˜« **ProblÃ©m:** NudnÃ©, opakujÃ­cÃ­ se, nÃ¡chylnÃ© k chybÃ¡m

## MoÅ¾nost B: PouÅ¾Ã­t iterÃ¡tor (pÅ™Ã­Å¡tÄ›!) {#sec-iterator}

**V Lekci 2 se nauÄÃ­me:**

```{mermaid}
%%| fig-cap: "Model s iterÃ¡torem"

flowchart TD
    A[Tabulka vzdÃ¡lenostÃ­:<br/>100, 300, 500, 1000] --> B[ITERÃTOR]
    B --> C[Buffer %Distance%]
    C --> D[Zonal Statistics]
    D --> E[vÃ½sledek_%Distance%.dbf]
    
    style B fill:#fd8d3c
    style E fill:#6baed6
```

**VÃ½sledek:** 4 tabulky (jedna pro kaÅ¾dou vzdÃ¡lenost)

::: {.callout-warning}
**StÃ¡le problÃ©m:** Jak spojit 4 tabulky do jednÃ©?
:::

## MoÅ¾nost C: Python (za 2-3 tÃ½dny) {#sec-python-reseni}

```{.python}
# ElegantnÃ­ Å™eÅ¡enÃ­ v Pythonu
vzdalenosti = [100, 300, 500, 1000]
vysledky = []

for vzd in vzdalenosti:
    # Buffer
    buffer = vytvor_buffer(vzd)
    
    # AnalÃ½za
    procento = vypocitej_lesy(buffer)
    
    # UloÅ¾it
    vysledky.append({
        'Vzdalenost': vzd,
        'Procento_lesu': procento
    })

# Jedna tabulka se vÅ¡emi vÃ½sledky!
uloz_tabulku(vysledky, 'vysledky_vsechny.csv')
```

::: {.callout-tip}
## VÃ½hoda

- âœ… Jeden skript
- âœ… Jedna vÃ½slednÃ¡ tabulka
- âœ… Snadno rozÅ¡Ã­Å™it o dalÅ¡Ã­ parametry
- âœ… RychlÃ©
:::

## A co kombinace parametrÅ¯? {#sec-kombinace}

**ScÃ©nÃ¡Å™:** Chceme analyzovat:

- 2 typy komunikacÃ­ (dÃ¡lnice, silnice I. tÅ™Ã­dy)
- 3 vzdÃ¡lenosti (100m, 500m, 1000m)
- = **6 kombinacÃ­**

### V Model Builderu

PotÅ™ebovali bychom **vnoÅ™enÃ© iterÃ¡tory** = 2 modely propojenÃ© dohromady â†’ velmi sloÅ¾itÃ©!

```{mermaid}
%%| fig-cap: "VnoÅ™enÃ© modely (sloÅ¾itÃ©!)"

flowchart TD
    A[Model 1: IterÃ¡tor komunikacÃ­] --> B[DÃ¡lnice]
    A --> C[Silnice I.]
    B --> D[Model 2: IterÃ¡tor vzdÃ¡lenostÃ­]
    C --> E[Model 2: IterÃ¡tor vzdÃ¡lenostÃ­]
    D --> F[3 tabulky]
    E --> G[3 tabulky]
    
    style A fill:#fd8d3c
    style D fill:#fee391
    style E fill:#fee391
```

### V Pythonu

```{.python}
komunikace = ['dalnice', 'silnice1']
vzdalenosti = [100, 500, 1000]

for kom in komunikace:
    for vzd in vzdalenosti:
        analyzuj(kom, vzd)
```

::: {.callout-important}
## 3 Å™Ã¡dky!

VidÃ­te rozdÃ­l?
:::

## Diskuze {#sec-diskuze}

::: {.callout-note icon=false}
## OtÃ¡zky k zamyÅ¡lenÃ­

1. Kolik Äasu byste strÃ¡vili vytvoÅ™enÃ­m vnoÅ™enÃ½ch modelÅ¯ v Model Builderu?
2. Jak byste spojili 6 vÃ½slednÃ½ch tabulek do jednÃ©?
3. Co kdyby zadÃ¡nÃ­ zmÄ›nilo: "TeÄ to chceme pro 5 typÅ¯ komunikacÃ­ a 10 vzdÃ¡lenostÃ­" (50 kombinacÃ­)?

**OdpovÄ›Ä:** Proto se uÄÃ­me Python! ğŸ
:::

# ShrnutÃ­ {#sec-shrnuti}

## Co jsme se dnes nauÄili

::: {.callout-tip icon=false}
## PÅ™ehled lekce

âœ… **ProÄ automatizovat GIS Ãºlohy**

- Ãšspora Äasu
- Eliminace chyb
- Opakovatelnost
- Dokumentace

âœ… **Model Builder - zÃ¡klady**

- VizuÃ¡lnÃ­ programovÃ¡nÃ­
- SklÃ¡dÃ¡nÃ­ nÃ¡strojÅ¯ do workflow
- VytvoÅ™enÃ­ funkÄnÃ­ho modelu

âœ… **PraktickÃ¡ Ãºloha**

- AnalÃ½za krajinnÃ©ho pokryvu v ochrannÃ½ch pÃ¡smech
- 5 krokÅ¯: vÃ½bÄ›r â†’ clip â†’ buffer â†’ binÃ¡rnÃ­ rastr â†’ zonÃ¡lnÃ­ statistika
- Interpretace vÃ½sledkÅ¯

âœ… **Export do Pythonu**

- Model = Python kÃ³d
- PrvnÃ­ pohled na Python syntax
- SrovnÃ¡nÃ­ Model Builder vs. Python

âœ… **Limity Model Builderu**

- SloÅ¾itÃ© operace (vnoÅ™enÃ© cykly)
- SpojovÃ¡nÃ­ vÃ½sledkÅ¯
- Motivace pro Python
:::

## Co nÃ¡s ÄekÃ¡ pÅ™Ã­Å¡tÄ› (Lekce 2) {#sec-priste}

::: {.panel-tabset}

### PrvnÃ­ ÄÃ¡st - IterÃ¡tory

- Jak automatizovat opakovÃ¡nÃ­ v Model Builderu
- Iterate Field Values - prochÃ¡zenÃ­ rÅ¯znÃ½ch vzdÃ¡lenostÃ­
- ProblÃ©m: mnoho vÃ½stupnÃ­ch tabulek

### DruhÃ¡ ÄÃ¡st - Python Tool

- Z modelu vytvoÅ™Ã­me nÃ¡stroj s GUI
- Parametry: uÅ¾ivatel si vybere okres, vzdÃ¡lenost
- NÃ¡stroj mÅ¯Å¾ete sdÃ­let s kolegy

:::

## KlÃ­ÄovÃ© pojmy {#sec-pojmy}

| Pojem | VÃ½znam |
|-------|--------|
| **Automatizace** | OpakovanÃ© spouÅ¡tÄ›nÃ­ Ãºloh bez lidskÃ©ho zÃ¡sahu |
| **Model Builder** | NÃ¡stroj pro vizuÃ¡lnÃ­ tvorbu workflow |
| **Workflow** | Posloupnost krokÅ¯ vedoucÃ­ k vÃ½sledku |
| **Iterator** | Mechanismus pro opakovÃ¡nÃ­ (pÅ™Ã­Å¡tÄ›) |
| **ArcPy** | Python knihovna pro ArcGIS |
| **ZonÃ¡lnÃ­ statistika** | VÃ½poÄet statistik v definovanÃ½ch zÃ³nÃ¡ch |
| **BinÃ¡rnÃ­ rastr** | Rastr s hodnotami 0/1 (ano/ne) |

: KlÃ­ÄovÃ© pojmy z lekce {#tbl-pojmy}

## DomÃ¡cÃ­ Ãºkol (volitelnÃ½) {#sec-ukol}

ProcviÄte si lÃ¡tku pomocÃ­ [volitelnÃ½ch ÃºkolÅ¯](#sec-volitelne-ukoly) nÃ­Å¾e.

::: {.callout-tip}
## DoporuÄenÃ­

- ZaÄnÄ›te Ãškolem 1 (lehkÃ½) - urÄitÄ› zvlÃ¡dnete!
- Pokud vÃ¡s to bavÃ­, zkuste Ãškol 2
- Ãškol 3 je pro ty, kdo chtÄ›jÃ­ vÃ½zvu ğŸ˜Š
:::

# VolitelnÃ© Ãºkoly {#sec-volitelne-ukoly}

## Ãškol 1: ZmÄ›na parametrÅ¯ modelu â­ {#sec-ukol1}

::: {.callout-note}
## ObtÃ­Å¾nost: LehkÃ¡

**CÃ­l:** NauÄit se mÄ›nit parametry v modelu a vidÄ›t, jak to ovlivnÃ­ vÃ½sledky.
:::

**ZadÃ¡nÃ­:**  
Upravte svÅ¯j model tak, aby analyzoval **pÃ¡smo 300 metrÅ¯** (mÃ­sto 500m) kolem dÃ¡lnic v okrese JindÅ™ichÅ¯v Hradec.

**OÄekÃ¡vanÃ½ vÃ½sledek:**

- UpravenÃ½ model s bufferem 300m
- NovÃ¡ vÃ½slednÃ¡ tabulka
- PorovnÃ¡nÃ­: je procento lesÅ¯ v pÃ¡smu 300m vyÅ¡Å¡Ã­ nebo niÅ¾Å¡Ã­ neÅ¾ v 500m? ProÄ?

::: {.callout-tip collapse="true"}
## Postup

1. OtevÅ™ete svÅ¯j model `Analyza_Lesu_v_Pasmu`
2. Dvojklik na nÃ¡stroj Buffer
3. ZmÄ›Åˆte Distance: `500 Meters` â†’ `300 Meters`
4. ZmÄ›Åˆte nÃ¡zev vÃ½stupu: `buffer_500m` â†’ `buffer_300m`
5. ZmÄ›Åˆte nÃ¡zev vÃ½slednÃ© tabulky: `vysledek_lesy.dbf` â†’ `vysledek_lesy_300m.dbf`
6. UloÅ¾te a spusÅ¥te model
7. Porovnejte vÃ½sledky (MEAN hodnoty)
:::

**OtÃ¡zky k zamyÅ¡lenÃ­:**

- Je procento lesÅ¯ v uÅ¾Å¡Ã­m pÃ¡smu (300m) jinÃ© neÅ¾ v Å¡irÅ¡Ã­m (500m)?
- Jak byste to vysvÄ›tlili? (NÃ¡povÄ›da: rozmÃ­stÄ›nÃ­ lesÅ¯ vs. dÃ¡lnic)

::: {.callout-tip collapse="true"}
## Bonus

VytvoÅ™te tabulku v Excelu s porovnÃ¡nÃ­m:

| VzdÃ¡lenost | Procento lesÅ¯ |
|------------|---------------|
| 300m | X.X% |
| 500m | Y.Y% |
:::

## Ãškol 2: JinÃ½ okres â­â­ {#sec-ukol2}

::: {.callout-note}
## ObtÃ­Å¾nost: StÅ™ednÃ­

**CÃ­l:** Pochopit, jak zmÄ›nit atributovÃ½ dotaz v modelu.
:::

**ZadÃ¡nÃ­:**  
Upravte model tak, aby analyzoval okres **Praha-vÃ½chod** (mÃ­sto JindÅ™ichÅ¯v Hradec).

**OÄekÃ¡vanÃ½ vÃ½sledek:**

- Model fungujÃ­cÃ­ pro okres Praha-vÃ½chod
- VÃ½slednÃ¡ tabulka s procentem lesÅ¯
- PorovnÃ¡nÃ­: mÃ¡ Praha-vÃ½chod vÃ­ce nebo mÃ©nÄ› lesÅ¯ v pÃ¡smech kolem dÃ¡lnic neÅ¾ JH?

::: {.callout-tip collapse="true"}
## Postup

1. NejdÅ™Ã­v zjistÄ›te pÅ™esnÃ½ nÃ¡zev okresu:
   - OtevÅ™ete atributovou tabulku vrstvy `okresy`
   - NajdÄ›te pole NAZ_LAU1
   - NajdÄ›te Å™Ã¡dek s Prahou-vÃ½chod (mÅ¯Å¾e bÃ½t "Praha-vÃ½chod" nebo "Praha - vÃ½chod")
2. V modelu: dvojklik na Make Feature Layer
3. ZmÄ›Åˆte Expression:
   ```sql
   NAZ_LAU1 = 'Praha-vÃ½chod'
   ```
   (Pozor na pÅ™esnÃ½ zÃ¡pis!)
4. ZmÄ›Åˆte nÃ¡zvy vÃ½stupÅ¯, aby bylo jasnÃ©, Å¾e jde o jinÃ½ okres
5. SpusÅ¥te model
:::

::: {.callout-warning collapse="true"}
## NÃ¡povÄ›da

- Pokud model hlÃ¡sÃ­ "0 features selected", zkontrolujte pÅ™esnÃ½ nÃ¡zev okresu v datech
- MÅ¯Å¾e bÃ½t potÅ™eba pouÅ¾Ã­t `LIKE` mÃ­sto `=`:
  ```sql
  NAZ_LAU1 LIKE '%Praha%vÃ½chod%'
  ```
:::

::: {.callout-tip collapse="true"}
## Bonus

VytvoÅ™te srovnÃ¡vacÃ­ tabulku pro 3-5 rÅ¯znÃ½ch okresÅ¯.
:::

## Ãškol 3: JinÃ½ typ krajinnÃ©ho pokryvu â­â­ {#sec-ukol3}

::: {.callout-note}
## ObtÃ­Å¾nost: StÅ™ednÃ­

**CÃ­l:** NauÄit se analyzovat rÅ¯znÃ© kategorie dat zmÄ›nou jednoho parametru.
:::

**ZadÃ¡nÃ­:**  
Analyzujte zastoupenÃ­ **zemÄ›dÄ›lskÃ© pÅ¯dy** (CLC kÃ³d 2) mÃ­sto lesÅ¯ v pÃ¡smu 500m kolem dÃ¡lnic v okrese JH.

**OÄekÃ¡vanÃ½ vÃ½sledek:**

- Model analyzujÃ­cÃ­ zemÄ›dÄ›lskou pÅ¯du
- PorovnÃ¡nÃ­: je v pÃ¡smu vÃ­ce lesÅ¯ nebo zemÄ›dÄ›lskÃ© pÅ¯dy?

::: {.callout-tip collapse="true"}
## Postup

1. V modelu: dvojklik na nÃ¡stroj Equal To
2. ZmÄ›Åˆte Input value: `3` â†’ `2`
3. ZmÄ›Åˆte nÃ¡zvy vÃ½stupÅ¯:
   - `lesy_binarni` â†’ `zempuda_binarni`
   - `vysledek_lesy.dbf` â†’ `vysledek_zempuda.dbf`
4. SpusÅ¥te model
:::

::: {.callout-tip collapse="true"}
## RozÅ¡Ã­Å™enÃ­

VytvoÅ™te tabulku se vÅ¡emi typy krajinnÃ©ho pokryvu:

| CLC kÃ³d | Typ | Procento |
|---------|-----|----------|
| 1 | UrbanizovanÃ© plochy | ? |
| 2 | ZemÄ›dÄ›lskÃ¡ pÅ¯da | ? |
| 3 | Lesy | ? |
| 4 | MokÅ™ady | ? |
| 5 | VodnÃ­ plochy | ? |

(MusÃ­te spustit model 5Ã— s rÅ¯znÃ½mi kÃ³dy)
:::

::: {.callout-important}
## OtÃ¡zka

Je tento postup efektivnÃ­? Co kdybyste chtÄ›li 10 kategoriÃ­? 50?  
â†’ Proto se nauÄÃ­me iterÃ¡tory a Python!
:::

## Ãškol 4: Export a zkoumÃ¡nÃ­ Python kÃ³du â­ {#sec-ukol4}

::: {.callout-note}
## ObtÃ­Å¾nost: LehkÃ¡

**CÃ­l:** SeznÃ¡mit se s Python syntaxÃ­ na vaÅ¡em vlastnÃ­m modelu.
:::

**ZadÃ¡nÃ­:**  
Exportujte vÃ¡Å¡ model do Pythonu a prozkoumejte kÃ³d.

::: {.callout-tip collapse="true"}
## Postup

1. V Model Builderu: Model â†’ Export â†’ To Python Script
2. UloÅ¾te jako `muj_model.py`
3. OtevÅ™ete v textovÃ©m editoru (Notepad++, VS Code, nebo PoznÃ¡mkovÃ½ blok)
:::

**Ãškoly v kÃ³du:**

::: {.panel-tabset}

### A) NajdÄ›te

**NajdÄ›te a zvÃ½raznÄ›te:**

- Å˜Ã¡dek s importem arcpy
- Å˜Ã¡dek, kde se vytvÃ¡Å™Ã­ buffer 500m
- Å˜Ã¡dek s SQL dotazem pro okres
- Å˜Ã¡dek s hodnotou pro lesy (3)

### B) Experimentujte

**Experimentujte (bez spouÅ¡tÄ›nÃ­!):**

- Zkuste zmÄ›nit `"500 Meters"` na `"1000 Meters"` - na kterÃ©m Å™Ã¡dku?
- NajdÄ›te mÃ­sto, kde byste zmÄ›nili okres na jinÃ½
- Kolik Å™Ã¡dkÅ¯ by bylo potÅ™eba zmÄ›nit, abyste zmÄ›nili vzdÃ¡lenost? A v modelu?

### C) PÅ™emÃ½Å¡lejte

**PÅ™emÃ½Å¡lejte:**

- Je kÃ³d ÄitelnÃ½? RozumÃ­te alespoÅˆ trochu, co dÄ›lÃ¡?
- KterÃ© ÄÃ¡sti jsou jasnÃ©, kterÃ© ne?
- VidÃ­te vÃ½hody textovÃ© podoby vs. grafickÃ©?

:::

::: {.callout-warning}
**PoznÃ¡mka:** KÃ³d zatÃ­m nespouÅ¡tÄ›jte - to se nauÄÃ­me pÅ™Ã­Å¡tÄ›. TeÄ jen pozorujte strukturu.
:::

## Ãškol 5 (BONUS): VnoÅ™enÃ© modely - vÃ½zva! â­â­â­ {#sec-ukol5}

::: {.callout-warning}
## ObtÃ­Å¾nost: Velmi tÄ›Å¾kÃ¡

**VAROVÃNÃ:** Tento Ãºkol je zÃ¡mÄ›rnÄ› velmi obtÃ­Å¾nÃ½! Jeho cÃ­lem je ukÃ¡zat vÃ¡m, Å¾e nÄ›kterÃ© vÄ›ci jsou v Model Builderu nepraktickÃ©. Nebojte se, pokud se vÃ¡m to nepodaÅ™Ã­ - prÃ¡vÄ› proto se uÄÃ­me Python! ğŸ˜Š
:::

**ZadÃ¡nÃ­:**  
VytvoÅ™te Å™eÅ¡enÃ­, kterÃ© analyzuje **2 okresy Ã— 2 vzdÃ¡lenosti = 4 kombinace**:

- Okresy: JindÅ™ichÅ¯v Hradec, Praha-vÃ½chod
- VzdÃ¡lenosti: 300m, 500m

**OÄekÃ¡vanÃ½ vÃ½sledek:**  
4 tabulky:

- `vysledek_JH_300.dbf`
- `vysledek_JH_500.dbf`
- `vysledek_Praha_300.dbf`
- `vysledek_Praha_500.dbf`

::: {.panel-tabset}

### PÅ™Ã­stup A

**PÅ™Ã­stup A (jednoduÅ¡Å¡Ã­, ale nudnÃ½):**

- SpusÅ¥te model 4Ã— ruÄnÄ›, pokaÅ¾dÃ© zmÄ›Åˆte parametry
- ZapiÅ¡te Äasy: Jak dlouho to celkem trvalo?

### PÅ™Ã­stup B

**PÅ™Ã­stup B (sloÅ¾itÃ½ - vnoÅ™enÃ© modely):**

- VytvoÅ™te Model 2 (vnitÅ™nÃ­) s iterÃ¡torem pÅ™es vzdÃ¡lenosti
- VytvoÅ™te Model 1 (vnÄ›jÅ¡Ã­) s iterÃ¡torem pÅ™es okresy, kterÃ½ volÃ¡ Model 2
- PoznÃ¡mka: Je to VELMI sloÅ¾itÃ© nastavit!

:::

::: {.callout-tip collapse="true"}
## PodrobnÃ½ postup PÅ™Ã­stupu B

**Krok 1: VytvoÅ™ Model 2 (vnitÅ™nÃ­ - "Detail_Analysis")**

Tento model zpracuje JEDNU komunikaci pro rÅ¯znÃ© vzdÃ¡lenosti

**Parametry modelu:**

- Input: Komunikace (vrstva liniÃ­) [nastavit jako Model Parameter]
- Input: NÃ¡zev komunikace (text) [Model Parameter]

**Model:**

1. Iterate Field Values pÅ™es tabulku vzdÃ¡lenostÃ­ (100, 500, 1000)
2. Buffer s distance = %Distance%
3. Intersect s okresem
4. Equal To (lesy)
5. Zonal Statistics â†’ vysledek_%NÃ¡zev%_%Distance%.dbf

**Krok 2: VytvoÅ™ Model 1 (vnÄ›jÅ¡Ã­ - "Master_Analysis")**

Tento model prochÃ¡zÃ­ komunikace a volÃ¡ Model 2

**Model:**

1. Iterate Feature Classes pÅ™es komunikace (dalnice, silnice1)
2. Pro kaÅ¾dou komunikaci zavolej Model 2:
   - NÃ¡stroj: Detail_Analysis (vÃ¡Å¡ Model 2)
   - Parameter Komunikace: %Name%
   - Parameter NÃ¡zev: %Name%

**Krok 3: SpusÅ¥ Model 1**
:::

::: {.callout-note collapse="true"}
## NÃ¡povÄ›da

- Model se volÃ¡ jako nÃ¡stroj pÅ™es: Insert â†’ Model â†’ [nÃ¡zev modelu]
- Aby model Å¡el zavolat z jinÃ©ho modelu, musÃ­ mÃ­t definovanÃ© Model Parameters (pravÃ½ klik na promÄ›nnou â†’ Model Parameter)
- MÅ¯Å¾eÅ¡ potÅ™ebovat nastavit "Preconditions" (Å¡ipka s teÄkou)
- Pokud to nefunguje, zkus nejdÅ™Ã­v kaÅ¾dÃ½ model otestovat samostatnÄ›
:::

::: {.callout-tip collapse="true"}
## AlternativnÃ­ pÅ™Ã­stup (jednoduÅ¡Å¡Ã­, ale nudnÄ›jÅ¡Ã­)

Pokud vnoÅ™enÃ© modely nefungujÃ­, mÅ¯Å¾eÅ¡ Model 2 spustit 2Ã— ruÄnÄ›:

1. PrvnÃ­ spuÅ¡tÄ›nÃ­: pro dÃ¡lnice â†’ vytvoÅ™Ã­ 3 tabulky
2. DruhÃ© spuÅ¡tÄ›nÃ­: pro silnice I. â†’ vytvoÅ™Ã­ dalÅ¡Ã­ 3 tabulky
:::

### Reflexe (dÅ¯leÅ¾itÄ›jÅ¡Ã­ neÅ¾ Å™eÅ¡enÃ­!)

Po dokonÄenÃ­ (nebo pokusu) napiÅ¡te:

1. Kolik Äasu vÃ¡m to zabralo?
2. KolikrÃ¡t jste museli model upravovat?
3. Kolik chyb jste udÄ›lali?
4. Jak byste se cÃ­tili, kdyby zadÃ¡nÃ­ bylo 10 okresÅ¯ Ã— 10 vzdÃ¡lenostÃ­?

::: {.callout-important collapse="true"}
## UkÃ¡zka Python Å™eÅ¡enÃ­

```{.python}
# V Pythonu by to vypadalo takto (nemusÃ­te rozumÄ›t detailÅ¯m):

okresy = ['JindÅ™ichÅ¯v Hradec', 'Praha-vÃ½chod']
vzdalenosti = [300, 500]

for okres in okresy:
    for vzd in vzdalenosti:
        # VÃ½bÄ›r okresu
        arcpy.MakeFeatureLayer_management(
            "okresy", "temp_layer", 
            f"NAZ_LAU1 = '{okres}'"
        )
        
        # Buffer
        arcpy.Buffer_analysis(
            "dalnice_clip", "buffer_temp",
            f"{vzd} Meters"
        )
        
        # AnalÃ½za...
        # UloÅ¾it: f"vysledek_{okres}_{vzd}.dbf"

print("Hotovo! 4 kombinace zpracovÃ¡ny.")
```

**PonauÄenÃ­:** VidÃ­te, proÄ se uÄÃ­me Python? ğŸ˜Š
:::

# DalÅ¡Ã­ zdroje {#sec-zdroje}

## Dokumentace

::: {.callout-tip}
## ArcGIS Pro

- [Model Builder dokumentace](https://pro.arcgis.com/en/pro-app/latest/help/analysis/geoprocessing/modelbuilder/what-is-modelbuilder-.htm)
- [Geoprocessing nÃ¡stroje](https://pro.arcgis.com/en/pro-app/latest/tool-reference/main/arcgis-pro-tool-reference.htm)
:::

::: {.callout-tip}
## ArcPy (Python)

- [ArcPy dokumentace](https://pro.arcgis.com/en/pro-app/latest/arcpy/main/arcgis-pro-arcpy-reference.htm)
- [ArcPy Get Started](https://pro.arcgis.com/en/pro-app/latest/arcpy/get-started/what-is-arcpy-.htm)
:::

## Video tutoriÃ¡ly (volitelnÃ©)

- [Esri: Introduction to ModelBuilder](https://www.esri.com/training/)
- [Esri: Automating Workflows with Python](https://www.esri.com/training/)

## Corine Land Cover

- [Corine Land Cover - dokumentace](https://land.copernicus.eu/pan-european/corine-land-cover)
- [CLC Nomenclature](https://land.copernicus.eu/user-corner/technical-library/corine-land-cover-nomenclature-guidelines/html)

## Tipy na dalÅ¡Ã­ studium

1. **ProcviÄujte:** ÄŒÃ­m vÃ­c modelÅ¯ vytvoÅ™Ã­te, tÃ­m lÃ©pe pochopÃ­te workflow
2. **Experimentujte:** Zkuste rÅ¯znÃ© nÃ¡stroje a parametry
3. **Dokumentujte:** PiÅ¡te si poznÃ¡mky k modelÅ¯m (Description v properties)
4. **SdÃ­lejte:** Diskutujte s kolegy, uÄte se od ostatnÃ­ch
5. **PÅ™ipravte se na Python:** PÅ™Ã­Å¡tÃ­ lekce uÅ¾ zaÄneme s kÃ³dem!

# Kontakt a dotazy {#sec-kontakt}

::: {.callout-note icon=false}
## KontaktnÃ­ informace

**VyuÄujÃ­cÃ­:** [VaÅ¡e jmÃ©no]  
**Email:** [email]  
**KonzultaÄnÃ­ hodiny:** [Äas a mÃ­sto]

**OtÃ¡zky k lekci:**

- PiÅ¡te na email s pÅ™edmÄ›tem "GIS-L1: [vaÅ¡e otÃ¡zka]"
- Nebo pÅ™ijÄte na konzultace

**SdÃ­lenÃ­ ÃºkolÅ¯ (volitelnÃ©):**

- Pokud chcete zpÄ›tnou vazbu, odevzdejte pÅ™es [systÃ©m/email]
- Deadline: [datum] (ale nenÃ­ povinnÃ©!)
:::

# PoznÃ¡mky pro dalÅ¡Ã­ lekci {#sec-dalsi-lekce}

::: {.callout-tip}
## Co si pÅ™inÃ©st pÅ™Ã­Å¡tÄ›

- FunkÄnÃ­ ArcGIS Pro
- UloÅ¾enÃ½ toolbox s modelem z dneÅ¡nÃ­ lekce
- NÃ¡pady: JakÃ© Ãºlohy byste chtÄ›li automatizovat ve vaÅ¡Ã­ praxi?
:::

::: {.callout-note}
## Na co se tÄ›Å¡it

- IterÃ¡tory v Model Builderu
- AutomatickÃ© prochÃ¡zenÃ­ rÅ¯znÃ½ch parametrÅ¯
- Tvorba Python Tool s GUI
- JeÅ¡tÄ› jeden krok blÃ­Å¾ k Pythonu!
:::

---

::: {.callout-important icon=false}
## ğŸ‰ Gratuluji!

ÃšspÄ›Å¡nÄ› jste dokonÄili prvnÃ­ lekci. VytvoÅ™ili jste funkÄnÃ­ model, exportovali ho do Pythonu, a pochopili zÃ¡klady automatizace GIS Ãºloh.

**Next step:** Lekce 2 - IterÃ¡tory a Python Tools
:::

---

::: {.content-hidden}
*Tento materiÃ¡l je souÄÃ¡stÃ­ kurzu "ProgramovÃ¡nÃ­ pro GIS" na FÅ½P ÄŒZU Praha.*  
*PoslednÃ­ aktualizace: Leden 2025*  
*Licence: CC BY-NC-SA 4.0*
:::